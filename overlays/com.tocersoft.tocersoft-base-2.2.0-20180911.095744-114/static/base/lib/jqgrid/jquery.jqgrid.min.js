function setHistoryTop(a){var b,c;for(b in selectedScrollArray)if(b==a&&(c=selectedScrollArray[b],0!=c)){$("#"+b).closest(".ui-jqgrid-bdiv").scrollTop(c);break}}function setHistorySelect(a){var b,c,d;for(b=0;b<selectedIdArray.length;b++)c=selectedIdArray[b],"remove"!=c&&(d=c.split("+")[0],d==a&&$("#"+d).setSelection(c.split("+")[1]))}function setUpDown(a){$("#"+a).focus(),console.log(a+"位置="+$.inArray(a,keyDownTableArray)),-1==$.inArray(a,keyDownTableArray)&&(keyDownTableArray.push(a),$("#"+a).keydown(jqgridKeyDownEvent))}function jqgridKeyDownEvent(a){var j,k,l,b=a.keyCode,c=a.target,d=a.currentTarget,e=d.id,f=$("#"+e),g=$("#"+e).jqGrid("getGridParam","selrow"),h=g,i=f.closest(".ui-jqgrid-bdiv").scrollTop();console.log(c),console.log("tableId="+e+"  rowId="+g),(38==b||40==b)&&(38==b?(j=$("#"+e+" #"+g).prev()[0],k=j.id,""!=k?h=k:a.preventDefault()):40==b&&(l=$("#"+e+" #"+g).next()[0],void 0!=l?h=l.id:a.preventDefault()),f.resetSelection(),f.jqGrid("setSelection",h),f.closest(".ui-jqgrid-bdiv").scrollTop(i-10))}var oldPage,keyDownTableArray;!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function($){"use strict";function _pivotfilter(a,b){var c,d,f,e=[];if(!this||"function"!=typeof a||a instanceof RegExp)throw new TypeError;for(f=this.length,c=0;f>c;c++)if(this.hasOwnProperty(c)&&(d=this[c],a.call(b,d,c,this))){e.push(d);break}return e}var rp_ge,setSelected,J,M,E,E1,M1,i,f,f1,s,H,A,F,e,L,m,hs;$.jgrid=$.jgrid||{},$.jgrid.hasOwnProperty("defaults")||($.jgrid.defaults={}),$.extend($.jgrid,{version:"5.0.2",htmlDecode:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},template:function(a){var c,b=$.makeArray(arguments).slice(1),d=b.length;return null==a&&(a=""),a.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(a,e){if(!isNaN(parseInt(e,10)))return b[parseInt(e,10)];for(c=0;d>c;c++)if($.isArray(b[c]))for(var f=b[c],g=f.length;g--;)if(e===f[g].nm)return f[g].v})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var a=-1,b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=c.exec(b)&&(a=parseFloat(RegExp.$1)),a},getCellIndex:function(a){var b=$(a);return b.is("tr")?-1:(b=(b.is("td")||b.is("th")?b:b.closest("td,th"))[0],$.jgrid.msie?$.inArray(b,b.parentNode.cells):b.cellIndex)},stripHtml:function(a){a=String(a);var b=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(b,""),a&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):""):a},stripPref:function(a,b){var c=$.type(a);return("string"===c||"number"===c)&&(a=String(a),b=""!==a?String(b).replace(String(a),""):b),b},parse:function(jsonString){var js=jsonString;return"while(1);"===js.substr(0,9)&&(js=js.substr(9)),"/*"===js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(a,b,c,d){var m,n,o,r,s,t,u,v,w,x,y,z,A,B,C,D,e=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g,h=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),i="string"==typeof b?b.match(h):null,j=function(a,b){for(a=String(a),b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},k={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},l=0,p=function(a,b){return 0===a?12===b&&(b=0):12!==b&&(b+=12),b},q=0;if(void 0===d&&(d=$.jgrid.getRegional(this,"formatter.date")),void 0===d.parseRe&&(d.parseRe=/[#%\\\/:_;.,\t\s-]/),d.masks.hasOwnProperty(a)&&(a=d.masks[a]),b&&null!=b)if(isNaN(b-0)||"u"!==String(a).toLowerCase())if(b.constructor===Date)l=b;else if(null!==i)l=new Date(parseInt(i[1],10)),i[3]&&(q=60*Number(i[5])+Number(i[6]),q*="-"===i[4]?1:-1,q-=l.getTimezoneOffset(),l.setTime(Number(Number(l)+1e3*60*q)));else{for("ISO8601Long"===d.srcformat&&"Z"===b.charAt(b.length-1)&&(q-=(new Date).getTimezoneOffset()),b=String(b).replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe),a=a.replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe),n=0,o=a.length;o>n;n++){switch(a[n]){case"M":m=$.inArray(b[n],d.monthNames),-1!==m&&12>m&&(b[n]=m+1,k.m=b[n]);break;case"F":m=$.inArray(b[n],d.monthNames,12),-1!==m&&m>11&&(b[n]=m+1-12,k.m=b[n]);break;case"n":a[n]="m";break;case"j":a[n]="d";break;case"a":m=$.inArray(b[n],d.AmPm),-1!==m&&2>m&&b[n]===d.AmPm[m]&&(b[n]=m,k.h=p(b[n],k.h));break;case"A":m=$.inArray(b[n],d.AmPm),-1!==m&&m>1&&b[n]===d.AmPm[m]&&(b[n]=m-2,k.h=p(b[n],k.h));break;case"g":k.h=parseInt(b[n],10)}void 0!==b[n]&&(k[a[n].toLowerCase()]=parseInt(b[n],10))}if(k.f&&(k.m=k.f),0===k.m&&0===k.y&&0===k.d)return"&#160;";k.m=parseInt(k.m,10)-1,r=k.y,r>=70&&99>=r?k.y=1900+k.y:r>=0&&69>=r&&(k.y=2e3+k.y),l=new Date(k.y,k.m,k.d,k.h,k.i,k.s,k.u),q>0&&l.setTime(Number(Number(l)+1e3*60*q))}else l=new Date(1e3*parseFloat(b));else l=new Date(k.y,k.m,k.d,k.h,k.i,k.s,k.u);return d.userLocalTime&&0===q&&(q-=(new Date).getTimezoneOffset(),q>0&&l.setTime(Number(Number(l)+1e3*60*q))),void 0===c?l:(d.masks.hasOwnProperty(c)?c=d.masks[c]:c||(c="Y-m-d"),s=l.getHours(),t=l.getMinutes(),u=l.getDate(),v=l.getMonth()+1,w=l.getTimezoneOffset(),x=l.getSeconds(),y=l.getMilliseconds(),z=l.getDay(),A=l.getFullYear(),B=(z+6)%7+1,C=(new Date(A,v-1,u)-new Date(A,0,1))/864e5,D={d:j(u),D:d.dayNames[z],j:u,l:d.dayNames[z+7],N:B,S:d.S(u),w:z,z:C,W:5>B?Math.floor((C+B-1)/7)+1:Math.floor((C+B-1)/7)||((new Date(A-1,0,1).getDay()+6)%7<4?53:52),F:d.monthNames[v-1+12],m:j(v),M:d.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:A,y:String(A).substring(2),a:12>s?d.AmPm[0]:d.AmPm[1],A:12>s?d.AmPm[2]:d.AmPm[3],B:"?",g:s%12||12,G:s,h:j(s%12||12),H:j(s),i:j(t),s:j(x),u:y,e:"?",I:"?",O:(w>0?"-":"+")+j(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),P:"?",T:(String(l).match(f)||[""]).pop().replace(g,""),Z:"?",c:"?",r:"?",U:Math.floor(l/1e3)},c.replace(e,function(a){return D.hasOwnProperty(a)?D[a]:a.substring(1)}))},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(a){return(a||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(a,b){var c,d,f,e=[];if("function"==typeof b)return b(a);if(c=a[b],void 0===c)try{if("string"==typeof b&&(e=b.split(".")),f=e.length)for(c=a;c&&f--;)d=e.shift(),c=c[d]}catch(g){}return c},getXmlData:function(a,b,c){var d,e="string"==typeof b?b.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof b?b(a):e&&e[2]?e[1]?$(e[1],a).attr(e[2]):$(a).attr(e[2]):(d=$(b,a),c?d:d.length>0?$(d).text():void 0)},cellWidth:function(){var a=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),b=a.appendTo("body").find("td").width();return a.remove(),Math.abs(b-5)>.1},isLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},getRegional:function(a,b,c){var d;return void 0!==c?c:(a.p&&a.p.regional&&$.jgrid.regional&&(d=$.jgrid.getAccessor($.jgrid.regional[a.p.regional]||{},b)),void 0===d&&(d=$.jgrid.getAccessor($.jgrid,b)),d)},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)?!0:!1}catch(a){return!1}},cell_width:!0,ajaxOptions:{},from:function(source){var $t=this,QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"!=typeof d[0]?!1:!0),this._hasData=function(){return null===_data?!1:0===_data.length?!1:!0},this._getStr=function(a){var b=[];return _trim&&b.push("jQuery.trim("),b.push("String("+a+")"),_trim&&b.push(")"),_usecase||b.push(".toLowerCase()"),b.join("")},this._strComp=function(a){return"string"==typeof a?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){return _trim&&(a=$.trim(a)),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?a:a.toLowerCase()},this._funcLoop=function(a){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b},this._append=function(a){var b;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,b=0;_orDepth>b;b++)_query+="(";_negate&&(_query+="!"),_query+="("+a+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(a,b){_lastCommand=a,_lastField=b},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(a,b){return null===_lastCommand?self:null!==a&&null!==b?_lastCommand(a,b):null===_lastField?_lastCommand(a):_useProperties?_lastCommand(_lastField,a):_lastCommand(a)},this._equals=function(a,b){return 0===self._compare(a,b,1)},this._compare=function(a,b,c){var d=Object.prototype.toString;return void 0===c&&(c=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===d.call(a)&&"[object Date]"===d.call(b)?b>a?-c:a>b?c:0:(_usecase||"number"==typeof a||"number"==typeof b||(a=String(a),b=String(b)),b>a?-c:a>b?c:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(a,b){var j,k,l,h,i,c=_sorting[b].by,d=_sorting[b].dir,e=_sorting[b].type,f=_sorting[b].datefmt,g=_sorting[b].sfunc;if(b===_sorting.length-1)return self._getOrder(a,c,d,e,f,g);for(b++,h=self._getGroup(a,c,d,e,f),i=[],j=0;j<h.length;j++)for(l=self._doSort(h[j].items,b),k=0;k<l.length;k++)i.push(l[k]);return i},this._getOrder=function(a,b,c,d,e,f){var j,k,l,m,n,g=[],h=[],i="a"===c?1:-1;for(void 0===d&&(d="text"),m="float"===d||"number"===d||"currency"===d||"numeric"===d?function(a){var b=parseFloat(String(a).replace(_stripNum,""));return isNaN(b)?Number.NEGATIVE_INFINITY:b}:"int"===d||"integer"===d?function(a){return a?parseFloat(String(a).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===d||"datetime"===d?function(a){return $.jgrid.parseDate.call($t,e,a).getTime()}:$.isFunction(d)?d:function(a){return a=a?$.trim(String(a)):"",_usecase?a:a.toLowerCase()},$.each(a,function(a,c){k=""!==b?$.jgrid.getAccessor(c,b):c,void 0===k&&(k=""),k=m(k,c),h.push({vSort:k,index:a})}),$.isFunction(f)?h.sort(function(a,b){return a=a.vSort,b=b.vSort,f.call(this,a,b,i)}):h.sort(function(a,b){return a=a.vSort,b=b.vSort,self._compare(a,b,i)}),l=0,n=a.length;n>l;)j=h[l].index,g.push(a[j]),l++;return g},this._getGroup=function(a,b,c,d,e){var i,f=[],g=null,h=null;return $.each(self._getOrder(a,b,c,d,e),function(a,c){i=$.jgrid.getAccessor(c,b),null==i&&(i=""),self._equals(h,i)||(h=i,null!==g&&f.push(g),g=self._group(b,i)),g.items.push(c)}),null!==g&&f.push(g),f},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(a){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(a)){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b}return _data},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(a,b,c){return _negate=!_negate,self.and(a,b,c)},this.orNot=function(a,b,c){return _negate=!_negate,self.or(a,b,c)},this.not=function(a,b,c){return self.andNot(a,b,c)},this.and=function(a,b,c){return _queuedOperator=" && ",void 0===a?self:self._repeatCommand(a,b,c)},this.or=function(a,b,c){return _queuedOperator=" || ",void 0===a?self:self._repeatCommand(a,b,c)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(a){return _negate=!_negate,self.is(a)},this.is=function(a){return self._append("this."+a),self._resetNegate(),self},this._compareValues=function(a,b,c,d,e){var f,g,h;if(f=_useProperties?"jQuery.jgrid.getAccessor(this,'"+b+"')":"this",void 0===c&&(c=null),g=c,h=void 0===e.stype?"text":e.stype,null!==c)switch(h){case"int":case"integer":g=isNaN(Number(g))||""===g?"0":g,f="parseInt("+f+",10)",g="parseInt("+g+",10)";break;case"float":case"number":case"numeric":g=String(g).replace(_stripNum,""),g=isNaN(Number(g))||""===g?"0":g,f="parseFloat("+f+")",g="parseFloat("+g+")";break;case"date":case"datetime":g=String($.jgrid.parseDate.call($t,e.srcfmt||"Y-m-d",g).getTime()),f='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID($t.p.id)+'")[0],"'+e.srcfmt+'",'+f+").getTime()";break;default:f=self._getStr(f),g=self._getStr('"'+self._toStr(g)+'"')}return self._append(f+" "+d+" "+g),self._setCommand(a,b),self._resetNegate(),self},this.equals=function(a,b,c){return self._compareValues(self.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return self._compareValues(self.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return self._compareValues(self.equals,a,null,"===",c)},this.greater=function(a,b,c){return self._compareValues(self.greater,a,b,">",c)},this.less=function(a,b,c){return self._compareValues(self.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return self._compareValues(self.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return self._compareValues(self.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(b)+'"')):(null!=b&&(d=_trim?$.trim(b.toString()).length:b.toString().length),self._append(self._getStr("this")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(a)+'"'))),self._setCommand(self.startsWith,a),self._resetNegate(),self},this.endsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+d+","+d+') == "'+self._toStr(b)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(a)+'".length,"'+self._toStr(a)+'".length) == "'+self._toStr(a)+'"'),self._setCommand(self.endsWith,a),self._resetNegate(),self},this.contains=function(a,b){return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+self._toStr(b)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(a)+'",0) > -1'),self._setCommand(self.contains,a),self._resetNegate(),self},this.groupBy=function(a,b,c,d){return self._hasData()?self._getGroup(_data,a,b,c,d):null},this.orderBy=function(a,b,c,d,e){return b=null==b?"a":$.trim(b.toString().toLowerCase()),null==c&&(c="text"),null==d&&(d="Y-m-d"),null==e&&(e=!1),("desc"===b||"descending"===b)&&(b="d"),("asc"===b||"ascending"===b)&&(b="a"),_sorting.push({by:a,dir:b,type:c,datefmt:d,sfunc:e}),self},self};return new QueryObject(source,null)},getMethod:function(a){return this.getAccessor($.fn.jqGrid,a)},extend:function(a){$.extend($.fn.jqGrid,a),this.no_legacy_api||$.fn.extend(a)},clearBeforeUnload:function(a){var c,d,e,f,b=$("#"+$.jgrid.jqID(a))[0];if(b.grid){for(c=b.grid,$.isFunction(c.emptyRows)&&c.emptyRows.call(b,!0,!0),$(document).unbind("mouseup.jqGrid"+b.p.id),$(c.hDiv).unbind("mousemove"),$(b).unbind(),e=c.headers.length,f=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p"],d=0;e>d;d++)c.headers[d].el=null;for(d in c)c.hasOwnProperty(d)&&(c[d]=null);for(d in b.p)b.p.hasOwnProperty(d)&&(b.p[d]=$.isArray(b.p[d])?[]:null);for(e=f.length,d=0;e>d;d++)b.hasOwnProperty(f[d])&&(b[f[d]]=null,delete b[f[d]])}},gridUnload:function(a){var b,c,d,e;a&&(a=$.trim(a),0===a.indexOf("#")&&(a=a.substring(1)),b=$("#"+$.jgrid.jqID(a))[0],b.grid&&(c={id:$(b).attr("id"),cl:$(b).attr("class")},b.p.pager&&$(b.p.pager).unbind().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),d=document.createElement("table"),d.className=c.cl,e=$.jgrid.jqID(b.id),$(d).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+e),1===$(b.p.pager).parents("#gbox_"+e).length&&$(b.p.pager).insertBefore("#gbox_"+e),$.jgrid.clearBeforeUnload(a),$("#gbox_"+e).remove(),$(d).attr({id:c.id}),$("#alertmod_"+$.jgrid.jqID(a)).remove()))},gridDestroy:function(a){if(a){a=$.trim(a),0===a.indexOf("#")&&(a=a.substring(1));var b=$("#"+$.jgrid.jqID(a))[0];if(b.grid){b.p.pager&&$(b.p.pager).remove();try{$.jgrid.clearBeforeUnload(a),$("#gbox_"+$.jgrid.jqID(a)).remove()}catch(c){}}}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"cbox",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"}}}}),$.fn.jqGrid=function(a){var b,c;if("string"==typeof a){if(b=$.jgrid.getMethod(a),!b)throw"jqGrid - No such method: "+a;return c=$.makeArray(arguments).slice(1),b.apply(this,c)}return this.each(function(){var b,c,d,e,g,h,i,f,r,j,k,l,m,n,o,p,q,s,t,u,v,Z,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,cb,db,eb,fb,hb,ib,jb,kb,bb,gb,lb,mb,nb,pb,ob,qb,rb,sb,tb,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb;if(!this.grid){if(null!=a&&void 0!==a.data&&(b=a.data,a.data=[]),c=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:30,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"left",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",responsive:!1,restoreCellonFail:!0},$.jgrid.defaults,a),void 0!==b&&(c.data=b,a.data=b),d=this,e={headers:[],cols:[],footers:[],dragStart:function(a,b,e){var f=$(this.bDiv).offset().left;this.resizing={idx:a,startX:b.pageX,sOL:b.pageX-f},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(c.id),"#gbox_"+$.jgrid.jqID(c.id)),this.curGbox.css({display:"block",left:b.pageX-f,top:e[1],height:e[2]}),$(d).triggerHandler("jqGridResizeStart",[b,a]),$.isFunction(c.resizeStart)&&c.resizeStart.call(d,b,a),document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var f,g,b=a.pageX-this.resizing.startX,d=this.headers[this.resizing.idx],e="ltr"===c.direction?d.width+b:d.width-b;e>33&&(this.curGbox.css({left:this.resizing.sOL+b}),c.forceFit===!0?(f=this.headers[this.resizing.idx+c.nv],g="ltr"===c.direction?f.width-b:f.width+b,g>c.minColWidth&&(d.newWidth=e,f.newWidth=g)):(this.newWidth="ltr"===c.direction?c.tblwidth+b:c.tblwidth-b,d.newWidth=e))}},dragEnd:function(a){if(this.hDiv.style.cursor="default",this.resizing){var b=this.resizing.idx,e=this.headers[b].newWidth||this.headers[b].width;e=parseInt(e,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(c.id)).css("display","none"),c.colModel[b].width=e,this.headers[b].width=e,this.headers[b].el.style.width=e+"px",this.cols[b].style.width=e+"px",this.footers.length>0&&(this.footers[b].style.width=e+"px"),c.forceFit===!0?(e=this.headers[b+c.nv].newWidth||this.headers[b+c.nv].width,this.headers[b+c.nv].width=e,this.headers[b+c.nv].el.style.width=e+"px",this.cols[b+c.nv].style.width=e+"px",this.footers.length>0&&(this.footers[b+c.nv].style.width=e+"px"),c.colModel[b+c.nv].width=e):(c.tblwidth=this.newWidth||c.tblwidth,$("table:first",this.bDiv).css("width",c.tblwidth+"px"),$("table:first",this.hDiv).css("width",c.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,c.footerrow&&($("table:first",this.sDiv).css("width",c.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),a&&($(d).triggerHandler("jqGridResizeStop",[e,b]),$.isFunction(c.resizeStop)&&c.resizeStop.call(d,e,b))}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){var a,b,f,g,i,j,k,l,m,n,o,p;if(e.timer&&clearTimeout(e.timer),e.timer=null,a=$(e.bDiv).height()){if(b=$("table:first",e.bDiv),b[0].rows.length)try{f=b[0].rows[1],g=f?$(f).outerHeight()||e.prevRowHeight:e.prevRowHeight}catch(h){g=e.prevRowHeight}if(g&&(e.prevRowHeight=g,i=c.rowNum,j=e.scrollTop=e.bDiv.scrollTop,k=Math.round(b.position().top)-j,l=k+b.height(),m=g*i,a>l&&0>=k&&(void 0===c.lastpage||(parseInt((l+j+m-1)/m,10)||0)<=c.lastpage)&&(o=parseInt((a-l+m-1)/m,10)||1,l>=0||2>o||c.scroll===!0?(n=(Math.round((l+j)/m)||0)+1,k=-1):k=1),k>0&&(n=(parseInt(j/m,10)||0)+1,o=(parseInt((j+a)/m,10)||0)+2-n,p=!0),o)){if(c.lastpage&&(n>c.lastpage||1===c.lastpage||n===c.page&&n===c.lastpage))return;e.hDiv.loading?e.timer=setTimeout(e.populateVisible,c.scrollTimeout):(c.page=n,p&&(e.selectionPreserver(b[0]),e.emptyRows.call(b[0],!1,!1)),e.populate(o)),c.scrollPopUp&&null!=c.lastpage&&($("#scroll_g"+c.id).show().html($.jgrid.template($.jgrid.getRegional(d,"defaults.pgtext",c.pgtext),c.page,c.lastpage)).css({top:c.scrollTopOffset+j*((parseInt(c.height,10)-45)/(parseInt(g,10)*parseInt(c.records,10)))+"px",left:c.scrollLeftOffset}),$(this).mouseout(function(){$("#scroll_g"+c.id).hide()}))}}},scrollGrid:function(a){if(c.scroll){var b=e.bDiv.scrollTop;void 0===e.scrollTop&&(e.scrollTop=0),b!==e.scrollTop&&(e.scrollTop=b,e.timer&&clearTimeout(e.timer),e.timer=setTimeout(e.populateVisible,c.scrollTimeout))}e.hDiv.scrollLeft=e.bDiv.scrollLeft,c.footerrow&&(e.sDiv.scrollLeft=e.bDiv.scrollLeft),c.frozenColumns&&$(e.fbDiv).scrollTop(e.bDiv.scrollTop),a&&a.stopPropagation()},selectionPreserver:function(a){var b=a.p,c=b.selrow,d=b.selarrrow?$.makeArray(b.selarrrow):null,e=a.grid.bDiv.scrollLeft,f=function(){var g;if(b.selrow=null,b.selarrrow=[],b.multiselect&&d&&d.length>0)for(g=0;g<d.length;g++)d[g]!==c&&$(a).jqGrid("setSelection",d[g],!1,null);c&&$(a).jqGrid("setSelection",c,!1,null),a.grid.bDiv.scrollLeft=e,$(a).unbind(".selectionPreserver",f)};$(a).bind("jqGridGridComplete.selectionPreserver",f)}},"TABLE"!==this.tagName.toUpperCase()||null==this.id)return alert("Element is not a table or has no id!"),void 0;if(void 0!==document.documentMode&&document.documentMode<=5)return alert("Grid can not be used in this ('quirks') mode!"),void 0;f=0;for(h in $.jgrid.regional)$.jgrid.regional.hasOwnProperty(h)&&(0===f&&(g=h),f++);if(1===f&&g!==c.regional&&(c.regional=g),$(this).empty().attr("tabindex","0"),this.p=c,this.p.useProp=!!$.fn.prop,0===this.p.colNames.length)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length)return alert($.jgrid.getRegional(this,"errors.model")),void 0;for(j=$.jgrid.getMethod("getStyleUI"),k=d.p.styleUI+".common",l=j(k,"disabled",!0),m=j(k,"highlight",!0),n=j(k,"hover",!0),o=j(k,"cornerall",!0),p=j(k,"icon_base",!0),q=$.jgrid.msie,s=[],t=[],u=[],k=d.p.styleUI+".base",r=$("<div "+j(k,"viewBox",!1,"ui-jqgrid-view")+" role='grid'></div>"),d.p.direction=$.trim(d.p.direction.toLowerCase()),d.p._ald=!1,-1===$.inArray(d.p.direction,["ltr","rtl"])&&(d.p.direction="ltr"),i=d.p.direction,$(r).insertBefore(this),$(this).appendTo(r),v=$("<div "+j(k,"entrieBox",!1,"ui-jqgrid")+"></div>"),$(v).attr({id:"gbox_"+this.id,dir:i}).insertBefore(r),$(r).attr("id","gview_"+this.id).appendTo(v),$("<div "+j(d.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(r),$("<div "+j(k,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+$.jgrid.getRegional(d,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(r),$(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id}),w=["shiftKey","altKey","ctrlKey"],x=function(a,b){return a=parseInt(a,10),isNaN(a)?b||0:a},y=function(a,b,c,f,g,h){var j,o,i=d.p.colModel[a],k=i.align,l='style="',m=i.classes,n=i.name,p=[];return k&&(l+="text-align:"+k+";"),i.hidden===!0&&(l+="display:none;"),0===b?l+="width: "+e.headers[a].width+"px;":($.isFunction(i.cellattr)||"string"==typeof i.cellattr&&null!=$.jgrid.cellattr&&$.isFunction($.jgrid.cellattr[i.cellattr]))&&(j=$.isFunction(i.cellattr)?i.cellattr:$.jgrid.cellattr[i.cellattr],o=j.call(d,g,c,f,i,h),o&&"string"==typeof o&&(o=o.replace(/style/i,"style").replace(/title/i,"title"),o.indexOf("title")>-1&&(i.title=!1),o.indexOf("class")>-1&&(m=void 0),p=o.replace(/\-style/g,"-sti").split(/style/),2===p.length?(p[1]=$.trim(p[1].replace(/\-sti/g,"-style").replace("=","")),(0===p[1].indexOf("'")||0===p[1].indexOf('"'))&&(p[1]=p[1].substring(1)),l+=p[1].replace(/'/gi,'"')):l+='"')),p.length||(p[0]="",l+='"'),l+=(void 0!==m?' class="'+m+'"':"")+(i.title&&c?' title="'+$.jgrid.stripHtml(c)+'"':""),l+=' aria-describedby="'+d.p.id+"_"+n+'"',l+p[0]
},z=function(a){return null==a||""===a?"&#160;":d.p.autoencode?$.jgrid.htmlEncode(a):String(a)},A=function(a,b,c,e,f){var h,i,g=d.p.colModel[c];return void 0!==g.formatter?(a=""!==String(d.p.idPrefix)?$.jgrid.stripPref(d.p.idPrefix,a):a,i={rowId:a,colModel:g,gid:d.p.id,pos:c,styleUI:d.p.styleUI},h=$.isFunction(g.formatter)?g.formatter.call(d,b,i,e,f):$.fmatter?$.fn.fmatter.call(d,g.formatter,b,i,e,f):z(b)):h=z(b),h},B=function(a,b,c,d,e,f){var g,h;return g=A(a,b,c,e,"add"),h=y(c,d,g,e,a,f),'<td role="gridcell" '+h+">"+g+"</td>"},C=function(a,b,c,e,f){var g='<input role="checkbox" type="checkbox" id="jqg_'+d.p.id+"_"+a+'" '+f+' name="jqg_'+d.p.id+"_"+a+'"'+(e?'checked="checked"':"")+"/>",h=y(b,c,"",null,a,!0);return'<td role="gridcell" '+h+">"+g+"</td>"},D=function(a,b,c,d,e){var f=(parseInt(c,10)-1)*parseInt(d,10)+1+b,g=y(a,b,f,null,b,!0);return'<td role="gridcell" '+e+" "+g+">"+f+"</td>"},E=function(a){var b,f,c=[],e=0;for(f=0;f<d.p.colModel.length;f++)b=d.p.colModel[f],"cb"!==b.name&&"subgrid"!==b.name&&"rn"!==b.name&&(c[e]="local"===a?b.name:"xml"===a||"xmlstring"===a?b.xmlmap||b.name:b.jsonmap||b.name,d.p.keyName!==!1&&b.key===!0&&(d.p.keyName=c[e]),e++);return c},F=function(a){var b=d.p.remapColumns;return b&&b.length||(b=$.map(d.p.colModel,function(a,b){return b})),a&&(b=$.map(b,function(b){return a>b?null:b-a})),b},G=function(a,b){var c;this.p.deepempty?$(this.rows).slice(1).remove():(c=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(c)),a&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),b===!0&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},H=function(){var e,f,g,h,i,j,k,l,r,s,t,a=d.p,b=a.data,c=b.length,m=a.localReader,n=a.colModel,o=m.cell,p=(a.multiselect===!0?1:0)+(a.subGrid===!0?1:0)+(a.rownumbers===!0?1:0),q=a.scroll?$.jgrid.randId():1;if("local"===a.datatype&&m.repeatitems===!0)for(r=F(p),s=E("local"),h=a.keyIndex===!1?$.isFunction(m.id)?m.id.call(d,b):m.id:a.keyIndex,e=0;c>e;e++){for(g=b[e],i=$.jgrid.getAccessor(g,h),void 0===i&&("number"==typeof h&&null!=n[h+p]&&(i=$.jgrid.getAccessor(g,n[h+p].name)),void 0===i&&(i=q+e,o&&(j=$.jgrid.getAccessor(g,o)||g,i=null!=j&&void 0!==j[h]?j[h]:i,j=null))),l={},l[m.id]=i,o&&(g=$.jgrid.getAccessor(g,o)||g),t=$.isArray(g)?r:s,f=0;f<t.length;f++)k=$.jgrid.getAccessor(g,t[f]),l[n[f+p].name]=k;$.extend(!0,b[e],l)}},I=function(){var b,c,e,a=d.p.data.length;for(b=d.p.keyName===!1||d.p.loadonce===!0?d.p.localReader.id:d.p.keyName,d.p._index=[],c=0;a>c;c++)e=$.jgrid.getAccessor(d.p.data[c],b),void 0===e&&(e=String(c+1)),d.p._index[e]=c},J=function(a,b,c,e,f){var i,g="-1",h="",j=b?"display:none;":"",k=$(d).triggerHandler("jqGridRowAttr",[e,f,a]);if("object"!=typeof k&&(k=$.isFunction(d.p.rowattr)?d.p.rowattr.call(d,e,f,a):"string"==typeof d.p.rowattr&&null!=$.jgrid.rowattr&&$.isFunction($.jgrid.rowattr[d.p.rowattr])?$.jgrid.rowattr[d.p.rowattr].call(d,e,f,a):{}),!$.isEmptyObject(k)){k.hasOwnProperty("id")&&(a=k.id,delete k.id),k.hasOwnProperty("tabindex")&&(g=k.tabindex,delete k.tabindex),k.hasOwnProperty("style")&&(j+=k.style,delete k.style),k.hasOwnProperty("class")&&(c+=" "+k["class"],delete k["class"]);try{delete k.role}catch(l){}for(i in k)k.hasOwnProperty(i)&&(h+=" "+i+"="+k[i])}return'<tr role="row" id="'+a+'" tabindex="'+g+'" class="'+c+'"'+(""===j?"":' style="'+j+'"')+h+">"},K=function(a,b,c,e){var n,o,q,t,v,w,z,H,I,N,m,p,r,s,u,y,A,K,L,M,O,U,P,Q,R,S,T,V,Y,W,X,Z,_,ab,bb,eb,f=new Date,g="local"!==d.p.datatype&&d.p.loadonce||"xmlstring"===d.p.datatype,h="_id_",i=d.p.xmlReader,l="local"===d.p.datatype?"local":"xml";if(g&&(d.p.data=[],d.p._index={},d.p.localReader.id=h),d.p.reccount=0,$.isXMLDoc(a)){if(-1!==d.p.treeANode||d.p.scroll?b=b>1?b:1:(G.call(d,!1,!0),b=1),m=$(d),p=0,r=d.p.multiselect===!0?1:0,s=0,u=d.p.rownumbers===!0?1:0,y=[],A={},K=[],L=d.p.altRows===!0?d.p.altclass:"",M=j(k,"rowBox",!0,"jqgrow ui-row-"+d.p.direction),d.p.subGrid===!0&&(s=1,t=$.jgrid.getMethod("addSubGridCell")),i.repeatitems||(y=E(l)),v=d.p.keyName===!1?$.isFunction(i.id)?i.id.call(d,a):i.id:d.p.keyName,w=-1===String(v).indexOf("[")?y.length?function(a,b){return $(v,a).text()||b}:function(a,b){return $(i.cell,a).eq(v).text()||b}:function(a,b){return a.getAttribute(v.replace(/[\[\]]/g,""))||b},d.p.userData={},d.p.page=x($.jgrid.getXmlData(a,i.page),d.p.page),d.p.lastpage=x($.jgrid.getXmlData(a,i.total),1),d.p.records=x($.jgrid.getXmlData(a,i.records)),$.isFunction(i.userdata)?d.p.userData=i.userdata.call(d,a)||{}:$.jgrid.getXmlData(a,i.userdata,!0).each(function(){d.p.userData[this.getAttribute("name")]=$(this).text()}),O=$.jgrid.getXmlData(a,i.root,!0),O=$.jgrid.getXmlData(O,i.row,!0),O||(O=[]),P=O.length,Q=0,R=[],S=parseInt(d.p.rowNum,10),T=d.p.scroll?$.jgrid.randId():1,V=$("#"+$.jgrid.jqID(d.p.id)+" tbody:first"),P>0&&d.p.page<=0&&(d.p.page=1),O&&P)for(e&&(S*=e+1),W=$.isFunction(d.p.afterInsertRow),X=!1,Z=u?j(k,"rownumBox",!1,"jqgrid-rownum"):"",_=r?j(k,"multiBox",!1,"cbox"):"",d.p.grouping&&(X=d.p.groupingView.groupCollapse===!0,Y=$.jgrid.getMethod("groupingPrepare"));P>Q;){if(H=O[Q],I=w(H,T+Q),I=d.p.idPrefix+I,U=0===b?0:b+1,N=M+(1===(U+Q)%2?" "+L:""),ab=K.length,K.push(""),u&&K.push(D(0,Q,d.p.page,d.p.rowNum,Z)),r&&K.push(C(I,u,Q,!1,_)),s&&K.push(t.call(m,r+u,Q+b)),i.repeatitems)z||(z=F(r+s+u)),bb=$.jgrid.getXmlData(H,i.cell,!0),$.each(z,function(a){var c=bb[this];return c?(q=c.textContent||c.text,A[d.p.colModel[a+r+s+u].name]=q,K.push(B(I,q,a+r+s+u,Q+b,H,A)),void 0):!1});else for(n=0;n<y.length;n++)q=$.jgrid.getXmlData(H,y[n]),A[d.p.colModel[n+r+s+u].name]=q,K.push(B(I,q,n+r+s+u,Q+b,H,A));if(K[ab]=J(I,X,N,A,H),K.push("</tr>"),d.p.grouping&&(R.push(K),d.p.groupingView._locgr||Y.call(m,A,Q),K=[]),(g||d.p.treeGrid===!0&&!d.p._ald)&&(A[h]=$.jgrid.stripPref(d.p.idPrefix,I),d.p.data.push(A),d.p._index[A[h]]=d.p.data.length-1),d.p.gridview===!1&&(V.append(K.join("")),m.triggerHandler("jqGridAfterInsertRow",[I,A,H]),W&&d.p.afterInsertRow.call(d,I,A,H),K=[]),A={},p++,Q++,p===S)break}if(d.p.gridview===!0&&(o=d.p.treeANode>-1?d.p.treeANode:0,d.p.grouping?g||(m.jqGrid("groupingRender",R,d.p.colModel.length,d.p.page,S),R=null):d.p.treeGrid===!0&&o>0?$(d.rows[o]).after(K.join("")):(V.append(K.join("")),d.grid.cols=d.rows[0].cells)),d.p.subGrid===!0)try{m.jqGrid("addSubGrid",r+u)}catch(cb){}if(d.p.totaltime=new Date-f,p>0&&0===d.p.records&&(d.p.records=P),K=null,d.p.treeGrid===!0)try{m.jqGrid("setTreeNode",o+1,p+o+1)}catch(db){}if(d.p.reccount=p,d.p.treeANode=-1,d.p.userDataOnFooter&&m.jqGrid("footerData","set",d.p.userData,!0),g&&(d.p.records=P,d.p.lastpage=Math.ceil(P/S)),c||d.updatepager(!1,!0),g){for(;P>p;){if(H=O[p],I=w(H,p+T),I=d.p.idPrefix+I,i.repeatitems)z||(z=F(r+s+u)),eb=$.jgrid.getXmlData(H,i.cell,!0),$.each(z,function(a){var b=eb[this];return b?(q=b.textContent||b.text,A[d.p.colModel[a+r+s+u].name]=q,void 0):!1});else for(n=0;n<y.length;n++)q=$.jgrid.getXmlData(H,y[n]),A[d.p.colModel[n+r+s+u].name]=q;A[h]=$.jgrid.stripPref(d.p.idPrefix,I),d.p.grouping&&Y.call(m,A,p),d.p.data.push(A),d.p._index[A[h]]=d.p.data.length-1,A={},p++}d.p.grouping&&(d.p.groupingView._locgr=!0,m.jqGrid("groupingRender",R,d.p.colModel.length,d.p.page,S),R=null)}}},L=function(a,b,c,e){var g,i,h,l,p,q,r,t,w,H,I,K,L,N,O,S,n,o,s,u,v,y,z,A,M,P,Q,R,V,X,T,U,W,ab,Y,Z,_,bb,cb,db,eb,fb,ib,f=new Date;if(a){for(-1!==d.p.treeANode||d.p.scroll?b=b>1?b:1:(G.call(d,!1,!0),b=1),h="_id_",l="local"!==d.p.datatype&&d.p.loadonce||"jsonstring"===d.p.datatype,l&&(d.p.data=[],d.p._index={},d.p.localReader.id=h),d.p.reccount=0,"local"===d.p.datatype?(g=d.p.localReader,i="local"):(g=d.p.jsonReader,i="json"),n=$(d),o=0,s=[],u=d.p.multiselect?1:0,v=d.p.subGrid===!0?1:0,y=d.p.rownumbers===!0?1:0,z=F(u+v+y),A=E(i),M={},P=[],Q=d.p.altRows===!0?d.p.altclass:"",R=j(k,"rowBox",!0,"jqgrow ui-row-"+d.p.direction),d.p.page=x($.jgrid.getAccessor(a,g.page),d.p.page),d.p.lastpage=x($.jgrid.getAccessor(a,g.total),1),d.p.records=x($.jgrid.getAccessor(a,g.records)),d.p.userData=$.jgrid.getAccessor(a,g.userdata)||{},v&&(w=$.jgrid.getMethod("addSubGridCell")),L=d.p.keyName===!1?$.isFunction(g.id)?g.id.call(d,a):g.id:d.p.keyName,K=$.jgrid.getAccessor(a,g.root),null==K&&$.isArray(a)&&(K=a),K||(K=[]),I=K.length,q=0,I>0&&d.p.page<=0&&(d.p.page=1),T=parseInt(d.p.rowNum,10),U=d.p.scroll?$.jgrid.randId():1,W=!1,e&&(T*=e+1),"local"!==d.p.datatype||d.p.deselectAfterSort||(W=!0),Y=$.isFunction(d.p.afterInsertRow),Z=[],_=!1,bb=$("#"+$.jgrid.jqID(d.p.id)+" tbody:first"),cb=y?j(k,"rownumBox",!1,"jqgrid-rownum"):"",db=u?j(k,"multiBox",!1,"cbox"):"",d.p.grouping&&(_=d.p.groupingView.groupCollapse===!0,ab=$.jgrid.getMethod("groupingPrepare"));I>q;){for(t=K[q],O=$.jgrid.getAccessor(t,L),void 0===O&&("number"==typeof L&&null!=d.p.colModel[L+u+v+y]&&(O=$.jgrid.getAccessor(t,d.p.colModel[L+u+v+y].name)),void 0===O&&(O=U+q,0===s.length&&g.cell&&(eb=$.jgrid.getAccessor(t,g.cell)||t,O=null!=eb&&void 0!==eb[L]?eb[L]:O,eb=null))),O=d.p.idPrefix+O,V=1===b?0:b,S=R+(1===(V+q)%2?" "+Q:""),W&&(X=d.p.multiselect?-1!==$.inArray(O,d.p.selarrrow):O===d.p.selrow),fb=P.length,P.push(""),y&&P.push(D(0,q,d.p.page,d.p.rowNum,cb)),u&&P.push(C(O,y,q,X,db)),v&&P.push(w.call(n,u+y,q+b)),H=A,g.repeatitems&&(g.cell&&(t=$.jgrid.getAccessor(t,g.cell)||t),$.isArray(t)&&(H=z)),r=0;r<H.length;r++)p=$.jgrid.getAccessor(t,H[r]),M[d.p.colModel[r+u+v+y].name]=p,P.push(B(O,p,r+u+v+y,q+b,t,M));if(S+=X?" "+m:"",P[fb]=J(O,_,S,M,t),P.push("</tr>"),d.p.grouping&&(Z.push(P),d.p.groupingView._locgr||ab.call(n,M,q),P=[]),(l||d.p.treeGrid===!0&&!d.p._ald)&&(M[h]=$.jgrid.stripPref(d.p.idPrefix,O),d.p.data.push(M),d.p._index[M[h]]=d.p.data.length-1),d.p.gridview===!1&&(bb.append(P.join("")),n.triggerHandler("jqGridAfterInsertRow",[O,M,t]),Y&&d.p.afterInsertRow.call(d,O,M,t),P=[]),M={},o++,q++,o===T)break}if(d.p.gridview===!0&&(N=d.p.treeANode>-1?d.p.treeANode:0,d.p.grouping?l||(n.jqGrid("groupingRender",Z,d.p.colModel.length,d.p.page,T),Z=null):d.p.treeGrid===!0&&N>0?$(d.rows[N]).after(P.join("")):(bb.append(P.join("")),d.grid.cols=d.rows[0].cells)),d.p.subGrid===!0)try{n.jqGrid("addSubGrid",u+y)}catch(gb){}if(d.p.totaltime=new Date-f,o>0&&0===d.p.records&&(d.p.records=I),P=null,d.p.treeGrid===!0)try{n.jqGrid("setTreeNode",N+1,o+N+1)}catch(hb){}if(d.p.reccount=o,d.p.treeANode=-1,d.p.userDataOnFooter&&n.jqGrid("footerData","set",d.p.userData,!0),l&&(d.p.records=I,d.p.lastpage=Math.ceil(I/T)),c||d.updatepager(!1,!0),l){for(;I>o&&K[o];){if(t=K[o],O=$.jgrid.getAccessor(t,L),void 0===O&&("number"==typeof L&&null!=d.p.colModel[L+u+v+y]&&(O=$.jgrid.getAccessor(t,d.p.colModel[L+u+v+y].name)),void 0===O&&(O=U+o,0===s.length&&g.cell&&(ib=$.jgrid.getAccessor(t,g.cell)||t,O=null!=ib&&void 0!==ib[L]?ib[L]:O,ib=null))),t){for(O=d.p.idPrefix+O,H=A,g.repeatitems&&(g.cell&&(t=$.jgrid.getAccessor(t,g.cell)||t),$.isArray(t)&&(H=z)),r=0;r<H.length;r++)M[d.p.colModel[r+u+v+y].name]=$.jgrid.getAccessor(t,H[r]);M[h]=$.jgrid.stripPref(d.p.idPrefix,O),d.p.grouping&&ab.call(n,M,o),d.p.data.push(M),d.p._index[M[h]]=d.p.data.length-1,M={}}o++}d.p.grouping&&(d.p.groupingView._locgr=!0,n.jqGrid("groupingRender",Z,d.p.colModel.length,d.p.page,T),Z=null)}}},M=function(){function r(a){var c,f,g,h,i,j,b=0;if(null!=a.groups){for(f=a.groups.length&&"OR"===a.groupOp.toString().toUpperCase(),f&&q.orBegin(),c=0;c<a.groups.length;c++){b>0&&f&&q.or();try{r(a.groups[c])}catch(k){alert(k)}b++}f&&q.orEnd()}if(null!=a.rules)try{for(g=a.rules.length&&"OR"===a.groupOp.toString().toUpperCase(),g&&q.orBegin(),c=0;c<a.rules.length;c++)i=a.rules[c],h=a.groupOp.toString().toUpperCase(),p[i.op]&&i.field&&(b>0&&h&&"OR"===h&&(q=q.or()),j=e[i.field],"date"===j.stype&&j.srcfmt&&j.newfmt&&j.srcfmt!==j.newfmt&&(i.data=$.jgrid.parseDate.call(d,j.newfmt,i.data,j.srcfmt)),q=p[i.op](q,h)(i.field,i.data,e[i.field])),b++;g&&q.orEnd()}catch(l){alert(l)}}var h,i,j,k,m,n,o,l,p,q,u,w,x,y,z,A,B,C,E,F,D,a=d.p.multiSort?[]:"",b=[],c=!1,e={},f=[],g=[];if($.isArray(d.p.data)){if(l=d.p.grouping?d.p.groupingView:!1,$.each(d.p.colModel,function(){if(i=this.sorttype||"text",o=this.index||this.name,"date"===i||"datetime"===i?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(h=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.getRegional(d,"formatter.date.srcformat"),j=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.getRegional(d,"formatter.date.newformat")):h=j=this.datefmt||"Y-m-d",e[o]={stype:i,srcfmt:h,newfmt:j,sfunc:this.sortfunc||null}):e[o]={stype:i,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},d.p.grouping)for(n=0,m=l.groupField.length;m>n;n++)this.name===l.groupField[n]&&(f[n]=e[o],g[n]=o);d.p.multiSort||c||o!==d.p.sortname||(a=o,c=!0)}),d.p.multiSort&&(a=s,b=t),d.p.treeGrid&&d.p._sort)return $(d).jqGrid("SortTree",a,d.p.sortorder,e[a].stype||"text",e[a].srcfmt||""),void 0;if(p={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},q=$.jgrid.from.call(d,d.p.data),d.p.ignoreCase&&(q=q.ignoreCase()),d.p.search===!0)if(u=d.p.postData.filters)"string"==typeof u&&(u=$.jgrid.parse(u)),r(u);else try{k=e[d.p.postData.searchField],"date"===k.stype&&k.srcfmt&&k.newfmt&&k.srcfmt!==k.newfmt&&(d.p.postData.searchString=$.jgrid.parseDate.call(d,k.newfmt,d.p.postData.searchString,k.srcfmt)),q=p[d.p.postData.searchOper](q)(d.p.postData.searchField,d.p.postData.searchString,e[d.p.postData.searchField])}catch(v){}else d.p.treeGrid&&"nested"===d.p.treeGridModel&&q.orderBy(d.p.treeReader.left_field,"asc","integer","",null);if(d.p.treeGrid&&"adjacency"===d.p.treeGridModel&&(m=0,a=null),d.p.grouping)for(n=0;m>n;n++)q.orderBy(g[n],l.groupOrder[n],f[n].stype,f[n].srcfmt);if(d.p.multiSort?$.each(a,function(a){q.orderBy(this,b[a],e[this].stype,e[this].srcfmt,e[this].sfunc)}):a&&d.p.sortorder&&c&&("DESC"===d.p.sortorder.toUpperCase()?q.orderBy(d.p.sortname,"d",e[a].stype,e[a].srcfmt,e[a].sfunc):q.orderBy(d.p.sortname,"a",e[a].stype,e[a].srcfmt,e[a].sfunc)),w=q.select(),x=parseInt(d.p.rowNum,10),y=w.length,z=parseInt(d.p.page,10),A=Math.ceil(y/x),B={},(d.p.search||d.p.resetsearch)&&d.p.grouping&&d.p.groupingView._locgr){if(d.p.groupingView.groups=[],D=$.jgrid.getMethod("groupingPrepare"),d.p.footerrow&&d.p.userDataOnFooter){for(E in d.p.userData)d.p.userData.hasOwnProperty(E)&&(d.p.userData[E]=0);F=!0}for(C=0;y>C;C++){if(F)for(E in d.p.userData)d.p.userData.hasOwnProperty(E)&&(d.p.userData[E]+=parseFloat(w[C][E]||0));D.call($(d),w[C],C,x)}}return w=d.p.treeGrid&&d.p.search?$(d).jqGrid("searchTree",w):w.slice((z-1)*x,z*x),q=null,e=null,B[d.p.localReader.total]=A,B[d.p.localReader.page]=z,B[d.p.localReader.records]=y,B[d.p.localReader.root]=w,B[d.p.localReader.userdata]=d.p.userData,w=null,B}},N=function(a,b){var c,e,g,h,i,m,p,t,u,v,w,y,o="",q=d.p.pager?$.jgrid.jqID(d.p.pager.substr(1)):"",r=q?"_"+q:"",s=d.p.toppager?"_"+d.p.toppager.substr(1):"",f=parseInt(d.p.page,10)-1;0>f&&(f=0),f*=parseInt(d.p.rowNum,10),h=f+d.p.reccount,d.p.scroll&&(t=$("tbody:first > tr:gt(0)",d.grid.bDiv),f=h-t.length,d.p.reccount=t.length,u=t.outerHeight()||d.grid.prevRowHeight,u&&(v=f*u,w=parseInt(d.p.records,10)*u,$(">div:first",d.grid.bDiv).css({height:w}).children("div:first").css({height:v,display:v?"":"none"}),0===d.grid.bDiv.scrollTop&&d.p.page>1&&(d.grid.bDiv.scrollTop=d.p.rowNum*(d.p.page-1)*u)),d.grid.bDiv.scrollLeft=d.grid.hDiv.scrollLeft),o=d.p.pager||"",o+=d.p.toppager?o?","+d.p.toppager:d.p.toppager:"",o&&(m=$.jgrid.getRegional(d,"formatter.integer"),c=x(d.p.page),e=x(d.p.lastpage),$(".selbox",o)[this.p.useProp?"prop":"attr"]("disabled",!1),d.p.pginput===!0&&($("#input"+r).html($.jgrid.template($.jgrid.getRegional(d,"defaults.pgtext",d.p.pgtext)||"","<input "+j(k,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(q)+"'></span>")),d.p.toppager&&$("#input_t"+s).html($.jgrid.template($.jgrid.getRegional(d,"defaults.pgtext",d.p.pgtext)||"","<input "+j(k,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(q)+"_toppager'></span>")),$(".ui-pg-input",o).val(d.p.page),p=d.p.toppager?"#sp_1"+r+",#sp_1"+r+"_toppager":"#sp_1"+r,$(p).html($.fmatter?$.fmatter.util.NumberFormat(d.p.lastpage,m):d.p.lastpage)),d.p.viewrecords&&(0===d.p.reccount?$(".ui-paging-info",o).html($.jgrid.getRegional(d,"defaults.emptyrecords",d.p.emptyrecords)):(g=f+1,i=d.p.records,$.fmatter&&(g=$.fmatter.util.NumberFormat(g,m),h=$.fmatter.util.NumberFormat(h,m),i=$.fmatter.util.NumberFormat(i,m)),y=$.jgrid.getRegional(d,"defaults.recordtext",d.p.recordtext),$(".ui-paging-info",o).html($.jgrid.template(y,g,h,i)))),d.p.pgbuttons===!0&&(0>=c&&(c=e=0),1===c||0===c?($("#first"+r+", #prev"+r).addClass(l).removeClass(n),d.p.toppager&&$("#first_t"+s+", #prev_t"+s).addClass(l).removeClass(n)):($("#first"+r+", #prev"+r).removeClass(l),d.p.toppager&&$("#first_t"+s+", #prev_t"+s).removeClass(l)),c===e||0===c?($("#next"+r+", #last"+r).addClass(l).removeClass(n),d.p.toppager&&$("#next_t"+s+", #last_t"+s).addClass(l).removeClass(n)):($("#next"+r+", #last"+r).removeClass(l),d.p.toppager&&$("#next_t"+s+", #last_t"+s).removeClass(l)))),a===!0&&d.p.rownumbers===!0&&$(">td.jqgrid-rownum",d.rows).each(function(a){$(this).html(f+1+a)}),b&&d.p.jqgdnd&&$(d).jqGrid("gridDnD","updateDnD"),$(d).triggerHandler("jqGridGridComplete"),$.isFunction(d.p.gridComplete)&&d.p.gridComplete.call(d),$(d).triggerHandler("jqGridAfterGridComplete")},O=function(){d.grid.hDiv.loading=!0,d.p.hiddengrid||$(d).jqGrid("progressBar",{method:"show",loadtype:d.p.loadui,htmlcontent:$.jgrid.getRegional(d,"defaults.loadtext",d.p.loadtext)})},P=function(){d.grid.hDiv.loading=!1,$(d).jqGrid("progressBar",{method:"hide",loadtype:d.p.loadui})},Q=function(a){var e,f,b,c,g,h,i,j,l,k,m,n,o,p,q;if(!d.grid.hDiv.loading){if(b=d.p.scroll&&a===!1,c={},g=d.p.prmNames,d.p.page<=0&&(d.p.page=Math.min(1,d.p.lastpage)),null!==g.search&&(c[g.search]=d.p.search),null!==g.nd&&(c[g.nd]=(new Date).getTime()),null!==g.rows&&(c[g.rows]=d.p.rowNum),null!==g.page&&(c[g.page]=d.p.page),null!==g.sort&&(c[g.sort]=d.p.sortname),null!==g.order&&(c[g.order]=d.p.sortorder),null!==d.p.rowTotal&&null!==g.totalrows&&(c[g.totalrows]=d.p.rowTotal),h=$.isFunction(d.p.loadComplete),i=h?d.p.loadComplete:null,j=0,a=a||1,a>1?null!==g.npage?(c[g.npage]=a,j=a-1,a=1):i=function(b){d.p.page++,d.grid.hDiv.loading=!1,h&&d.p.loadComplete.call(d,b),Q(a-1)}:null!==g.npage&&delete d.p.postData[g.npage],d.p.grouping){for($(d).jqGrid("groupingSetup"),k=d.p.groupingView,m="",l=0;l<k.groupField.length;l++)n=k.groupField[l],$.each(d.p.colModel,function(a,b){b.name===n&&b.index&&(n=b.index)}),m+=n+" "+k.groupOrder[l]+", ";c[g.sort]=m+c[g.sort]}if($.extend(d.p.postData,c),o=d.p.scroll?d.rows.length-1:1,p=$(d).triggerHandler("jqGridBeforeRequest"),p===!1||"stop"===p)return;if($.isFunction(d.p.datatype))return d.p.datatype.call(d,d.p.postData,"load_"+d.p.id,o,a,j),void 0;if($.isFunction(d.p.beforeRequest)&&(p=d.p.beforeRequest.call(d),void 0===p&&(p=!0),p===!1))return;switch(e=d.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:d.p.url,type:d.p.mtype,dataType:e,data:$.isFunction(d.p.serializeGridData)?d.p.serializeGridData.call(d,d.p.postData):d.p.postData,success:function(c,f,g){if("needLogin"===c.status){var h=window.location.href;return-1!=h.indexOf("/admin/")?top.location.href=basePath+"/admin/login.htm":-1!=h.indexOf("/member/")?top.location.href=basePath+"/member/login.htm":$.dialog.alert(c.message),void 0}return $.isFunction(d.p.beforeProcessing)&&d.p.beforeProcessing.call(d,c,f,g)===!1?(P(),void 0):("xml"===e?K(c,o,a>1,j):L(c,o,a>1,j),$(d).triggerHandler("jqGridLoadComplete",[c]),i&&i.call(d,c),$(d).triggerHandler("jqGridAfterLoadComplete",[c]),b&&d.grid.populateVisible(),(d.p.loadonce||d.p.treeGrid)&&(d.p.datatype="local"),c=null,1===a&&P(),void 0)},error:function(b,c,e){$.isFunction(d.p.loadError)&&d.p.loadError.call(d,b,c,e),1===a&&P(),b=null},beforeSend:function(a,b){var c=!0;return $.isFunction(d.p.loadBeforeSend)&&(c=d.p.loadBeforeSend.call(d,a,b)),void 0===c&&(c=!0),c===!1?!1:(O(),void 0)}},$.jgrid.ajaxOptions,d.p.ajaxGridOptions));break;case"xmlstring":O(),f="string"!=typeof d.p.datastr?d.p.datastr:$.parseXML(d.p.datastr),K(f),$(d).triggerHandler("jqGridLoadComplete",[f]),h&&d.p.loadComplete.call(d,f),$(d).triggerHandler("jqGridAfterLoadComplete",[f]),d.p.datatype="local",d.p.datastr=null,P();break;case"jsonstring":O(),f="string"==typeof d.p.datastr?$.jgrid.parse(d.p.datastr):d.p.datastr,L(f),$(d).triggerHandler("jqGridLoadComplete",[f]),h&&d.p.loadComplete.call(d,f),$(d).triggerHandler("jqGridAfterLoadComplete",[f]),d.p.datatype="local",d.p.datastr=null,P();break;case"local":case"clientside":O(),d.p.datatype="local",d.p._ald=!0,q=M(),L(q,o,a>1,j),$(d).triggerHandler("jqGridLoadComplete",[q]),i&&i.call(d,q),$(d).triggerHandler("jqGridAfterLoadComplete",[q]),b&&d.grid.populateVisible(),P(),d.p._ald=!1}d.p._sort=!1}},R=function(a){$("#cb_"+$.jgrid.jqID(d.p.id),d.grid.hDiv)[d.p.useProp?"prop":"attr"]("checked",a);var b=d.p.frozenColumns?d.p.id+"_frozen":"";b&&$("#cb_"+$.jgrid.jqID(d.p.id),d.grid.fhDiv)[d.p.useProp?"prop":"attr"]("checked",a)},S=function(a,b){var h,m,o,q,r,s,t,v,w,y,z,c="<td class='ui-pg-button "+l+"'><span class='ui-separator'></span></td>",e="",f="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",g="",u=function(a,b){var c;return $.isFunction(d.p.onPaging)&&(c=d.p.onPaging.call(d,a,b)),"stop"===c?!1:(d.p.selrow=null,d.p.multiselect&&(d.p.selarrrow=[],R(!1)),d.p.savedRow=[],!0)};if(a=a.substr(1),b+="_"+a,h="pg_"+a,m=a+"_left",o=a+"_center",q=a+"_right",$("#"+$.jgrid.jqID(a)).append("<div id='"+h+"' class='ui-pager-control' role='group'><table "+j(k,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+m+"' align='left'></td><td id='"+o+"' align='left' style='white-space:pre;'></td><td id='"+q+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),d.p.rowList.length>0){for(g='<td dir="'+i+'">',g+="<select "+j(k,"pgSelectBox",!1,"ui-pg-selbox")+' role="listbox" title="'+($.jgrid.getRegional(d,"defaults.pgrecs",d.p.pgrecs)||"")+'">',t=0;t<d.p.rowList.length;t++)v=d.p.rowList[t].toString().split(":"),1===v.length&&(v[1]=v[0]),g+='<option role="option" value="'+v[0]+'"'+(x(d.p.rowNum,0)===x(v[0],0)?' selected="selected"':"")+">"+v[1]+"</option>";g+="</select></td>"}"rtl"===i&&(f+=g),d.p.pginput===!0&&(e="<td id='input"+b+"' dir='"+i+"'>"+$.jgrid.template($.jgrid.getRegional(d,"defaults.pgtext",d.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(a)+"'></span>")+"</td>"),d.p.pgbuttons===!0?(w=["first"+b,"prev"+b,"next"+b,"last"+b],y=j(k,"pgButtonBox",!0,"ui-pg-button"),z=[$.jgrid.getRegional(d,"defaults.pgfirst",d.p.pgfirst)||"",$.jgrid.getRegional(d,"defaults.pgprev",d.p.pgprev)||"",$.jgrid.getRegional(d,"defaults.pgnext",d.p.pgnext)||"",$.jgrid.getRegional(d,"defaults.pglast",d.p.pglast)||""],"rtl"===i&&(w.reverse(),z.reverse()),f+="<td id='"+w[0]+"' class='"+y+"' title='"+z[0]+"'"+"><span "+j(k,"icon_first",!1,p)+"></span></td>",f+="<td id='"+w[1]+"' class='"+y+"'  title='"+z[1]+"'"+"><span "+j(k,"icon_prev",!1,p)+"></span></td>",f+=""!==e?c+e+c:"",f+="<td id='"+w[2]+"' class='"+y+"' title='"+z[2]+"'"+"><span "+j(k,"icon_next",!1,p)+"></span></td>",f+="<td id='"+w[3]+"' class='"+y+"' title='"+z[3]+"'"+"><span "+j(k,"icon_end",!1,p)+"></span></td>"):""!==e&&(f+=e),"ltr"===i&&(f+=g),f+="</tr></tbody></table>",d.p.viewrecords===!0&&$("td#"+a+"_"+d.p.recordpos,"#"+h).append("<div dir='"+i+"' style='text-align:"+d.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+a+"_"+d.p.pagerpos,"#"+h).append(f),s=$("#gbox_"+$.jgrid.jqID(d.p.id)).css("font-size")||"11px",$("#gbox_"+$.jgrid.jqID(d.p.id)).append("<div id='testpg' "+j(k,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+s+";visibility:hidden;' ></div>"),r=$(f).clone().appendTo("#testpg").width(),$("#testpg").remove(),r>0&&(""!==e&&(r+=50),$("td#"+a+"_"+d.p.pagerpos,"#"+h).width(r)),d.p._nvtd=[],d.p._nvtd[0]=r?Math.floor((d.p.width-r)/2):Math.floor(d.p.width/3),d.p._nvtd[1]=0,f=null,$(".ui-pg-selbox","#"+h).bind("change",function(){return u("records",this)?(d.p.page=Math.round(d.p.rowNum*(d.p.page-1)/this.value-.5)+1,d.p.rowNum=this.value,d.p.pager&&$(".ui-pg-selbox",d.p.pager).val(this.value),d.p.toppager&&$(".ui-pg-selbox",d.p.toppager).val(this.value),Q(),!1):!1}),d.p.pgbuttons===!0&&($(".ui-pg-button","#"+h).hover(function(){$(this).hasClass(l)?this.style.cursor="default":($(this).addClass(n),this.style.cursor="pointer")},function(){$(this).hasClass(l)||($(this).removeClass(n),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(b)+", #prev"+$.jgrid.jqID(b)+", #next"+$.jgrid.jqID(b)+", #last"+$.jgrid.jqID(b)).click(function(){if($(this).hasClass(l))return!1;var a=x(d.p.page,1),c=x(d.p.lastpage,1),e=!1,f=!0,g=!0,h=!0,i=!0;return 0===c||1===c?(f=!1,g=!1,h=!1,i=!1):c>1&&a>=1?1===a?(f=!1,g=!1):a===c&&(h=!1,i=!1):c>1&&0===a&&(h=!1,i=!1,a=c-1),u(this.id.split("_")[0],this)?(this.id==="first"+b&&f&&(d.p.page=1,e=!0),this.id==="prev"+b&&g&&(d.p.page=a-1,e=!0),this.id==="next"+b&&h&&(d.p.page=a+1,e=!0),this.id==="last"+b&&i&&(d.p.page=c,e=!0),e&&Q(),!1):!1})),d.p.pginput===!0&&$("#"+h).on("keypress","input.ui-pg-input",function(a){var b=a.charCode||a.keyCode||0;return 13===b?u("user",this)?($(this).val(x($(this).val(),1)),d.p.page=$(this).val()>0?$(this).val():d.p.page,Q(),!1):!1:this})},T=function(a,b){var g,h,i,j,c=d.p.colModel,e=d.p.frozenColumns?b:d.grid.headers[a].el,f="";for($("span.ui-grid-ico-sort",e).addClass(l),$(e).attr("aria-selected","false"),g=c[a].index||c[a].name,c[a].lso?"asc"===c[a].lso?(c[a].lso+="-desc",f="desc"):"desc"===c[a].lso?(c[a].lso+="-asc",f="asc"):("asc-desc"===c[a].lso||"desc-asc"===c[a].lso)&&(c[a].lso=""):c[a].lso=f=c[a].firstsortorder||"asc",f?($("span.s-ico",e).show(),$("span.ui-icon-"+f,e).removeClass(l),$(e).attr("aria-selected","true")):d.p.viewsortcols[0]||$("span.s-ico",e).hide(),h=s.indexOf(g),-1===h?(s.push(g),t.push(f)):f?t[h]=f:(t.splice(h,1),s.splice(h,1)),d.p.sortorder="",d.p.sortname="",i=0,j=s.length;j>i;i++)i>0&&(d.p.sortname+=", "),d.p.sortname+=s[i],i!==j-1&&(d.p.sortname+=" "+t[i]);d.p.sortorder=t[j-1]},U=function(a,b,c,e,f){var j,g,h,i,k;if(d.p.colModel[b].sortable&&!(d.p.savedRow.length>0)){if(c||(d.p.lastsort===b&&""!==d.p.sortname?"asc"===d.p.sortorder?d.p.sortorder="desc":"desc"===d.p.sortorder&&(d.p.sortorder="asc"):d.p.sortorder=d.p.colModel[b].firstsortorder||"asc",d.p.page=1),d.p.multiSort)T(b,f);else{if(e){if(d.p.lastsort===b&&d.p.sortorder===e&&!c)return;d.p.sortorder=e}g=d.grid.headers[d.p.lastsort]?d.grid.headers[d.p.lastsort].el:null,h=d.p.frozenColumns?f:d.grid.headers[b].el,i="single"===d.p.viewsortcols[1]?!0:!1,j=$(g).find("span.ui-grid-ico-sort"),j.addClass(l),i&&$(j).css("display","none"),$(g).attr("aria-selected","false"),d.p.frozenColumns&&(j=d.grid.fhDiv.find("span.ui-grid-ico-sort"),j.addClass(l),i&&j.css("display","none"),d.grid.fhDiv.find("th").attr("aria-selected","false")),j=$(h).find("span.ui-icon-"+d.p.sortorder),j.removeClass(l),i&&j.css("display",""),$(h).attr("aria-selected","true"),d.p.viewsortcols[0]||(d.p.lastsort!==b?(d.p.frozenColumns&&d.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",g).hide(),$("span.s-ico",h).show()):""===d.p.sortname&&$("span.s-ico",h).show()),a=a.substring(5+d.p.id.length+1),d.p.sortname=d.p.colModel[b].index||a}if("stop"===$(d).triggerHandler("jqGridSortCol",[d.p.sortname,b,d.p.sortorder]))return d.p.lastsort=b,void 0;if($.isFunction(d.p.onSortCol)&&"stop"===d.p.onSortCol.call(d,d.p.sortname,b,d.p.sortorder))return d.p.lastsort=b,void 0;"local"===d.p.datatype?d.p.deselectAfterSort&&$(d).jqGrid("resetSelection"):(d.p.selrow=null,d.p.multiselect&&R(!1),d.p.selarrrow=[],d.p.savedRow=[]),d.p.scroll&&(k=d.grid.bDiv.scrollLeft,G.call(d,!0,!1),d.grid.hDiv.scrollLeft=k),d.p.subGrid&&"local"===d.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(d.p.id)).each(function(){$(this).trigger("click")}),d.p._sort=!0,Q(),d.p.lastsort=b,d.p.sortname!==a&&b&&(d.p.lastsort=b)}},V=function(){var f,h,j,l,a=0,b=$.jgrid.cell_width?0:x(d.p.cellLayout,0),c=0,g=x(d.p.scrollOffset,0),i=!1,k=0;$.each(d.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),d.p.grouping&&d.p.autowidth){var e=$.inArray(this.name,d.p.groupingView.groupField);e>=0&&d.p.groupingView.groupColumnShow.length>e&&(this.hidden=!d.p.groupingView.groupColumnShow[e])}this.widthOrg=h=x(this.width,0),this.hidden===!1&&(a+=h+b,this.fixed?k+=h+b:c++)}),isNaN(d.p.width)&&(d.p.width=a+(d.p.shrinkToFit!==!1||isNaN(d.p.height)?0:g)),e.width=d.p.width,d.p.tblwidth=a,d.p.shrinkToFit===!1&&d.p.forceFit===!0&&(d.p.forceFit=!1),d.p.shrinkToFit===!0&&c>0&&(j=e.width-b*c-k,isNaN(d.p.height)||(j-=g,i=!0),a=0,$.each(d.p.colModel,function(e){this.hidden!==!1||this.fixed||(h=Math.round(j*this.width/(d.p.tblwidth-b*c-k)),this.width=h,a+=h,f=e)}),l=0,i?e.width-k-(a+b*c)!==g&&(l=e.width-k-(a+b*c)-g):i||1===Math.abs(e.width-k-(a+b*c))||(l=e.width-k-(a+b*c)),d.p.colModel[f].width+=l,d.p.tblwidth=a+l+b*c+k,d.p.tblwidth>d.p.width&&(d.p.colModel[f].width-=d.p.tblwidth-parseInt(d.p.width,10),d.p.tblwidth=d.p.width))},W=function(a){var e,b=a,c=a;for(e=a+1;e<d.p.colModel.length;e++)if(d.p.colModel[e].hidden!==!0){c=e;break}return c-b},X=function(a){var b=$(d.grid.headers[a].el),c=[b.position().left+b.outerWidth()];return"rtl"===d.p.direction&&(c[0]=d.p.width-c[0]),c[0]-=d.grid.bDiv.scrollLeft,c.push($(d.grid.hDiv).position().top),c.push($(d.grid.bDiv).offset().top-$(d.grid.hDiv).offset().top+$(d.grid.bDiv).height()),c},Y=function(a){var b,c=d.grid.headers,e=$.jgrid.getCellIndex(a);for(b=0;b<c.length;b++)if(a===c[b].el){e=b;break}return e},this.p.id=this.id,-1===$.inArray(d.p.multikey,w)&&(d.p.multikey=!1),d.p.keyName=!1,f=0;f<d.p.colModel.length;f++)Z="string"==typeof d.p.colModel[f].template?null!=$.jgrid.cmTemplate&&"object"==typeof $.jgrid.cmTemplate[d.p.colModel[f].template]?$.jgrid.cmTemplate[d.p.colModel[f].template]:{}:d.p.colModel[f].template,d.p.colModel[f]=$.extend(!0,{},d.p.cmTemplate,Z||{},d.p.colModel[f]),d.p.keyName===!1&&d.p.colModel[f].key===!0&&(d.p.keyName=d.p.colModel[f].name);if(d.p.sortorder=d.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),d.p.grouping===!0&&(d.p.scroll=!1,d.p.rownumbers=!1,d.p.treeGrid=!1,d.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(_){}"local"!==d.p.datatype&&(d.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(d).jqGrid("setSubGrid")}catch(ab){}if(this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?d.p.multiselectWidth+d.p.cellLayout:d.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:d.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),d.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},d.p.xmlReader),d.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},d.p.jsonReader),d.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},d.p.localReader),d.p.scroll&&(d.p.pgbuttons=!1,d.p.pginput=!1,d.p.rowList=[]),d.p.data.length&&(H(),I()),bb="<thead><tr class='ui-jqgrid-labels' role='row'>",gb="",lb="",mb="",d.p.shrinkToFit===!0&&d.p.forceFit===!0)for(f=d.p.colModel.length-1;f>=0;f--)if(!d.p.colModel[f].hidden){d.p.colModel[f].resizable=!1;
break}if("horizontal"===d.p.viewsortcols[1]?(lb=" ui-i-asc",mb=" ui-i-desc"):"single"===d.p.viewsortcols[1]&&(lb=" ui-single-sort-asc",mb=" ui-single-sort-desc",gb=" style='display:none'",d.p.viewsortcols[0]=!1),cb=q?"class='ui-th-div-ie'":"",kb="<span class='s-ico' style='display:none'>",kb+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+lb+" ui-sort-"+i+" "+l+" "+p+" "+j(k,"icon_asc",!0)+"'"+gb+"></span>",kb+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+mb+" ui-sort-"+i+" "+l+" "+p+" "+j(k,"icon_desc",!0)+"'"+gb+"></span></span>",d.p.multiSort&&d.p.sortname)for(s=d.p.sortname.split(","),f=0;f<s.length;f++)u=$.trim(s[f]).split(" "),s[f]=$.trim(u[0]),t[f]=u[1]?$.trim(u[1]):d.p.sortorder||"asc";for(f=0;f<this.p.colNames.length;f++)nb=d.p.headertitles?' title="'+$.jgrid.stripHtml(d.p.colNames[f])+'"':"",bb+="<th id='"+d.p.id+"_"+d.p.colModel[f].name+"' role='columnheader' "+j(k,"headerBox",!1,"ui-th-column ui-th-"+i)+" "+nb+">",db=d.p.colModel[f].index||d.p.colModel[f].name,bb+="<div id='jqgh_"+d.p.id+"_"+d.p.colModel[f].name+"' "+cb+">"+d.p.colNames[f],d.p.colModel[f].width=d.p.colModel[f].width?parseInt(d.p.colModel[f].width,10):150,"boolean"!=typeof d.p.colModel[f].title&&(d.p.colModel[f].title=!0),d.p.colModel[f].lso="",db===d.p.sortname&&(d.p.lastsort=f),d.p.multiSort&&(u=$.inArray(db,s),-1!==u&&(d.p.colModel[f].lso=t[u])),bb+=kb+"</div></th>";if(bb+="</tr></thead>",kb=null,$(this).append(bb),$("thead tr:first th",this).hover(function(){$(this).addClass(n)},function(){$(this).removeClass(n)}),this.p.multiselect&&(ob=[],$("#cb_"+$.jgrid.jqID(d.p.id),this).bind("click",function(){d.p.selarrrow=[];var a=d.p.frozenColumns===!0?d.p.id+"_frozen":"";this.checked?($(d.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(l)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(this.id))[d.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass(m).attr("aria-selected","true"),d.p.selarrrow.push(this.id),d.p.selrow=this.id,a&&($("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(this.id),d.grid.fbDiv)[d.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),d.grid.fbDiv).addClass(m))))}),pb=!0,ob=[]):($(d.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(l)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(this.id))[d.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass(m).attr("aria-selected","false"),ob.push(this.id),a&&($("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(this.id),d.grid.fbDiv)[d.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),d.grid.fbDiv).removeClass(m))))}),d.p.selrow=null,pb=!1),$(d).triggerHandler("jqGridSelectAll",[pb?d.p.selarrrow:ob,pb]),$.isFunction(d.p.onSelectAll)&&d.p.onSelectAll.call(d,pb?d.p.selarrrow:ob,pb)})),d.p.autowidth===!0&&(qb=$(v).innerWidth(),d.p.width=qb>0?qb:"nw"),V(),$(v).css("width",e.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+d.p.id+"'>&#160;</div>"),d.p.scrollPopUp&&$(v).append("<div "+j(k,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+d.p.id+"'></div>"),$(r).css("width",e.width+"px"),bb=$("thead:first",d).get(0),rb="",d.p.footerrow&&(rb+="<table role='presentation' style='width:"+d.p.tblwidth+"px' "+j(k,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+j(k,"footerBox",!1,"footrow footrow-"+i)+">"),sb=$("tr:first",bb),tb="<tr class='jqgfirstrow' role='row'>",d.p.disableClick=!1,$("th",sb).each(function(a){var b,c;eb=d.p.colModel[a].width,void 0===d.p.colModel[a].resizable&&(d.p.colModel[a].resizable=!0),d.p.colModel[a].resizable?(fb=document.createElement("span"),$(fb).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+i).css("cursor","col-resize"),$(this).addClass(d.p.resizeclass)):fb="",$(this).css("width",eb+"px").prepend(fb),fb=null,b="",d.p.colModel[a].hidden&&($(this).css("display","none"),b="display:none;"),tb+="<td role='gridcell' style='height:0px;width:"+eb+"px;"+b+"'></td>",e.headers[a]={width:eb,el:this},gb=d.p.colModel[a].sortable,"boolean"!=typeof gb&&(d.p.colModel[a].sortable=!0,gb=!0),c=d.p.colModel[a].name,"cb"!==c&&"subgrid"!==c&&"rn"!==c&&d.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),gb&&(d.p.multiSort?d.p.viewsortcols[0]?($("div span.s-ico",this).show(),d.p.colModel[a].lso&&$("div span.ui-icon-"+d.p.colModel[a].lso,this).removeClass(l).css("display","")):d.p.colModel[a].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+d.p.colModel[a].lso,this).removeClass(l).css("display","")):d.p.viewsortcols[0]?($("div span.s-ico",this).show(),a===d.p.lastsort&&$("div span.ui-icon-"+d.p.sortorder,this).removeClass(l).css("display","")):a===d.p.lastsort&&""!==d.p.sortname&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+d.p.sortorder,this).removeClass(l).css("display",""))),d.p.footerrow&&(rb+="<td role='gridcell' "+y(a,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(a){if(1===$(a.target).closest("th>span.ui-jqgrid-resize").length){var b=Y(this);return d.p.forceFit===!0&&(d.p.nv=W(b)),e.dragStart(b,a,X(b)),!1}}).click(function(a){var c,e,b,f,g,h;return d.p.disableClick?(d.p.disableClick=!1,!1):(b="th>div.ui-jqgrid-sortable",d.p.viewsortcols[2]||(b="th>div>span>span.ui-grid-ico-sort"),f=$(a.target).closest(b),1===f.length?(d.p.frozenColumns?(h=$(this)[0].id.substring(d.p.id.length+1),$(d.p.colModel).each(function(a){return this.name===h?(g=a,!1):void 0})):g=Y(this),d.p.viewsortcols[2]||(c=!0,e=f.attr("sort")),null!=g&&U($("div",this)[0].id,g,c,e,this),!1):void 0)}),d.p.sortable&&$.fn.sortable)try{$(d).jqGrid("sortableColumns",sb)}catch(ub){}d.p.footerrow&&(rb+="</tr></tbody></table>"),tb+="</tr>",jb=document.createElement("tbody"),this.appendChild(jb),$(this).addClass(j(k,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(tb),tb=null,vb=$("<table "+j(k,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+d.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'></table>").append(bb),wb=d.p.caption&&d.p.hiddengrid===!0?!0:!1,xb=$("<div class='ui-jqgrid-hbox"+("rtl"===i?"-rtl":"")+"'></div>"),bb=null,e.hDiv=document.createElement("div"),e.hDiv.style.width=e.width+"px",e.hDiv.className=j(k,"headerDiv",!0,"ui-jqgrid-hdiv"),$(e.hDiv).append(xb),$(xb).append(vb),vb=null,wb&&$(e.hDiv).hide(),d.p.pager&&("string"==typeof d.p.pager?"#"!==d.p.pager.substr(0,1)&&(d.p.pager="#"+d.p.pager):d.p.pager="#"+$(d.p.pager).attr("id"),$(d.p.pager).css({width:e.width+"px"}).addClass(j(k,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(v),wb&&$(d.p.pager).hide(),S(d.p.pager,"")),d.p.cellEdit===!1&&d.p.hoverrows===!0&&$(d).bind("mouseover",function(a){ib=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(ib).attr("class")&&$(ib).addClass(n)}).bind("mouseout",function(a){ib=$(a.target).closest("tr.jqgrow"),$(ib).removeClass(n)}),$(d).before(e.hDiv).click(function(a){var b,c,e,g,h,i,j,k,n,o;if(hb=a.target,ib=$(hb,d.rows).closest("tr.jqgrow"),0===$(ib).length||ib[0].className.indexOf(l)>-1||($(hb,d).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==d.id)return this;if(b=$(hb).hasClass("cbox"),c=$(d).triggerHandler("jqGridBeforeSelectRow",[ib[0].id,a]),c=c===!1||"stop"===c?!1:!0,$.isFunction(d.p.beforeSelectRow)&&(e=d.p.beforeSelectRow.call(d,ib[0].id,a),(e===!1||"stop"===e)&&(c=!1)),"A"!==hb.tagName&&("INPUT"!==hb.tagName&&"TEXTAREA"!==hb.tagName&&"OPTION"!==hb.tagName&&"SELECT"!==hb.tagName||b))if(yb=ib[0].id,hb=$(hb).closest("tr.jqgrow>td"),hb.length>0&&(zb=$.jgrid.getCellIndex(hb),Ab=$(hb).closest("td,th").html(),$(d).triggerHandler("jqGridCellSelect",[yb,zb,Ab,a]),$.isFunction(d.p.onCellSelect)&&d.p.onCellSelect.call(d,yb,zb,Ab,a)),d.p.cellEdit!==!0){if(c)if(d.p.multikey?a[d.p.multikey]||a["ctrlKey"]?$(d).jqGrid("setSelection",yb,!0,a):d.p.multiselect&&b&&(b=$("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+yb).is(":checked"),$("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+yb)[d.p.useProp?"prop":"attr"]("checked",!b)):d.p.multiselect&&d.p.multiboxonly?b||a["ctrlKey"]?$(d).jqGrid("setSelection",yb,!0,a):(g=d.p.frozenColumns?d.p.id+"_frozen":"",$(d.p.selarrrow).each(function(a,b){var c=$(d).jqGrid("getGridRowById",b);c&&$(c).removeClass(m),$("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(b))[d.p.useProp?"prop":"attr"]("checked",!1),g&&($("#"+$.jgrid.jqID(b),"#"+$.jgrid.jqID(g)).removeClass(m),$("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(b),"#"+$.jgrid.jqID(g))[d.p.useProp?"prop":"attr"]("checked",!1))}),d.p.selarrrow=[],$(d).jqGrid("setSelection",yb,!0,a)):$(d).jqGrid("setSelection",yb,!0,a),h=$("#"+this.id).closest(".ui-jqgrid-bdiv").scrollTop(),selectedScrollArray[this.id]=h,i=$("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+yb).is(":checked"),j=d.id+"+"+yb,i){if(-1==$.inArray(j,selectedIdArray)){for(k=0;k<selectedIdArray.length;k++)n=selectedIdArray[k],"remove"!=n&&(o=n.split("+")[0],o==d.id&&selectedIdArray.remove(n));selectedIdArray.push(j)}}else selectedIdArray.remove(j)}else if(d.p.multiselect&&b&&c)$(d).jqGrid("setSelection",yb,!0,a);else if(hb.length>0)try{$(d).jqGrid("editCell",ib[0].rowIndex,zb,!0)}catch(f){}}).bind("reloadGrid",function(a,b){if(d.p.treeGrid===!0&&(d.p.datatype=d.p.treedatatype),b=b||{},b.current&&d.grid.selectionPreserver(d),"local"===d.p.datatype?($(d).jqGrid("resetSelection"),d.p.data.length&&(H(),I())):d.p.treeGrid||(d.p.selrow=null,d.p.multiselect&&(d.p.selarrrow=[],R(!1)),d.p.savedRow=[]),d.p.scroll&&G.call(d,!0,!1),b.page){var c=b.page;c>d.p.lastpage&&(c=d.p.lastpage),1>c&&(c=1),d.p.page=c,d.grid.bDiv.scrollTop=d.grid.prevRowHeight?(c-1)*d.grid.prevRowHeight*d.p.rowNum:0}return d.grid.prevRowHeight&&d.p.scroll&&void 0===b.page?(delete d.p.lastpage,d.grid.populateVisible()):d.grid.populate(),d.p.inlineNav===!0&&$(d).jqGrid("showAddEditButtons"),!1}).dblclick(function(a){if(hb=a.target,ib=$(hb,d.rows).closest("tr.jqgrow"),0!==$(ib).length){yb=ib[0].rowIndex,zb=$.jgrid.getCellIndex(hb);var b=$(d).triggerHandler("jqGridDblClickRow",[$(ib).attr("id"),yb,zb,a]);return null!=b?b:$.isFunction(d.p.ondblClickRow)&&(b=d.p.ondblClickRow.call(d,$(ib).attr("id"),yb,zb,a),null!=b)?b:void 0}}).bind("contextmenu",function(a){if(hb=a.target,ib=$(hb,d.rows).closest("tr.jqgrow"),0!==$(ib).length){d.p.multiselect||$(d).jqGrid("setSelection",ib[0].id,!0,a),yb=ib[0].rowIndex,zb=$.jgrid.getCellIndex(hb);var b=$(d).triggerHandler("jqGridRightClickRow",[$(ib).attr("id"),yb,zb,a]);return null!=b?b:$.isFunction(d.p.onRightClickRow)&&(b=d.p.onRightClickRow.call(d,$(ib).attr("id"),yb,zb,a),null!=b)?b:void 0}}),e.bDiv=document.createElement("div"),q&&"auto"===String(d.p.height).toLowerCase()&&(d.p.height="100%"),$(e.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:d.p.height+(isNaN(d.p.height)?"":"px"),width:e.width+"px"}).scroll(e.scrollGrid),$("table:first",e.bDiv).css({width:d.p.tblwidth+"px"}),$.support.tbody||2===$("tbody",this).length&&$("tbody:gt(0)",this).remove(),d.p.multikey&&($.jgrid.msie?$(e.bDiv).bind("selectstart",function(){return!1}):$(e.bDiv).bind("mousedown",function(){return!1})),wb&&$(e.bDiv).hide(),Bb=p+" "+j(k,"icon_caption_open",!0),Cb=p+" "+j(k,"icon_caption_close",!0),e.cDiv=document.createElement("div"),Db=d.p.hidegrid===!0?$("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+o+"' title='"+($.jgrid.getRegional(d,"defaults.showhide",d.p.showhide)||"")+"'"+" />").hover(function(){Db.addClass(n)},function(){Db.removeClass(n)}).append("<span class='ui-jqgrid-headlink "+Bb+"'></span>").css("rtl"===i?"left":"right","0px"):"",$(e.cDiv).append(Db).append("<span class='ui-jqgrid-title'>"+d.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===i?"-rtl":"")+" "+j(k,"gridtitleBox",!0)),$(e.cDiv).insertBefore(e.hDiv),d.p.toolbar[0]&&(Eb=j(k,"customtoolbarBox",!0,"ui-userdata"),e.uDiv=document.createElement("div"),"top"===d.p.toolbar[1]?$(e.uDiv).insertBefore(e.hDiv):"bottom"===d.p.toolbar[1]&&$(e.uDiv).insertAfter(e.hDiv),"both"===d.p.toolbar[1]?(e.ubDiv=document.createElement("div"),$(e.uDiv).addClass(Eb+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(e.hDiv).width(e.width),$(e.ubDiv).addClass(Eb+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(e.hDiv).width(e.width),wb&&$(e.ubDiv).hide()):$(e.uDiv).width(e.width).addClass(Eb+" ui-userdata-top").attr("id","t_"+this.id),wb&&$(e.uDiv).hide()),d.p.toppager&&(d.p.toppager=$.jgrid.jqID(d.p.id)+"_toppager",e.topDiv=$("<div id='"+d.p.toppager+"'></div>")[0],d.p.toppager="#"+d.p.toppager,$(e.topDiv).addClass(j(k,"toppagerBox",!0,"ui-jqgrid-toppager")).width(e.width).insertBefore(e.hDiv),S(d.p.toppager,"_t")),d.p.footerrow&&(e.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],xb=$("<div class='ui-jqgrid-hbox"+("rtl"===i?"-rtl":"")+"'></div>"),$(e.sDiv).append(xb).width(e.width).insertAfter(e.hDiv),$(xb).append(rb),e.footers=$(".ui-jqgrid-ftable",e.sDiv)[0].rows[0].cells,d.p.rownumbers&&(e.footers[0].className=j(k,"rownumBox",!0,"jqgrid-rownum")),wb&&$(e.sDiv).hide()),xb=null,d.p.caption?(Fb=d.p.datatype,d.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",e.cDiv).click(function(a){var f,b=$.isFunction(d.p.onHeaderClick),c=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",g=this;return d.p.toolbar[0]===!0&&("both"===d.p.toolbar[1]&&(c+=", #"+$(e.ubDiv).attr("id")),c+=", #"+$(e.uDiv).attr("id")),f=$(c,"#gview_"+$.jgrid.jqID(d.p.id)).length,"visible"===d.p.gridstate?$(c,"#gbox_"+$.jgrid.jqID(d.p.id)).slideUp("fast",function(){f--,0===f&&($("span",g).removeClass(Bb).addClass(Cb),d.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(d.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(d.p.id)).hide(),$(d).triggerHandler("jqGridHeaderClick",[d.p.gridstate,a]),b&&(wb||d.p.onHeaderClick.call(d,d.p.gridstate,a)))}):"hidden"===d.p.gridstate&&$(c,"#gbox_"+$.jgrid.jqID(d.p.id)).slideDown("fast",function(){f--,0===f&&($("span",g).removeClass(Cb).addClass(Bb),wb&&(d.p.datatype=Fb,Q(),wb=!1),d.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(d.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(d.p.id)).show(),$(d).triggerHandler("jqGridHeaderClick",[d.p.gridstate,a]),b&&(wb||d.p.onHeaderClick.call(d,d.p.gridstate,a)))}),!1}),wb&&(d.p.datatype="local",$(".ui-jqgrid-titlebar-close",e.cDiv).trigger("click")))):($(e.cDiv).hide(),d.p.toppager||$(e.hDiv).addClass(j(d.p.styleUI+".common","cornertop",!0))),$(e.hDiv).after(e.bDiv).mousemove(function(a){return e.resizing?(e.dragMove(a),!1):void 0}),$(".ui-jqgrid-labels",e.hDiv).bind("selectstart",function(){return!1}),$(document).bind("mouseup.jqGrid"+d.p.id,function(){return e.resizing?(e.dragEnd(!0),!1):!0}),d.formatCol=y,d.sortData=U,d.updatepager=N,d.refreshIndex=I,d.setHeadCheckBox=R,d.constructTr=J,d.formatter=function(a,b,c,d,e){return A(a,b,c,d,e)},$.extend(e,{populate:Q,emptyRows:G,beginReq:O,endReq:P}),this.grid=e,d.addXmlData=function(a){K(a)},d.addJSONData=function(a){L(a)},this.grid.cols=this.rows[0].cells,$(d).triggerHandler("jqGridInitGrid"),$.isFunction(d.p.onInitGrid)&&d.p.onInitGrid.call(d),Q(),d.p.hiddengrid=!1,d.p.responsive&&(Gb="onorientationchange"in window,Hb=Gb?"orientationchange":"resize",$(window).on(Hb,function(){$(d).jqGrid("resizeGrid")}))}})},$.jgrid.extend({getGridParam:function(a,b){var d,c=this[0];if(c&&c.grid){if(void 0===b&&"string"!=typeof b&&(b="jqGrid"),d=c.p,"jqGrid"!==b)try{d=$(c).data(b)}catch(e){d=c.p}return a?void 0!==d[a]?d[a]:null:d}},setGridParam:function(a,b){return this.each(function(){if(null==b&&(b=!1),this.grid&&"object"==typeof a)if(b===!0){var c=$.extend({},this.p,a);this.p=c}else $.extend(!0,this.p,a)})},getGridRowById:function(a){var b;return this.each(function(){try{for(var c=this.rows.length;c--;)if(a.toString()===this.rows[c].id){b=this.rows[c];break}}catch(d){b=$(this.grid.bDiv).find("#"+$.jgrid.jqID(a))}}),b},getDataIDs:function(){var c,a=[],b=0,d=0;return this.each(function(){if(c=this.rows.length,c&&c>0)for(;c>b;)$(this.rows[b]).hasClass("jqgrow")&&(a[d]=this.rows[b].id,d++),b++}),a},setSelection:function(a,b,c){return this.each(function(){function o(a){var b=$(d.grid.bDiv)[0].clientHeight,c=$(d.grid.bDiv)[0].scrollTop,e=$(d.rows[a]).position().top,f=d.rows[a].clientHeight;e+f>=b+c?$(d.grid.bDiv)[0].scrollTop=e-(b+c)+f+c:b+c>e&&c>e&&($(d.grid.bDiv)[0].scrollTop=e)}var e,f,g,h,i,j,k,d=this,l=$.jgrid.getMethod("getStyleUI"),m=l(d.p.styleUI+".common","highlight",!0),n=l(d.p.styleUI+".common","disabled",!0);void 0!==a&&(b=b===!1?!1:!0,f=$(d).jqGrid("getGridRowById",a),!f||!f.className||f.className.indexOf(n)>-1||(d.p.scrollrows===!0&&(g=$(d).jqGrid("getGridRowById",a).rowIndex,g>=0&&o(g)),d.p.frozenColumns===!0&&(j=d.p.id+"_frozen"),d.p.multiselect?(d.setHeadCheckBox(!1),d.p.selrow=f.id,h=$.inArray(d.p.selrow,d.p.selarrrow),-1===h?("ui-subgrid"!==f.className&&$(f).addClass(m).attr("aria-selected","true"),e=!0,d.p.selarrrow.push(d.p.selrow)):("ui-subgrid"!==f.className&&$(f).removeClass(m).attr("aria-selected","false"),e=!1,d.p.selarrrow.splice(h,1),i=d.p.selarrrow[0],d.p.selrow=void 0===i?null:i),$("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(f.id))[d.p.useProp?"prop":"attr"]("checked",e),j&&(-1===h?$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).addClass(m):$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).removeClass(m),$("#jqg_"+$.jgrid.jqID(d.p.id)+"_"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j))[d.p.useProp?"prop":"attr"]("checked",e)),b&&($(d).triggerHandler("jqGridSelectRow",[f.id,e,c]),d.p.onSelectRow&&d.p.onSelectRow.call(d,f.id,e,c))):"ui-subgrid"!==f.className&&(d.p.selrow!==f.id?(k=$(d).jqGrid("getGridRowById",d.p.selrow),k&&$(k).removeClass(m).attr({"aria-selected":"false",tabindex:"-1"}),$(f).addClass(m).attr({"aria-selected":"true",tabindex:"0"}),j&&($("#"+$.jgrid.jqID(d.p.selrow),"#"+$.jgrid.jqID(j)).removeClass(m),$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).addClass(m)),e=!0):e=!1,d.p.selrow=f.id,b&&($(d).triggerHandler("jqGridSelectRow",[f.id,e,c]),d.p.onSelectRow&&d.p.onSelectRow.call(d,f.id,e,c)))))})},resetSelection:function(a){return this.each(function(){var c,d,h,b=this,e=$.jgrid.getMethod("getStyleUI"),f=e(b.p.styleUI+".common","highlight",!0),g=e(b.p.styleUI+".common","hover",!0);b.p.frozenColumns===!0&&(d=b.p.id+"_frozen"),void 0!==a?(c=a===b.p.selrow?b.p.selrow:a,$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr#"+$.jgrid.jqID(c)).removeClass(f).attr("aria-selected","false"),d&&$("#"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d)).removeClass(f),b.p.multiselect&&($("#jqg_"+$.jgrid.jqID(b.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(b.p.id))[b.p.useProp?"prop":"attr"]("checked",!1),d&&$("#jqg_"+$.jgrid.jqID(b.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d))[b.p.useProp?"prop":"attr"]("checked",!1),b.setHeadCheckBox(!1),h=$.inArray($.jgrid.jqID(c),b.p.selarrrow),-1!==h&&b.p.selarrrow.splice(h,1)),b.p.onUnSelectRow&&b.p.onUnSelectRow.call(b,c),c=null):b.p.multiselect?($(b.p.selarrrow).each(function(a,c){$($(b).jqGrid("getGridRowById",c)).removeClass(f).attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(b.p.id)+"_"+$.jgrid.jqID(c))[b.p.useProp?"prop":"attr"]("checked",!1),d&&($("#"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d)).removeClass(f),$("#jqg_"+$.jgrid.jqID(b.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d))[b.p.useProp?"prop":"attr"]("checked",!1)),b.p.onUnSelectRow&&b.p.onUnSelectRow.call(b,c)}),b.setHeadCheckBox(!1),b.p.selarrrow=[],b.p.selrow=null):b.p.selrow&&($("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr#"+$.jgrid.jqID(b.p.selrow)).removeClass(f).attr("aria-selected","false"),d&&$("#"+$.jgrid.jqID(b.p.selrow),"#"+$.jgrid.jqID(d)).removeClass(f),b.p.onUnSelectRow&&b.p.onUnSelectRow.call(b,b.p.selrow),b.p.selrow=null),b.p.cellEdit===!0&&parseInt(b.p.iCol,10)>=0&&parseInt(b.p.iRow,10)>=0&&($("td:eq("+b.p.iCol+")",b.rows[b.p.iRow]).removeClass("edit-cell "+f),$(b.rows[b.p.iRow]).removeClass("selected-row "+g)),b.p.savedRow=[]})},getRowData:function(a,b){var d,f,c={},e=!1,g=0;return this.each(function(){var i,j,h=this;if(null==a)e=!0,d=[],f=h.rows.length;else{if(j=$(h).jqGrid("getGridRowById",a),!j)return c;f=2}for(b&&b===!0&&h.p.data.length>0||(b=!1);f>g;)e&&(j=h.rows[g]),$(j).hasClass("jqgrow")&&(b?c=h.p.data[h.p._index[j.id]]:$('td[role="gridcell"]',j).each(function(a){if(i=h.p.colModel[a].name,"cb"!==i&&"subgrid"!==i&&"rn"!==i)if(h.p.treeGrid===!0&&i===h.p.ExpandColumn)c[i]=$.jgrid.htmlDecode($("span:first",this).html());else try{c[i]=$.unformat.call(h,this,{rowId:j.id,colModel:h.p.colModel[a]},a)}catch(b){c[i]=$.jgrid.htmlDecode($(this).html())}}),e&&(d.push(c),c={})),g++}),d||c},delRowData:function(a){var c,d,e,b=!1;return this.each(function(){var g,h,i,f=this;return(c=$(f).jqGrid("getGridRowById",a))?(f.p.subGrid&&(e=$(c).next(),e.hasClass("ui-subgrid")&&e.remove()),$(c).remove(),f.p.records--,f.p.reccount--,f.updatepager(!0,!1),b=!0,f.p.multiselect&&(d=$.inArray(a,f.p.selarrrow),-1!==d&&f.p.selarrrow.splice(d,1)),f.p.multiselect&&f.p.selarrrow.length>0?f.p.selrow=f.p.selarrrow[f.p.selarrrow.length-1]:f.p.selrow===a&&(f.p.selrow=null),"local"===f.p.datatype&&(g=$.jgrid.stripPref(f.p.idPrefix,a),h=f.p._index[g],void 0!==h&&(f.p.data.splice(h,1),f.refreshIndex())),f.p.altRows===!0&&b&&(i=f.p.altclass,$(f.rows).each(function(a){1===a%2?$(this).addClass(i):$(this).removeClass(i)})),void 0):!1}),b},setRowData:function(a,b,c){var d,f,e=!0;return this.each(function(){var h,i,g,j,k,n,l,m;if(!this.grid)return!1;if(g=this,j=typeof c,k={},i=$(this).jqGrid("getGridRowById",a),!i)return!1;if(b)try{if($(this.p.colModel).each(function(c){d=this.name;var e=$.jgrid.getAccessor(b,d);void 0!==e&&(k[d]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?$.unformat.date.call(g,e,this):e,h=g.formatter(a,k[d],c,b,"edit"),f=this.title?{title:$.jgrid.stripHtml(h)}:{},g.p.treeGrid===!0&&d===g.p.ExpandColumn?$("td[role='gridcell']:eq("+c+") > span:first",i).html(h).attr(f):$("td[role='gridcell']:eq("+c+")",i).html(h).attr(f))}),"local"===g.p.datatype){if(l=$.jgrid.stripPref(g.p.idPrefix,a),m=g.p._index[l],g.p.treeGrid)for(n in g.p.treeReader)g.p.treeReader.hasOwnProperty(n)&&delete k[g.p.treeReader[n]];void 0!==m&&(g.p.data[m]=$.extend(!0,g.p.data[m],k)),k=null}}catch(o){e=!1}e&&("string"===j?$(i).addClass(c):null!==c&&"object"===j&&$(i).css(c),$(g).triggerHandler("jqGridAfterGridComplete"))}),e},addRowData:function(a,b,c,d){-1===$.inArray(c,["first","last","before","after"])&&(c="last");var f,g,j,k,l,m,n,o,q,r,s,t,u,v,e=!1,h="",i="",p="";return b&&($.isArray(b)?(q=!0,r=a):(b=[b],q=!1),this.each(function(){var B,y,z,A,C,w=this,x=b.length;for(l=w.p.rownumbers===!0?1:0,j=w.p.multiselect===!0?1:0,k=w.p.subGrid===!0?1:0,q||(void 0!==a?a=String(a):(a=$.jgrid.randId(),w.p.keyName!==!1&&(r=w.p.keyName,void 0!==b[0][r]&&(a=b[0][r])))),s=w.p.altclass,y=0,z=$(w).jqGrid("getStyleUI",w.p.styleUI+".base","rowBox",!0,"jqgrow ui-row-"+w.p.direction),A={},C=$.isFunction(w.p.afterInsertRow)?!0:!1,l&&(h=$(w).jqGrid("getStyleUI",w.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum")),j&&(i=$(w).jqGrid("getStyleUI",w.p.styleUI+".base","multiBox",!1,"cbox"));x>y;){if(t=b[y],g=[],B=z,q){try{a=t[r],void 0===a&&(a=$.jgrid.randId())}catch(D){a=$.jgrid.randId()}B+=w.p.altRows===!0?0===(w.rows.length-1)%2?" "+s:"":""}for(v=a,a=w.p.idPrefix+a,l&&(p=w.formatCol(0,1,"",null,a,!0),g[g.length]='<td role="gridcell" '+h+" "+p+">0</td>"),j&&(o='<input role="checkbox" type="checkbox" id="jqg_'+w.p.id+"_"+a+'" '+i+"/>",p=w.formatCol(l,1,"",null,a,!0),g[g.length]='<td role="gridcell" '+p+">"+o+"</td>"),k&&(g[g.length]=$(w).jqGrid("addSubGridCell",j+l,1)),n=j+k+l;n<w.p.colModel.length;n++)u=w.p.colModel[n],f=u.name,A[f]=t[f],o=w.formatter(a,$.jgrid.getAccessor(t,f),n,t),p=w.formatCol(n,1,o,t,a,A),g[g.length]='<td role="gridcell" '+p+">"+o+"</td>";if(g.unshift(w.constructTr(a,!1,B,A,t)),g[g.length]="</tr>",0===w.rows.length)$("table:first",w.grid.bDiv).append(g.join(""));else switch(c){case"last":$(w.rows[w.rows.length-1]).after(g.join("")),m=w.rows.length-1;break;case"first":$(w.rows[0]).after(g.join("")),m=1;break;case"after":m=$(w).jqGrid("getGridRowById",d),m&&($(w.rows[m.rowIndex+1]).hasClass("ui-subgrid")?$(w.rows[m.rowIndex+1]).after(g):$(m).after(g.join("")),m=m.rowIndex+1);break;case"before":m=$(w).jqGrid("getGridRowById",d),m&&($(m).before(g.join("")),m=m.rowIndex-1)}w.p.subGrid===!0&&$(w).jqGrid("addSubGrid",j+l,m),w.p.records++,w.p.reccount++,$(w).triggerHandler("jqGridAfterInsertRow",[a,t,t]),C&&w.p.afterInsertRow.call(w,a,t,t),y++,"local"===w.p.datatype&&(A[w.p.localReader.id]=v,w.p._index[v]=w.p.data.length,w.p.data.push(A),A={})}w.p.altRows!==!0||q||("last"===c?0===(w.rows.length-1)%2&&$(w.rows[w.rows.length-1]).addClass(s):$(w.rows).each(function(a){0===a%2?$(this).addClass(s):$(this).removeClass(s)})),w.updatepager(!0,!0),e=!0})),e},footerData:function(a,b,c){function h(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}var d,g,e=!1,f={};return void 0===a&&(a="get"),"boolean"!=typeof c&&(c=!0),a=a.toLowerCase(),this.each(function(){var j,i=this;return i.grid&&i.p.footerrow?"set"===a&&h(b)?!1:(e=!0,$(this.p.colModel).each(function(h){d=this.name,"set"===a?void 0!==b[d]&&(j=c?i.formatter("",b[d],h,b,"edit"):b[d],g=this.title?{title:$.jgrid.stripHtml(j)}:{},$("tr.footrow td:eq("+h+")",i.grid.sDiv).html(j).attr(g),e=!0):"get"===a&&(f[d]=$("tr.footrow td:eq("+h+")",i.grid.sDiv).html())}),void 0):!1}),"get"===a?f:e},showHideCol:function(a,b){return this.each(function(){var f,g,h,i,j,c=this,d=!1,e=$.jgrid.cell_width?0:c.p.cellLayout;if(c.grid&&("string"==typeof a&&(a=[a]),b="none"!==b?"":"none",g=""===b?!0:!1,h=c.p.groupHeader&&($.isArray(c.p.groupHeader)||$.isFunction(c.p.groupHeader)),h&&$(c).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(h){if(-1!==$.inArray(this.name,a)&&this.hidden===g){if(c.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr[role=row]",c.grid.hDiv).each(function(){$(this.cells[h]).css("display",b)}),$(c.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[h]).css("display",b)}),c.p.footerrow&&$("tr.footrow td:eq("+h+")",c.grid.sDiv).css("display",b),f=parseInt(this.width,10),"none"===b?c.p.tblwidth-=f+e:c.p.tblwidth+=f+e,this.hidden=!g,d=!0,$(c).triggerHandler("jqGridShowHideCol",[g,this.name,h])}}),d===!0&&(c.p.shrinkToFit!==!0||isNaN(c.p.height)||(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),$(c).jqGrid("setGridWidth",c.p.shrinkToFit===!0?c.p.tblwidth:c.p.width)),h))for(i=$.extend([],c.p.groupHeader),c.p.groupHeader=null,j=0;j<i.length;j++)$(c).jqGrid("setGroupHeaders",i[j])})},hideCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"none")})},showCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"")})},remapColumns:function(a,b,c){function d(b){var c;c=b.length?$.makeArray(b):$.extend({},b),$.each(a,function(a){b[a]=c[this]})}function f(b,c){$(">tr"+(c||""),b).each(function(){var b=this,c=$.makeArray(b.cells);$.each(a,function(){var a=c[this];a&&b.appendChild(a)})})}var e=this.get(0);d(e.p.colModel),d(e.p.colNames),d(e.grid.headers),f($("thead:first",e.grid.hDiv),c&&":not(.ui-jqgrid-labels)"),b&&f($("#"+$.jgrid.jqID(e.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),e.p.footerrow&&f($("tbody:first",e.grid.sDiv)),e.p.remapColumns&&(e.p.remapColumns.length?d(e.p.remapColumns):e.p.remapColumns=$.makeArray(a)),e.p.lastsort=$.inArray(e.p.lastsort,a),e.p.treeGrid&&(e.p.expColInd=$.inArray(e.p.expColInd,a)),$(e).triggerHandler("jqGridRemapColumns",[a,b,c])},setGridWidth:function(a,b){return this.each(function(){var d,g,k,m,c,e,f,h,i,j,l,n,o;if(this.grid&&(c=this,e=0,f=$.jgrid.cell_width?0:c.p.cellLayout,h=0,i=!1,j=c.p.scrollOffset,l=0,"boolean"!=typeof b&&(b=c.p.shrinkToFit),!isNaN(a))){if(a=parseInt(a,10),c.grid.width=c.p.width=a,$("#gbox_"+$.jgrid.jqID(c.p.id)).css("width",a+"px"),$("#gview_"+$.jgrid.jqID(c.p.id)).css("width",a+"px"),$(c.grid.bDiv).css("width",a+"px"),$(c.grid.hDiv).css("width",a+"px"),c.p.pager&&$(c.p.pager).css("width",a+"px"),c.p.toppager&&$(c.p.toppager).css("width",a+"px"),c.p.toolbar[0]===!0&&($(c.grid.uDiv).css("width",a+"px"),"both"===c.p.toolbar[1]&&$(c.grid.ubDiv).css("width",a+"px")),c.p.footerrow&&$(c.grid.sDiv).css("width",a+"px"),b===!1&&c.p.forceFit===!0&&(c.p.forceFit=!1),b===!0){if($.each(c.p.colModel,function(){this.hidden===!1&&(d=this.widthOrg,e+=d+f,this.fixed?l+=d+f:h++)}),0===h)return;if(c.p.tblwidth=e,k=a-f*h-l,isNaN(c.p.height)||($(c.grid.bDiv)[0].clientHeight<$(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)&&(i=!0,k-=j),e=0,n=c.grid.cols.length>0,$.each(c.p.colModel,function(a){if(this.hidden===!1&&!this.fixed){if(d=this.widthOrg,d=Math.round(k*d/(c.p.tblwidth-f*h-l)),0>d)return;this.width=d,e+=d,c.grid.headers[a].width=d,c.grid.headers[a].el.style.width=d+"px",c.p.footerrow&&(c.grid.footers[a].style.width=d+"px"),n&&(c.grid.cols[a].style.width=d+"px"),g=a}}),!g)return;m=0,i?a-l-(e+f*h)!==j&&(m=a-l-(e+f*h)-j):1!==Math.abs(a-l-(e+f*h))&&(m=a-l-(e+f*h)),c.p.colModel[g].width+=m,c.p.tblwidth=e+m+f*h+l,c.p.tblwidth>a?(o=c.p.tblwidth-parseInt(a,10),c.p.tblwidth=a,d=c.p.colModel[g].width=c.p.colModel[g].width-o):d=c.p.colModel[g].width,c.grid.headers[g].width=d,c.grid.headers[g].el.style.width=d+"px",n&&(c.grid.cols[g].style.width=d+"px"),c.p.footerrow&&(c.grid.footers[g].style.width=d+"px")}c.p.tblwidth&&($("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),$("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&$("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}})},setGridHeight:function(a){return this.each(function(){var c,b=this;b.grid&&(c=$(b.grid.bDiv),c.css({height:a+(isNaN(a)?"":"px")}),b.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(b.p.id)+"_frozen").parent().height(c.height()-16),b.p.height=a,b.p.scroll&&b.grid.populateVisible())})},setCaption:function(a){return this.each(function(){var b=$(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=a,$(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(a),$(this.grid.cDiv).show(),$(this.grid.hDiv).removeClass(b)})},setLabel:function(a,b,c,d){return this.each(function(){var g,h,e=this,f=-1;e.grid&&void 0!==a&&($(e.p.colModel).each(function(b){return this.name===a?(f=b,!1):void 0}),f>=0&&(g=$("tr.ui-jqgrid-labels th:eq("+f+")",e.grid.hDiv),b&&(h=$(".s-ico",g),$("[id^=jqgh_]",g).empty().html(b).append(h),e.p.colNames[f]=b),c&&("string"==typeof c?$(g).addClass(c):$(g).css(c)),"object"==typeof d&&$(g).attr(d)))})},setCell:function(a,b,c,d,e,f){return this.each(function(){var i,j,k,l,m,n,p,o,g=this,h=-1;if(g.grid&&(isNaN(b)?$(g.p.colModel).each(function(a){return this.name===b?(h=a,!1):void 0}):h=parseInt(b,10),h>=0&&(k=$(g).jqGrid("getGridRowById",a)))){if(l=$("td:eq("+h+")",k),m=0,n=[],""!==c||f===!0){if(void 0!==k.cells)for(;m<k.cells.length;)n.push(k.cells[m].innerHTML),m++;i=g.formatter(a,c,h,n,"edit"),j=g.p.colModel[h].title?{title:$.jgrid.stripHtml(i)}:{},g.p.treeGrid&&$(".tree-wrap",$(l)).length>0?$("span",$(l)).html(i).attr(j):$(l).html(i).attr(j),"local"===g.p.datatype&&(o=g.p.colModel[h],c=o.formatter&&"string"==typeof o.formatter&&"date"===o.formatter?$.unformat.date.call(g,c,o):c,p=g.p._index[$.jgrid.stripPref(g.p.idPrefix,a)],void 0!==p&&(g.p.data[p][o.name]=c))}"string"==typeof d?$(l).addClass(d):d&&$(l).css(d),"object"==typeof e&&$(l).attr(e)}})},getCell:function(a,b){var c=!1;return this.each(function(){var f,d=this,e=-1;if(d.grid&&(isNaN(b)?$(d.p.colModel).each(function(a){return this.name===b?(e=a,!1):void 0}):e=parseInt(b,10),e>=0&&(f=$(d).jqGrid("getGridRowById",a))))try{c=$.unformat.call(d,$("td:eq("+e+")",f),{rowId:f.id,colModel:d.p.colModel[e]},e)}catch(g){c=$.jgrid.htmlDecode($("td:eq("+e+")",f).html())}}),c},getCol:function(a,b,c){var e,g,h,i,d=[],f=0;return b="boolean"!=typeof b?!1:b,void 0===c&&(c=!1),this.each(function(){var l,m,n,j=this,k=-1;if(j.grid&&(isNaN(a)?$(j.p.colModel).each(function(b){return this.name===a?(k=b,!1):void 0}):k=parseInt(a,10),k>=0&&(l=j.rows.length,m=0,n=0,l&&l>0))){for(;l>m;){if($(j.rows[m]).hasClass("jqgrow")){try{e=$.unformat.call(j,$(j.rows[m].cells[k]),{rowId:j.rows[m].id,colModel:j.p.colModel[k]},k)
}catch(o){e=$.jgrid.htmlDecode(j.rows[m].cells[k].innerHTML)}c?(i=parseFloat(e),isNaN(i)||(f+=i,void 0===h&&(h=g=i),g=Math.min(g,i),h=Math.max(h,i),n++)):b?d.push({id:j.rows[m].id,value:e}):d.push(e)}m++}if(c)switch(c.toLowerCase()){case"sum":d=f;break;case"avg":d=f/n;break;case"count":d=l-1;break;case"min":d=g;break;case"max":d=h}}}),d},clearGridData:function(a){return this.each(function(){var c,b=this;b.grid&&("boolean"!=typeof a&&(a=!1),b.p.deepempty?$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:gt(0)").remove():(c=$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:first")[0],$("#"+$.jgrid.jqID(b.p.id)+" tbody:first").empty().append(c)),b.p.footerrow&&a&&$(".ui-jqgrid-ftable td",b.grid.sDiv).html("&#160;"),b.p.selrow=null,b.p.selarrrow=[],b.p.savedRow=[],b.p.records=0,b.p.page=1,b.p.lastpage=0,b.p.reccount=0,b.p.data=[],b.p._index={},b.updatepager(!0,!1))})},getInd:function(a,b){var d,c=!1;return this.each(function(){d=$(this).jqGrid("getGridRowById",a),d&&(c=b===!0?d:d.rowIndex)}),c},bindKeys:function(a){var b=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},a||{});return this.each(function(){var a=this;$("body").is("[role]")||$("body").attr("role","application"),a.p.scrollrows=b.scrollingRows,$(a).keydown(function(c){var e,f,g,d=$(a).find("tr[tabindex=0]")[0],h=a.p.treeReader.expanded_field;if(d)if(g=a.p._index[$.jgrid.stripPref(a.p.idPrefix,d.id)],37===c.keyCode||38===c.keyCode||39===c.keyCode||40===c.keyCode){if(38===c.keyCode){if(f=d.previousSibling,e="",f)if($(f).is(":hidden")){for(;f;)if(f=f.previousSibling,!$(f).is(":hidden")&&$(f).hasClass("jqgrow")){e=f.id;break}}else e=f.id;$(a).jqGrid("setSelection",e,!0,c),c.preventDefault()}if(40===c.keyCode){if(f=d.nextSibling,e="",f)if($(f).is(":hidden")){for(;f;)if(f=f.nextSibling,!$(f).is(":hidden")&&$(f).hasClass("jqgrow")){e=f.id;break}}else e=f.id;$(a).jqGrid("setSelection",e,!0,c),c.preventDefault()}37===c.keyCode&&(a.p.treeGrid&&a.p.data[g][h]&&$(d).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyLeft",[a.p.selrow]),$.isFunction(b.onLeftKey)&&b.onLeftKey.call(a,a.p.selrow)),39===c.keyCode&&(a.p.treeGrid&&!a.p.data[g][h]&&$(d).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyRight",[a.p.selrow]),$.isFunction(b.onRightKey)&&b.onRightKey.call(a,a.p.selrow))}else 13===c.keyCode?($(a).triggerHandler("jqGridKeyEnter",[a.p.selrow]),$.isFunction(b.onEnter)&&b.onEnter.call(a,a.p.selrow)):32===c.keyCode&&($(a).triggerHandler("jqGridKeySpace",[a.p.selrow]),$.isFunction(b.onSpace)&&b.onSpace.call(a,a.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(a){var c,b=!1;return this.each(function(){void 0!==a&&(c=this.p._index[$.jgrid.stripPref(this.p.idPrefix,a)],c>=0&&(b=this.p.data[c]))}),b},progressBar:function(a){return a=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},a||{}),this.each(function(){var d,e,b="show"===a.method?!0:!1,c=$("#load_"+$.jgrid.jqID(this.p.id)),f=$(window).scrollTop();switch(""!==a.htmlcontent&&c.html(a.htmlcontent),a.loadtype){case"disable":break;case"enable":c.toggle(b);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(b),c.toggle(b)}c.is(":visible")&&(d=c.offsetParent(),c.css("top",""),c.offset().top<f&&(e=Math.min(10+f-d.offset().top,d.height()-c.height()),c.css("top",e+"px")))})},getColProp:function(a){var e,d,b={},c=this[0];if(!c.grid)return!1;for(d=c.p.colModel,e=0;e<d.length;e++)if(d[e].name===a){b=d[e];break}return b},setColProp:function(a,b){return this.each(function(){if(this.grid&&b){var d,c=this.p.colModel;for(d=0;d<c.length;d++)if(c[d].name===a){$.extend(!0,this.p.colModel[d],b);break}}})},sortGrid:function(a,b,c){return this.each(function(){var f,h,d=this,e=-1,g=!1;if(d.grid){for(a||(a=d.p.sortname),f=0;f<d.p.colModel.length;f++)if(d.p.colModel[f].index===a||d.p.colModel[f].name===a){e=f,d.p.frozenColumns===!0&&d.p.colModel[f].frozen===!0&&(g=d.grid.fhDiv.find("#"+d.p.id+"_"+a));break}-1!==e&&(h=d.p.colModel[e].sortable,g||(g=d.grid.headers[e].el),"boolean"!=typeof h&&(h=!0),"boolean"!=typeof b&&(b=!1),h&&d.sortData("jqgh_"+d.p.id+"_"+a,e,b,c,g))}})},setGridState:function(a){return this.each(function(){if(this.grid){var b=this,c=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),d=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);"hidden"===a?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(b.p.id)).slideUp("fast"),b.p.pager&&$(b.p.pager).slideUp("fast"),b.p.toppager&&$(b.p.toppager).slideUp("fast"),b.p.toolbar[0]===!0&&("both"===b.p.toolbar[1]&&$(b.grid.ubDiv).slideUp("fast"),$(b.grid.uDiv).slideUp("fast")),b.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(b.p.id)).slideUp("fast"),$(".ui-jqgrid-headlink",b.grid.cDiv).removeClass(c).addClass(d),b.p.gridstate="hidden"):"visible"===a&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(b.p.id)).slideDown("fast"),b.p.pager&&$(b.p.pager).slideDown("fast"),b.p.toppager&&$(b.p.toppager).slideDown("fast"),b.p.toolbar[0]===!0&&("both"===b.p.toolbar[1]&&$(b.grid.ubDiv).slideDown("fast"),$(b.grid.uDiv).slideDown("fast")),b.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(b.p.id)).slideDown("fast"),$(".ui-jqgrid-headlink",b.grid.cDiv).removeClass(d).addClass(c),b.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){var a,b,c,d,e,f,g,h,i,j,k,n,o,l,m,p,q;if(this.grid&&(a=this,b=a.p.colModel,c=0,d=b.length,e=-1,f=!1,g=$(a).jqGrid("getStyleUI",a.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),h=$(a).jqGrid("getStyleUI",a.p.styleUI+".common","hover",!0),a.p.subGrid!==!0&&a.p.treeGrid!==!0&&a.p.cellEdit!==!0&&!a.p.sortable&&!a.p.scroll)){for(a.p.rownumbers&&c++,a.p.multiselect&&c++;d>c&&b[c].frozen===!0;)f=!0,e=c,c++;e>=0&&f&&(i=a.p.caption?$(a.grid.cDiv).outerHeight():0,j=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(a.p.id)).height(),a.p.toppager&&(i+=$(a.grid.topDiv).outerHeight()),a.p.toolbar[0]===!0&&"bottom"!==a.p.toolbar[1]&&(i+=$(a.grid.uDiv).outerHeight()),a.grid.fhDiv=$('<div style="position:absolute;'+("rtl"===a.p.direction?"right:0;":"left:0;")+"top:"+i+"px;height:"+j+'px;" class="frozen-div '+g+'"></div>'),a.grid.fbDiv=$('<div style="position:absolute;'+("rtl"===a.p.direction?"right:0;":"left:0;")+"top:"+(parseInt(i,10)+parseInt(j,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),$("#gview_"+$.jgrid.jqID(a.p.id)).append(a.grid.fhDiv),k=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(a.p.id)).clone(!0),a.p.groupHeader?($("tr.jqg-first-row-header, tr.jqg-third-row-header",k).each(function(){$("th:gt("+e+")",this).remove()}),l=-1,m=-1,$("tr.jqg-second-row-header th",k).each(function(){return n=parseInt($(this).attr("colspan"),10),o=parseInt($(this).attr("rowspan"),10),o&&(l++,m++),n&&(l+=n,m++),l===e?(m=e,!1):void 0}),l!==e&&(m=e),$("tr.jqg-second-row-header",k).each(function(){$("th:gt("+m+")",this).remove()})):$("tr",k).each(function(){$("th:gt("+e+")",this).remove()}),$(k).width(1),$(a.grid.fhDiv).append(k).mousemove(function(b){return a.grid.resizing?(a.grid.dragMove(b),!1):void 0}),a.p.footerrow&&(p=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(a.p.id)).height(),a.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(i,10)+parseInt(j,10)+parseInt(p,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),$("#gview_"+$.jgrid.jqID(a.p.id)).append(a.grid.fsDiv),q=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID(a.p.id)).clone(!0),$("tr",q).each(function(){$("td:gt("+e+")",this).remove()}),$(q).width(1),$(a.grid.fsDiv).append(q)),$(a).bind("jqGridResizeStop.setFrozenColumns",function(b,c,d){var f,g,e=$(".ui-jqgrid-htable",a.grid.fhDiv);$("th:eq("+d+")",e).width(c),f=$(".ui-jqgrid-btable",a.grid.fbDiv),$("tr:first td:eq("+d+")",f).width(c),a.p.footerrow&&(g=$(".ui-jqgrid-ftable",a.grid.fsDiv),$("tr:first td:eq("+d+")",g).width(c))}),$("#gview_"+$.jgrid.jqID(a.p.id)).append(a.grid.fbDiv),$(a.grid.fbDiv).bind("mousewheel DOMMouseScroll",function(b){var c=$(a.grid.bDiv).scrollTop();b.originalEvent.wheelDelta>0||b.originalEvent.detail<0?$(a.grid.bDiv).scrollTop(c-25):$(a.grid.bDiv).scrollTop(c+25),b.preventDefault()}),a.p.hoverrows===!0&&$("#"+$.jgrid.jqID(a.p.id)).unbind("mouseover").unbind("mouseout"),$(a).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(a.p.id)+"_frozen").remove(),$(a.grid.fbDiv).height($(a.grid.bDiv).height()-16);var b=$("#"+$.jgrid.jqID(a.p.id)).clone(!0);$("tr[role=row]",b).each(function(){$("td[role=gridcell]:gt("+e+")",this).remove()}),$(b).width(1).attr("id",a.p.id+"_frozen"),$(a.grid.fbDiv).append(b),a.p.hoverrows===!0&&($("tr.jqgrow",b).hover(function(){$(this).addClass(h),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)).addClass(h)},function(){$(this).removeClass(h),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)).removeClass(h)}),$("tr.jqgrow","#"+$.jgrid.jqID(a.p.id)).hover(function(){$(this).addClass(h),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)+"_frozen").addClass(h)},function(){$(this).removeClass(h),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)+"_frozen").removeClass(h)})),b=null}),a.grid.hDiv.loading||$(a).triggerHandler("jqGridAfterGridComplete"),a.p.frozenColumns=!0)}})},destroyFrozenColumns:function(){return this.each(function(){var a,b,c;this.grid&&this.p.frozenColumns===!0&&(a=this,b=$(a).jqGrid("getStyleUI",a.p.styleUI+".common","hover",!0),$(a.grid.fhDiv).remove(),$(a.grid.fbDiv).remove(),a.grid.fhDiv=null,a.grid.fbDiv=null,a.p.footerrow&&($(a.grid.fsDiv).remove(),a.grid.fsDiv=null),$(this).unbind(".setFrozenColumns"),a.p.hoverrows===!0&&$("#"+$.jgrid.jqID(a.p.id)).bind("mouseover",function(a){c=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(c).attr("class")&&$(c).addClass(b)}).bind("mouseout",function(a){c=$(a.target).closest("tr.jqgrow"),$(c).removeClass(b)}),this.p.frozenColumns=!1)})},resizeColumn:function(a,b){return this.each(function(){var f,h,i,c=this.grid,d=this.p,e=d.colModel,g=e.length;if("string"==typeof a){for(f=0;g>f;f++)if(e[f].name===a){a=f;break}}else a=parseInt(a,10);if(b=parseInt(b,10),!("number"!=typeof a||0>a||a>e.length-1||"number"!=typeof b||b<d.minColWidth)){if(d.forceFit)for(d.nv=0,f=a+1;g>f;f++)if(e[f].hidden!==!0){d.nv=f-a;break}if(c.resizing={idx:a},h=b-c.headers[a].width,d.forceFit){if(i=c.headers[a+d.nv].width-h,i<d.minColWidth)return;c.headers[a+d.nv].newWidth=c.headers[a+d.nv].width-h}c.newWidth=d.tblwidth+h,c.headers[a].newWidth=b,c.dragEnd(!1)}})},getStyleUI:function(a,b,c,d){try{var e="",f=a.split("."),g="";switch(c||(e="class=",g='"'),null==d&&(d=""),f.length){case 1:e+=g+d+" "+$.jgrid.styleUI[f[0]][b]+g;break;case 2:e+=g+d+" "+$.jgrid.styleUI[f[0]][f[1]][b]+g}}catch(h){e=""}return $.trim(e)},resizeGrid:function(a){return this.each(function(){var b=this;void 0===a&&(a=500),setTimeout(function(){var a=$(window).width(),c=$("#gbox_"+$.jgrid.jqID(b.p.id)).parent().width(),d=b.p.width;d=a-c>3?c:a,$("#"+$.jgrid.jqID(b.p.id)).jqGrid("setGridWidth",d)},a)})}}),$.jgrid.extend({editCell:function(a,b,c){return this.each(function(){var e,f,g,h,m,n,o,d=this,i=$(this).jqGrid("getStyleUI",d.p.styleUI+".common","highlight",!0),j=$(this).jqGrid("getStyleUI",d.p.styleUI+".common","hover",!0),k=$(this).jqGrid("getStyleUI",d.p.styleUI+".celledit","inputClass",!0);if(d.grid&&d.p.cellEdit===!0){if(b=parseInt(b,10),d.p.selrow=d.rows[a].id,d.p.knv||$(d).jqGrid("GridNav"),d.p.savedRow.length>0){if(c===!0&&a==d.p.iRow&&b==d.p.iCol)return;$(d).jqGrid("saveCell",d.p.savedRow[0].id,d.p.savedRow[0].ic)}else window.setTimeout(function(){$("#"+$.jgrid.jqID(d.p.knv)).attr("tabindex","-1").focus()},1);if(h=d.p.colModel[b],e=h.name,"subgrid"!==e&&"cb"!==e&&"rn"!==e){if(g=$("td:eq("+b+")",d.rows[a]),h.editable!==!0||c!==!0||g.hasClass("not-editable-cell")||$.isFunction(d.p.isCellEditable)&&!d.p.isCellEditable.call(d,e,a,b))parseInt(d.p.iCol,10)>=0&&parseInt(d.p.iRow,10)>=0&&$(d.rows[d.p.iRow]).removeClass("selected-row "+j).find("td:eq("+d.p.iCol+")").removeClass("edit-cell "+i),g.addClass("edit-cell "+i),$(d.rows[a]).addClass("selected-row "+j),f=g.html().replace(/\&#160\;/gi,""),$(d).triggerHandler("jqGridSelectCell",[d.rows[a].id,e,f,a,b]),$.isFunction(d.p.onSelectCell)&&d.p.onSelectCell.call(d,d.rows[a].id,e,f,a,b);else{parseInt(d.p.iCol,10)>=0&&parseInt(d.p.iRow,10)>=0&&$(d.rows[d.p.iRow]).removeClass("selected-row "+j).find("td:eq("+d.p.iCol+")").removeClass("edit-cell "+i),$(g).addClass("edit-cell "+i),$(d.rows[a]).addClass("selected-row "+j);try{f=$.unformat.call(d,g,{rowId:d.rows[a].id,colModel:h},b)}catch(l){f=h.edittype&&"textarea"===h.edittype?$(g).text():$(g).html()}d.p.autoencode&&(f=$.jgrid.htmlDecode(f)),h.edittype||(h.edittype="text"),d.p.savedRow.push({id:a,ic:b,name:e,v:f}),("&nbsp;"===f||"&#160;"===f||1===f.length&&160===f.charCodeAt(0))&&(f=""),$.isFunction(d.p.formatCell)&&(m=d.p.formatCell.call(d,d.rows[a].id,e,f,a,b),void 0!==m&&(f=m)),$(d).triggerHandler("jqGridBeforeEditCell",[d.rows[a].id,e,f,a,b]),$.isFunction(d.p.beforeEditCell)&&d.p.beforeEditCell.call(d,d.rows[a].id,e,f,a,b),n=$.extend({},h.editoptions||{},{id:a+"_"+e,name:e,rowId:d.rows[a].id,oper:"edit"}),o=$.jgrid.createEl.call(d,h.edittype,n,f,!0,$.extend({},$.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{})),$.inArray(h.edittype,["text","textarea","password","select"])>-1&&$(o).addClass(k),$(g).html("").append(o).attr("tabindex","0"),$.jgrid.bindEv.call(d,o,n),window.setTimeout(function(){$(o).focus()},1),$("input, select, textarea",g).bind("keydown",function(c){if(27===c.keyCode&&($("input.hasDatepicker",g).length>0?$(".ui-datepicker").is(":hidden")?$(d).jqGrid("restoreCell",a,b):$("input.hasDatepicker",g).datepicker("hide"):$(d).jqGrid("restoreCell",a,b)),13===c.keyCode&&!c.shiftKey)return $(d).jqGrid("saveCell",a,b),!1;if(9===c.keyCode){if(d.grid.hDiv.loading)return!1;c.shiftKey?$(d).jqGrid("prevCell",a,b):$(d).jqGrid("nextCell",a,b)}c.stopPropagation()}),$(d).triggerHandler("jqGridAfterEditCell",[d.rows[a].id,e,f,a,b]),$.isFunction(d.p.afterEditCell)&&d.p.afterEditCell.call(d,d.rows[a].id,e,f,a,b)}d.p.iCol=b,d.p.iRow=a}}})},saveCell:function(a,b){return this.each(function(){var d,h,i,g,j,k,l,m,n,o,p,r,s,t,u,v,w,x,y,z,c=this,e=$.jgrid.getRegional(this,"errors"),f=$.jgrid.getRegional(this,"edit");if(c.grid&&c.p.cellEdit===!0){if(d=c.p.savedRow.length>=1?0:null,null!==d){switch(g=$("td:eq("+b+")",c.rows[a]),j=c.p.colModel[b],k=j.name,l=$.jgrid.jqID(k),m=$(g).offset(),j.edittype){case"select":j.editoptions.multiple?(n=$("#"+a+"_"+l,c.rows[a]),o=[],h=$(n).val(),h?h.join(","):h="",$("option:selected",n).each(function(a,b){o[a]=$(b).text()}),i=o.join(",")):(h=$("#"+a+"_"+l+" option:selected",c.rows[a]).val(),i=$("#"+a+"_"+l+" option:selected",c.rows[a]).text()),j.formatter&&(i=h);break;case"checkbox":p=["Yes","No"],j.editoptions&&(p=j.editoptions.value.split(":")),h=$("#"+a+"_"+l,c.rows[a]).is(":checked")?p[0]:p[1],i=h;break;case"password":case"text":case"textarea":case"button":h=$("#"+a+"_"+l,c.rows[a]).val(),i=h;break;case"custom":try{if(!j.editoptions||!$.isFunction(j.editoptions.custom_value))throw"e1";if(h=j.editoptions.custom_value.call(c,$(".customelement",g),"get"),void 0===h)throw"e2";i=h}catch(q){"e1"===q?$.jgrid.info_dialog(e.errcap,"function 'custom_value' "+f.msg.nodefined,f.bClose,{styleUI:c.p.styleUI}):"e2"===q?$.jgrid.info_dialog(e.errcap,"function 'custom_value' "+f.msg.novalue,f.bClose,{styleUI:c.p.styleUI}):$.jgrid.info_dialog(e.errcap,q.message,f.bClose,{styleUI:c.p.styleUI})}}if(i!==c.p.savedRow[d].v)if(r=$(c).triggerHandler("jqGridBeforeSaveCell",[c.rows[a].id,k,h,a,b]),r&&(h=r,i=r),$.isFunction(c.p.beforeSaveCell)&&(s=c.p.beforeSaveCell.call(c,c.rows[a].id,k,h,a,b),s&&(h=s,i=s)),t=$.jgrid.checkValues.call(c,h,b),u=!1,t[0]===!0){if(v=$(c).triggerHandler("jqGridBeforeSubmitCell",[c.rows[a].id,k,h,a,b])||{},$.isFunction(c.p.beforeSubmitCell)&&(v=c.p.beforeSubmitCell.call(c,c.rows[a].id,k,h,a,b),v||(v={})),$("input.hasDatepicker",g).length>0&&$("input.hasDatepicker",g).datepicker("hide"),"remote"===c.p.cellsubmit)if(c.p.cellurl)w={},c.p.autoencode&&(h=$.jgrid.htmlEncode(h)),j.editoptions&&j.editoptions.NullIfEmpty&&""===h&&(h="null",u=!0),w[k]=h,z=c.p.prmNames,x=z.id,y=z.oper,w[x]=$.jgrid.stripPref(c.p.idPrefix,c.rows[a].id),w[y]=z.editoper,w=$.extend(v,w),$(c).jqGrid("progressBar",{method:"show",loadtype:c.p.loadui,htmlcontent:$.jgrid.getRegional(c,"defaults.savetext")}),c.grid.hDiv.loading=!0,$.ajax($.extend({url:c.p.cellurl,data:$.isFunction(c.p.serializeCellData)?c.p.serializeCellData.call(c,w,k):w,type:"POST",complete:function(d,j){if($(c).jqGrid("progressBar",{method:"hide",loadtype:c.p.loadui}),c.grid.hDiv.loading=!1,"success"===j){var l=$(c).triggerHandler("jqGridAfterSubmitCell",[c,d,w.id,k,h,a,b])||[!0,""];l[0]===!0&&$.isFunction(c.p.afterSubmitCell)&&(l=c.p.afterSubmitCell.call(c,d,w.id,k,h,a,b)),l[0]===!0?(u&&(h=""),$(g).empty(),$(c).jqGrid("setCell",c.rows[a].id,b,i,!1,!1,!0),$(g).addClass("dirty-cell"),$(c.rows[a]).addClass("edited"),$(c).triggerHandler("jqGridAfterSaveCell",[c.rows[a].id,k,h,a,b]),$.isFunction(c.p.afterSaveCell)&&c.p.afterSaveCell.call(c,c.rows[a].id,k,h,a,b),c.p.savedRow.splice(0,1)):($.jgrid.info_dialog(e.errcap,l[1],f.bClose,{styleUI:c.p.styleUI}),c.p.restoreCellonFail&&$(c).jqGrid("restoreCell",a,b))}},error:function(d,g,h){$("#lui_"+$.jgrid.jqID(c.p.id)).hide(),c.grid.hDiv.loading=!1,$(c).triggerHandler("jqGridErrorCell",[d,g,h]),$.isFunction(c.p.errorCell)?c.p.errorCell.call(c,d,g,h):$.jgrid.info_dialog(e.errcap,d.status+" : "+d.statusText+"<br/>"+g,f.bClose,{styleUI:c.p.styleUI}),c.p.restoreCellonFail&&$(c).jqGrid("restoreCell",a,b)}},$.jgrid.ajaxOptions,c.p.ajaxCellOptions||{}));else try{$.jgrid.info_dialog(e.errcap,e.nourl,f.bClose,{styleUI:c.p.styleUI}),c.p.restoreCellonFail&&$(c).jqGrid("restoreCell",a,b)}catch(q){}"clientArray"===c.p.cellsubmit&&($(g).empty(),$(c).jqGrid("setCell",c.rows[a].id,b,i,!1,!1,!0),$(g).addClass("dirty-cell"),$(c.rows[a]).addClass("edited"),$(c).triggerHandler("jqGridAfterSaveCell",[c.rows[a].id,k,h,a,b]),$.isFunction(c.p.afterSaveCell)&&c.p.afterSaveCell.call(c,c.rows[a].id,k,h,a,b),c.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){$.jgrid.info_dialog(e.errcap,h+" "+t[1],f.bClose,{styleUI:c.p.styleUI,top:m.top+40,left:m.left})},100),$(c).jqGrid("restoreCell",a,b)}catch(q){}else $(c).jqGrid("restoreCell",a,b)}window.setTimeout(function(){$("#"+$.jgrid.jqID(c.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(a,b){return this.each(function(){var d,e,c=this;if(c.grid&&c.p.cellEdit===!0){if(d=c.p.savedRow.length>=1?0:null,null!==d){if(e=$("td:eq("+b+")",c.rows[a]),$.isFunction($.fn.datepicker))try{$("input.hasDatepicker",e).datepicker("hide")}catch(f){}$(e).empty().attr("tabindex","-1"),$(c).jqGrid("setCell",c.rows[a].id,b,c.p.savedRow[d].v,!1,!1,!0),$(c).triggerHandler("jqGridAfterRestoreCell",[c.rows[a].id,c.p.savedRow[d].v,a,b]),$.isFunction(c.p.afterRestoreCell)&&c.p.afterRestoreCell.call(c,c.rows[a].id,c.p.savedRow[d].v,a,b),c.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+c.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(a,b){return this.each(function(){var e,c=this,d=!1;if(c.grid&&c.p.cellEdit===!0){for(e=b+1;e<c.p.colModel.length;e++)if(c.p.colModel[e].editable===!0&&(!$.isFunction(c.p.isCellEditable)||c.p.isCellEditable.call(c,c.p.colModel[e].name,a,e))){d=e;break}d!==!1?$(c).jqGrid("editCell",a,d,!0):c.p.savedRow.length>0&&$(c).jqGrid("saveCell",a,b)}})},prevCell:function(a,b){return this.each(function(){var e,c=this,d=!1;if(c.grid&&c.p.cellEdit===!0){for(e=b-1;e>=0;e--)if(c.p.colModel[e].editable===!0&&(!$.isFunction(c.p.isCellEditable)||c.p.isCellEditable.call(c,c.p.colModel[e].name,a,e))){d=e;break}d!==!1?$(c).jqGrid("editCell",a,d,!0):c.p.savedRow.length>0&&$(c).jqGrid("saveCell",a,b)}})},GridNav:function(){return this.each(function(){function e(b,c,d){var e,f,g,h,i,j,k,l;"v"===d.substr(0,1)&&(e=$(a.grid.bDiv)[0].clientHeight,f=$(a.grid.bDiv)[0].scrollTop,g=a.rows[b].offsetTop+a.rows[b].clientHeight,h=a.rows[b].offsetTop,"vd"===d&&g>=e&&($(a.grid.bDiv)[0].scrollTop=$(a.grid.bDiv)[0].scrollTop+a.rows[b].clientHeight),"vu"===d&&f>h&&($(a.grid.bDiv)[0].scrollTop=$(a.grid.bDiv)[0].scrollTop-a.rows[b].clientHeight)),"h"===d&&(i=$(a.grid.bDiv)[0].clientWidth,j=$(a.grid.bDiv)[0].scrollLeft,k=a.rows[b].cells[c].offsetLeft+a.rows[b].cells[c].clientWidth,l=a.rows[b].cells[c].offsetLeft,k>=i+parseInt(j,10)?$(a.grid.bDiv)[0].scrollLeft=$(a.grid.bDiv)[0].scrollLeft+a.rows[b].cells[c].clientWidth:j>l&&($(a.grid.bDiv)[0].scrollLeft=$(a.grid.bDiv)[0].scrollLeft-a.rows[b].cells[c].clientWidth))}function f(b,c){var d,e;if("lft"===c)for(d=b+1,e=b;e>=0;e--)if(a.p.colModel[e].hidden!==!0){d=e;break}if("rgt"===c)for(d=b-1,e=b;e<a.p.colModel.length;e++)if(a.p.colModel[e].hidden!==!0){d=e;break}return d}var c,d,b,a=this;a.grid&&a.p.cellEdit===!0&&(a.p.knv=a.p.id+"_kn",b=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+a.p.knv+"'></div></div>"),$(b).insertBefore(a.grid.cDiv),$("#"+a.p.knv).focus().keydown(function(b){switch(d=b.keyCode,"rtl"===a.p.direction&&(37===d?d=39:39===d&&(d=37)),d){case 38:a.p.iRow-1>0&&(e(a.p.iRow-1,a.p.iCol,"vu"),$(a).jqGrid("editCell",a.p.iRow-1,a.p.iCol,!1));break;case 40:a.p.iRow+1<=a.rows.length-1&&(e(a.p.iRow+1,a.p.iCol,"vd"),$(a).jqGrid("editCell",a.p.iRow+1,a.p.iCol,!1));break;case 37:a.p.iCol-1>=0&&(c=f(a.p.iCol-1,"lft"),e(a.p.iRow,c,"h"),$(a).jqGrid("editCell",a.p.iRow,c,!1));break;case 39:a.p.iCol+1<=a.p.colModel.length-1&&(c=f(a.p.iCol+1,"rgt"),e(a.p.iRow,c,"h"),$(a).jqGrid("editCell",a.p.iRow,c,!1));break;case 13:parseInt(a.p.iCol,10)>=0&&parseInt(a.p.iRow,10)>=0&&$(a).jqGrid("editCell",a.p.iRow,a.p.iCol,!0);break;default:return!0}return!1}))})},getChangedCells:function(a){var b=[];return a||(a="all"),this.each(function(){var d,c=this;c.grid&&c.p.cellEdit===!0&&$(c.rows).each(function(e){var f={};$(this).hasClass("edited")&&($("td",this).each(function(b){if(d=c.p.colModel[b].name,"cb"!==d&&"subgrid"!==d)if("dirty"===a){if($(this).hasClass("dirty-cell"))try{f[d]=$.unformat.call(c,this,{rowId:c.rows[e].id,colModel:c.p.colModel[b]},b)}catch(g){f[d]=$.jgrid.htmlDecode($(this).html())}}else try{f[d]=$.unformat.call(c,this,{rowId:c.rows[e].id,colModel:c.p.colModel[b]},b)}catch(g){f[d]=$.jgrid.htmlDecode($(this).html())}}),f.id=this.id,b.push(f))})}),b}}),$.extend($.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true"),a.o&&a.o.remove()},hideModal:function(a,b){var c,d,e,f,g,h;if(b=$.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},b||{}),c=b.gb&&"string"==typeof b.gb&&"#gbox_"===b.gb.substr(0,6)?$("#"+b.gb.substr(6))[0]:!1,!b.onClose||(d=c?b.onClose.call(c,a):b.onClose(a),"boolean"!=typeof d||d)){if(b.formprop&&c&&b.form&&(e=$(a)[0].style.height,f=$(a)[0].style.width,e.indexOf("px")>-1&&(e=parseFloat(e)),f.indexOf("px")>-1&&(f=parseFloat(f)),"edit"===b.form?(g="#"+$.jgrid.jqID("FrmGrid_"+b.gb.substr(6)),h="formProp"):"view"===b.form&&(g="#"+$.jgrid.jqID("ViewGrid_"+b.gb.substr(6)),h="viewProp"),$(c).data(h,{top:parseFloat($(a).css("top")),left:parseFloat($(a).css("left")),width:f,height:e,dataheight:$(g).height(),datawidth:$(g).width()})),$.fn.jqm&&b.jqm===!0)$(a).attr("aria-hidden","true").jqmHide();else{if(""!==b.gb)try{$(".jqgrid-overlay:first",b.gb).hide()}catch(i){}$(a).hide().attr("aria-hidden","true")}b.removemodal&&$(a).remove()}},findPos:function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},createModal:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(c=$.extend(!0,{},$.jgrid.jqModal||{},c),h=this,i="rtl"===$(c.gbox).attr("dir")?!0:!1,j=$.jgrid.styleUI[c.styleUI||"jQueryUI"].modal,k=$.jgrid.styleUI[c.styleUI||"jQueryUI"].common,l=document.createElement("div"),g=$.extend({},g||{}),l.className="ui-jqdialog "+j.modal,l.id=a.themodal,m=document.createElement("div"),m.className="ui-jqdialog-titlebar "+j.header,m.id=a.modalhead,$(m).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>"),n=$("<a class='ui-jqdialog-titlebar-close "+k.cornerall+"'></a>").hover(function(){n.addClass(k.hover)},function(){n.removeClass(k.hover)}).append("<span class='"+k.icon_base+" "+j.icon_close+"'></span>"),$(m).append(n),i?(l.dir="rtl",$(".ui-jqdialog-title",m).css("float","right"),$(".ui-jqdialog-titlebar-close",m).css("left","0.3em")):(l.dir="ltr",$(".ui-jqdialog-title",m).css("float","left"),$(".ui-jqdialog-titlebar-close",m).css("right","0.3em")),o=document.createElement("div"),$(o).addClass("ui-jqdialog-content "+j.content).attr("id",a.modalcontent),$(o).append(b),l.appendChild(o),$(l).prepend(m),f===!0?$("body").append(l):"string"==typeof f?$(f).append(l):$(l).insertBefore(d),$(l).css(g),void 0===c.jqModal&&(c.jqModal=!0),p={},$.fn.jqm&&c.jqModal===!0?(0===c.left&&0===c.top&&c.overlay&&(q=[],q=$.jgrid.findPos(e),c.left=q[0]+4,c.top=q[1]+4),p.top=c.top+"px",p.left=c.left):(0!==c.left||0!==c.top)&&(p.left=c.left,p.top=c.top+"px"),$("a.ui-jqdialog-titlebar-close",m).click(function(){var b=$("#"+$.jgrid.jqID(a.themodal)).data("onClose")||c.onClose,d=$("#"+$.jgrid.jqID(a.themodal)).data("gbox")||c.gbox;return h.hideModal("#"+$.jgrid.jqID(a.themodal),{gb:d,jqm:c.jqModal,onClose:b,removemodal:c.removemodal||!1,formprop:!c.recreateForm||!1,form:c.form||""}),!1}),0!==c.width&&c.width||(c.width=300),0!==c.height&&c.height||(c.height=200),c.zIndex||(r=$(d).parents("*[role=dialog]").filter(":first").css("z-index"),c.zIndex=r?parseInt(r,10)+2:950),s=0,i&&p.left&&!f&&(s=$(c.gbox).width()-(isNaN(c.width)?0:parseInt(c.width,10))-8,p.left=parseInt(p.left,10)+parseInt(s,10)),p.left&&(p.left+="px"),$(l).css($.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},p)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":a.modalhead,"aria-hidden":"true"}),void 0===c.drag&&(c.drag=!0),void 0===c.resize&&(c.resize=!0),c.drag)if($(m).css("cursor","move"),$.fn.tinyDraggable)$(l).tinyDraggable({handle:"#"+$.jgrid.jqID(m.id)});else try{$(l).draggable({handle:$("#"+$.jgrid.jqID(m.id))})}catch(t){}if(c.resize)if($.fn.jqResize)$(l).append("<div class='jqResize "+j.resizable+" "+k.icon_base+" "+j.icon_resizable+"'></div>"),$("#"+$.jgrid.jqID(a.themodal)).jqResize(".jqResize",a.scrollelm?"#"+$.jgrid.jqID(a.scrollelm):!1);else try{$(l).resizable({handles:"se, sw",alsoResize:a.scrollelm?"#"+$.jgrid.jqID(a.scrollelm):!1})}catch(u){}c.closeOnEscape===!0&&$(l).keydown(function(b){if(27===b.which){var d=$("#"+$.jgrid.jqID(a.themodal)).data("onClose")||c.onClose;h.hideModal("#"+$.jgrid.jqID(a.themodal),{gb:c.gbox,jqm:c.jqModal,onClose:d,removemodal:c.removemodal||!1,formprop:!c.recreateForm||!1,form:c.form||""})}})},viewModal:function(a,b){if(b=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},b||{}),void 0===b.focusField&&(b.focusField=0),b.focusField="number"==typeof b.focusField&&b.focusField>=0?parseInt(b.focusField,10):"boolean"!=typeof b.focusField||b.focusField?0:!1,$.fn.jqm&&b.jqm===!0)b.jqM?$(a).attr("aria-hidden","false").jqm(b).jqmShow():$(a).attr("aria-hidden","false").jqmShow();else if(""!==b.gbox&&($(".jqgrid-overlay:first",b.gbox).show(),$(a).data("gbox",b.gbox)),$(a).show().attr("aria-hidden","false"),b.focusField>=0)try{$(":input:visible",a)[parseInt(b.focusField,10)].focus()}catch(c){}},info_dialog:function(a,b,c,d){var f,g,h,i,k,j,l,m,n,e={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};if($.extend(!0,e,$.jgrid.jqModal||{},{caption:"<b>"+a+"</b>"},d||{}),f=e.jqModal,g=this,h=$.jgrid.styleUI[e.styleUI||"jQueryUI"].modal,i=$.jgrid.styleUI[e.styleUI||"jQueryUI"].common,$.fn.jqm&&!f&&(f=!1),j="",e.buttons.length>0)for(k=0;k<e.buttons.length;k++)void 0===e.buttons[k].id&&(e.buttons[k].id="info_button_"+k),j+="<a id='"+e.buttons[k].id+"' class='fm-button "+i.button+"'>"+e.buttons[k].text+"</a>";l=isNaN(e.dataheight)?e.dataheight:e.dataheight+"px",m="text-align:"+e.align+";",n="<div id='info_id'>",n+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+m+"'>"+b+"</div>",n+=c?"<div class='"+h.header+"' style='text-align:"+e.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+i.button+"'>"+c+"</a>"+j+"</div>":""!==j?"<div class='"+h.header+"' style='text-align:"+e.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+j+"</div>":"",n+="</div>";try{"false"===$("#info_dialog").attr("aria-hidden")&&$.jgrid.hideModal("#info_dialog",{jqm:f}),$("#info_dialog").remove()}catch(o){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},n,e,"","",!0),j&&$.each(e.buttons,function(a){$("#"+$.jgrid.jqID(this.id),"#info_id").bind("click",function(){return e.buttons[a].onClick.call($("#info_dialog")),!1})}),$("#closedialog","#info_id").click(function(){return g.hideModal("#info_dialog",{jqm:f,onClose:$("#info_dialog").data("onClose")||e.onClose,gb:$("#info_dialog").data("gbox")||e.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(i.hover)},function(){$(this).removeClass(i.hover)}),$.isFunction(e.beforeOpen)&&e.beforeOpen(),$.jgrid.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove(),a.o&&a.o.remove()},modal:e.modal,jqm:f}),$.isFunction(e.afterOpen)&&e.afterOpen();try{$("#info_dialog").focus()}catch(p){}},bindEv:function(a,b){var c=this;$.isFunction(b.dataInit)&&b.dataInit.call(c,a,b),b.dataEvents&&$.each(b.dataEvents,function(){void 0!==this.data?$(a).bind(this.type,this.data,this.fn):$(a).bind(this.type,this.fn)})},createEl:function(a,b,c,d,e){function h(a,b,c){var d=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];void 0!==c&&$.isArray(c)&&$.merge(d,c),$.each(b,function(b,c){-1===$.inArray(b,d)&&$(a).attr(b,c)}),b.hasOwnProperty("id")||$(a).attr("id",$.jgrid.randId())}var i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,f="",g=this;switch(a){case"textarea":f=document.createElement("textarea"),d?b.cols||$(f).css({width:"98%"}):b.cols||(b.cols=20),b.rows||(b.rows=2),("&nbsp;"===c||"&#160;"===c||1===c.length&&160===c.charCodeAt(0))&&(c=""),f.value=c,h(f,b),$(f).attr({role:"textbox",multiline:"true"});break;case"checkbox":f=document.createElement("input"),f.type="checkbox",b.value?(j=b.value.split(":"),c===j[0]&&(f.checked=!0,f.defaultChecked=!0),f.value=j[0],$(f).attr("offval",j[1])):(i=(c+"").toLowerCase(),i.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==i?(f.checked=!0,f.defaultChecked=!0,f.value=c):f.value="on",$(f).attr("offval","off")),h(f,b,["value"]),$(f).attr("role","checkbox");break;case"select":if(f=document.createElement("select"),f.setAttribute("role","select"),l=[],b.multiple===!0?(k=!0,f.multiple="multiple",$(f).attr("aria-multiselectable","true")):k=!1,null!=b.dataUrl){m=null,n=b.postData||e.postData;try{m=b.rowId}catch(o){}g.p&&g.p.idPrefix&&(m=$.jgrid.stripPref(g.p.idPrefix,m)),$.ajax($.extend({url:$.isFunction(b.dataUrl)?b.dataUrl.call(g,m,c,String(b.name)):b.dataUrl,type:"GET",dataType:"html",data:$.isFunction(n)?n.call(g,m,c,String(b.name)):n,context:{elem:f,options:b,vl:c},success:function(a){var k,b=[],c=this.elem,d=this.vl,e=$.extend({},this.options),f=e.multiple===!0,i=e.cacheUrlData===!0,j="",l=$.isFunction(e.buildSelect)?e.buildSelect.call(g,a):a;"string"==typeof l&&(l=$($.trim(l)).html()),l&&($(c).append(l),h(c,e,n?["postData"]:void 0),void 0===e.size&&(e.size=f?3:1),f?(b=d.split(","),b=$.map(b,function(a){return $.trim(a)})):b[0]=$.trim(d),setTimeout(function(){if($("option",c).each(function(a){k=$(this).text(),d=$(this).val()||k,i&&(j+=(0!==a?";":"")+d+":"+k),0===a&&c.multiple&&(this.selected=!1),$(this).attr("role","option"),($.inArray($.trim(k),b)>-1||$.inArray($.trim(d),b)>-1)&&(this.selected="selected")
}),i)if("edit"===e.oper)$(g).jqGrid("setColProp",e.name,{editoptions:{buildSelect:null,dataUrl:null,value:j}});else if("search"===e.oper)$(g).jqGrid("setColProp",e.name,{searchoptions:{dataUrl:null,value:j}});else if("filter"===e.oper&&$("#fbox_"+g.p.id)[0].p){var f,a=$("#fbox_"+g.p.id)[0].p.columns;$.each(a,function(){return f=this.index||this.name,e.name===f?(this.searchoptions.dataUrl=null,this.searchoptions.value=j,!1):void 0})}$(g).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[c])},0))}},e||{}))}else if(b.value){if(void 0===b.size&&(b.size=k?3:1),k&&(l=c.split(","),l=$.map(l,function(a){return $.trim(a)})),"function"==typeof b.value&&(b.value=b.value()),w=void 0===b.separator?":":b.separator,x=void 0===b.delimiter?";":b.delimiter,"string"==typeof b.value)for(q=b.value.split(x),p=0;p<q.length;p++)r=q[p].split(w),r.length>2&&(r[1]=$.map(r,function(a,b){return b>0?a:void 0}).join(w)),s=document.createElement("option"),s.setAttribute("role","option"),s.value=r[0],s.innerHTML=r[1],f.appendChild(s),k||$.trim(r[0])!==$.trim(c)&&$.trim(r[1])!==$.trim(c)||(s.selected="selected"),k&&($.inArray($.trim(r[1]),l)>-1||$.inArray($.trim(r[0]),l)>-1)&&(s.selected="selected");else if("[object Array]"===Object.prototype.toString.call(b.value))for(t=b.value,p=0;p<t.length;p++)2===t[p].length&&(u=t[p][0],v=t[p][1],s=document.createElement("option"),s.setAttribute("role","option"),s.value=u,s.innerHTML=v,f.appendChild(s),k||$.trim(u)!==$.trim(c)&&$.trim(v)!==$.trim(c)||(s.selected="selected"),k&&($.inArray($.trim(v),l)>-1||$.inArray($.trim(u),l)>-1)&&(s.selected="selected"));else if("object"==typeof b.value){t=b.value;for(u in t)t.hasOwnProperty(u)&&(s=document.createElement("option"),s.setAttribute("role","option"),s.value=u,s.innerHTML=t[u],f.appendChild(s),k||$.trim(u)!==$.trim(c)&&$.trim(t[u])!==$.trim(c)||(s.selected="selected"),k&&($.inArray($.trim(t[u]),l)>-1||$.inArray($.trim(u),l)>-1)&&(s.selected="selected"))}h(f,b,["value"])}break;case"image":case"file":f=document.createElement("input"),f.type=a,h(f,b);break;case"custom":f=document.createElement("span");try{if(!$.isFunction(b.custom_element))throw"e1";if(y=b.custom_element.call(g,c,b),!y)throw"e2";y=$(y).addClass("customelement").attr({id:b.id,name:b.name}),$(f).empty().append(y)}catch(o){z=$.jgrid.getRegional(g,"errors"),A=$.jgrid.getRegional(g,"edit"),"e1"===o?$.jgrid.info_dialog(z.errcap,"function 'custom_element' "+A.msg.nodefined,A.bClose,{styleUI:g.p.styleUI}):"e2"===o?$.jgrid.info_dialog(z.errcap,"function 'custom_element' "+A.msg.novalue,A.bClose,{styleUI:g.p.styleUI}):$.jgrid.info_dialog(z.errcap,"string"==typeof o?o:o.message,A.bClose,{styleUI:g.p.styleUI})}break;default:B="button"===a?"button":"textbox",f=document.createElement("input"),f.type=a,f.value=c,h(f,b),"button"!==a&&(d?b.size||$(f).css({width:"85%"}):b.size||(b.size=20)),$(f).attr("role",B)}return f},checkDate:function(a,b){var e,g,j,f,h,i,k,m,l,c=function(a){return 0!==a%4||0===a%100&&0!==a%400?28:29},d={};if(a=a.toLowerCase(),e=-1!==a.indexOf("/")?"/":-1!==a.indexOf("-")?"-":-1!==a.indexOf(".")?".":"/",a=a.split(e),b=b.split(e),3!==b.length)return!1;for(f=-1,h=-1,i=-1,j=0;j<a.length;j++)k=isNaN(b[j])?0:parseInt(b[j],10),d[a[j]]=k,g=a[j],-1!==g.indexOf("y")&&(f=j),-1!==g.indexOf("m")&&(i=j),-1!==g.indexOf("d")&&(h=j);return g="y"===a[f]||"yyyy"===a[f]?4:"yy"===a[f]?2:-1,l=[0,31,29,31,30,31,30,31,31,30,31,30,31],-1===f?!1:(m=d[a[f]].toString(),2===g&&1===m.length&&(g=1),m.length!==g||0===d[a[f]]&&"00"!==b[f]?!1:-1===i?!1:(m=d[a[i]].toString(),m.length<1||d[a[i]]<1||d[a[i]]>12?!1:-1===h?!1:(m=d[a[h]].toString(),m.length<1||d[a[h]]<1||d[a[h]]>31||2===d[a[i]]&&d[a[h]]>c(d[a[f]])||d[a[h]]>l[d[a[i]]]?!1:!0)))},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(a){var c,b=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!$.jgrid.isEmpty(a)){if(c=a.match(b),!c)return!1;if(c[3]){if(c[1]<1||c[1]>12)return!1}else if(c[1]>23)return!1;if(c[2]>59)return!1}return!0},checkValues:function(a,b,c,d){var e,f,g,h,i,m,n,o,p,j=this,k=j.p.colModel,l=$.jgrid.getRegional(this,"edit.msg");if(void 0===c)if("string"==typeof b){for(f=0,i=k.length;i>f;f++)if(k[f].name===b){e=k[f].editrules,b=f,null!=k[f].formoptions&&(g=k[f].formoptions.label);break}}else b>=0&&(e=k[b].editrules);else e=c,g=void 0===d?"_":d;if(e){if(g||(g=null!=j.p.colNames?j.p.colNames[b]:k[b].label),e.required===!0&&$.jgrid.isEmpty(a))return[!1,g+": "+l.required,""];if(n=e.required===!1?!1:!0,e.number===!0&&(n!==!1||!$.jgrid.isEmpty(a))&&isNaN(a))return[!1,g+": "+l.number,""];if(void 0!==e.minValue&&!isNaN(e.minValue)&&parseFloat(a)<parseFloat(e.minValue))return[!1,g+": "+l.minValue+" "+e.minValue,""];if(void 0!==e.maxValue&&!isNaN(e.maxValue)&&parseFloat(a)>parseFloat(e.maxValue))return[!1,g+": "+l.maxValue+" "+e.maxValue,""];if(e.email===!0&&!(n===!1&&$.jgrid.isEmpty(a)||(o=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,o.test(a))))return[!1,g+": "+l.email,""];if(e.integer===!0&&(n!==!1||!$.jgrid.isEmpty(a))){if(isNaN(a))return[!1,g+": "+l.integer,""];if(0!==a%1||-1!==a.indexOf("."))return[!1,g+": "+l.integer,""]}if(e.date===!0&&!(n===!1&&$.jgrid.isEmpty(a)||(k[b].formatoptions&&k[b].formatoptions.newformat?(h=k[b].formatoptions.newformat,m=$.jgrid.getRegional(j,"formatter.date.masks"),m&&m.hasOwnProperty(h)&&(h=m[h])):h=k[b].datefmt||"Y-m-d",$.jgrid.checkDate(h,a))))return[!1,g+": "+l.date+" - "+h,""];if(e.time===!0&&!(n===!1&&$.jgrid.isEmpty(a)||$.jgrid.checkTime(a)))return[!1,g+": "+l.date+" - hh:mm (am/pm)",""];if(e.url===!0&&!(n===!1&&$.jgrid.isEmpty(a)||(o=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,o.test(a))))return[!1,g+": "+l.url,""];if(e.custom===!0&&(n!==!1||!$.jgrid.isEmpty(a)))return $.isFunction(e.custom_func)?(p=e.custom_func.call(j,a,g,b),$.isArray(p)?p:[!1,l.customarray,""]):[!1,l.customfcheck,""]}return[!0,"",""]}}),$.fn.jqFilter=function(a){var b,c,d;if("string"==typeof a){if(b=$.fn.jqFilter[a],!b)throw"jqFilter - No such method: "+a;return c=$.makeArray(arguments).slice(1),b.apply(this,c)}return d=$.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},$.jgrid.filter,a||{}),this.each(function(){var a,c,b,e,f,g,h,i,j;if(!this.filter&&(this.p=d,(null===this.p.filter||void 0===this.p.filter)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),null!=this.p.sortStrategy&&$.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy),b=this.p.columns.length,e=/msie/i.test(navigator.userAgent)&&!window.opera,this.p.initFilter=$.extend(!0,{},this.p.filter),b)){for(a=0;b>a;a++)c=this.p.columns[a],c.stype?c.inputtype=c.stype:c.inputtype||(c.inputtype="text"),c.sorttype?c.searchtype=c.sorttype:c.searchtype||(c.searchtype="string"),void 0===c.hidden&&(c.hidden=!1),c.label||(c.label=c.name),c.index&&(c.name=c.index),c.hasOwnProperty("searchoptions")||(c.searchoptions={}),c.hasOwnProperty("searchrules")||(c.searchrules={});f=function(){return $("#"+$.jgrid.jqID(d.id))[0]||null},g=f(),h=$.jgrid.styleUI[g.p.styleUI||"jQueryUI"].filter,i=$.jgrid.styleUI[g.p.styleUI||"jQueryUI"].common,this.p.showQuery&&$(this).append("<table class='queryresult "+h.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>"),j=function(a,b){var c=[!0,""],e=f();if($.isFunction(b.searchrules))c=b.searchrules.call(e,a,b);else if($.jgrid&&$.jgrid.checkValues)try{c=$.jgrid.checkValues.call(e,a,-1,b.searchrules,b.label)}catch(g){}c&&c.length&&c[0]===!1&&(d.error=!c[0],d.errmsg=c[1])},this.onchange=function(){return this.p.error=!1,this.p.errmsg="",$.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){$("table.group:first",this).remove();var a=this.createTableForGroup(d.filter,null);$(this).append(a),$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(a,b){var e,j,k,l,n,m,o,q,p,r,s,t,u,c=this,f=$("<table class='group "+h.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),g="left";if("rtl"===this.p.direction&&(g="right",f.attr("dir","rtl")),null===b&&f.append("<tr class='error' style='display:none;'><th colspan='5' class='"+i.error+"' align='"+g+"'></th></tr>"),j=$("<tr></tr>"),f.append(j),k=$("<th colspan='5' align='"+g+"'></th>"),j.append(k),this.p.ruleButtons===!0){for(l=$("<select class='opsel "+h.srSelect+"'></select>"),k.append(l),m="",e=0;e<d.groupOps.length;e++)n=a.groupOp===c.p.groupOps[e].op?" selected='selected'":"",m+="<option value='"+c.p.groupOps[e].op+"'"+n+">"+c.p.groupOps[e].text+"</option>";l.append(m).bind("change",function(){a.groupOp=$(l).val(),c.onchange()})}if(o="<span></span>",this.p.groupButton&&(o=$("<input type='button' value='+ {}' title='Add subgroup' class='add-group "+i.button+"'/>"),o.bind("click",function(){return void 0===a.groups&&(a.groups=[]),a.groups.push({groupOp:d.groupOps[0].op,rules:[],groups:[]}),c.reDraw(),c.onchange(),!1})),k.append(o),this.p.ruleButtons===!0&&(p=$("<input type='button' value='+' title='Add rule' class='add-rule ui-add "+i.button+"'/>"),p.bind("click",function(){var b,d,f,g;for(void 0===a.rules&&(a.rules=[]),e=0;e<c.p.columns.length;e++)if(b=void 0===c.p.columns[e].search?!0:c.p.columns[e].search,d=c.p.columns[e].hidden===!0,f=c.p.columns[e].searchoptions.searchhidden===!0,f&&b||b&&!d){q=c.p.columns[e];break}return g=q.searchoptions.sopt?q.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==$.inArray(q.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts,a.rules.push({field:q.name,op:g[0],data:""}),c.reDraw(),!1}),k.append(p)),null!==b&&(r=$("<input type='button' value='-' title='Delete group' class='delete-group "+i.button+"'/>"),k.append(r),r.bind("click",function(){for(e=0;e<b.groups.length;e++)if(b.groups[e]===a){b.groups.splice(e,1);break}return c.reDraw(),c.onchange(),!1})),void 0!==a.groups)for(e=0;e<a.groups.length;e++)s=$("<tr></tr>"),f.append(s),t=$("<td class='first'></td>"),s.append(t),u=$("<td colspan='4'></td>"),u.append(this.createTableForGroup(a.groups[e],a)),s.append(u);if(void 0===a.groupOp&&(a.groupOp=c.p.groupOps[0].op),void 0!==a.rules)for(e=0;e<a.rules.length;e++)f.append(this.createTableRowForRule(a.rules[e],a));return f},this.createTableRowForRule=function(a,b){var k,l,m,n,p,q,s,r,t,u,v,w,x,y,z,A,B,C,D,c=this,g=f(),j=$("<tr></tr>"),o="";for(j.append("<td class='first'></td>"),q=$("<td class='columns'></td>"),j.append(q),r=$("<select class='"+h.srSelect+"'></select>"),t=[],q.append(r),r.bind("change",function(){var b,d,f,i;for(a.field=$(r).val(),m=$(this).parents("tr:first"),$(".data",m).empty(),k=0;k<c.p.columns.length;k++)if(c.p.columns[k].name===a.field){n=c.p.columns[k];break}if(n){for(n.searchoptions.id=$.jgrid.randId(),n.searchoptions.name=a.field,n.searchoptions.oper="filter",e&&"text"===n.inputtype&&(n.searchoptions.size||(n.searchoptions.size=10)),b=$.jgrid.createEl.call(g,n.inputtype,n.searchoptions,"",!0,c.p.ajaxSelectOptions||{},!0),$(b).addClass("input-elm "+h.srInput),l=n.searchoptions.sopt?n.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==$.inArray(n.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts,d="",f=0,t=[],$.each(c.p.ops,function(){t.push(this.oper)}),k=0;k<l.length;k++)s=$.inArray(l[k],t),-1!==s&&(0===f&&(a.op=c.p.ops[s].oper),d+="<option value='"+c.p.ops[s].oper+"'>"+c.p.ops[s].text+"</option>",f++);$(".selectopts",m).empty().append(d),$(".selectopts",m)[0].selectedIndex=0,$.jgrid.msie&&$.jgrid.msiever()<9&&(i=parseInt($("select.selectopts",m)[0].offsetWidth,10)+1,$(".selectopts",m).width(i),$(".selectopts",m).css("width","auto")),$(".data",m).append(b),$.jgrid.bindEv.call(g,b,n.searchoptions),$(".input-elm",m).bind("change",function(b){var d=b.target;a.data="SPAN"===d.nodeName.toUpperCase()&&n.searchoptions&&$.isFunction(n.searchoptions.custom_value)?n.searchoptions.custom_value.call(g,$(d).children(".customelement:first"),"get"):d.value,c.onchange()}),setTimeout(function(){a.data=$(b).val(),c.onchange()},0)}}),u=0,k=0;k<c.p.columns.length;k++)v=void 0===c.p.columns[k].search?!0:c.p.columns[k].search,w=c.p.columns[k].hidden===!0,x=c.p.columns[k].searchoptions.searchhidden===!0,(x&&v||v&&!w)&&(p="",a.field===c.p.columns[k].name&&(p=" selected='selected'",u=k),o+="<option value='"+c.p.columns[k].name+"'"+p+">"+c.p.columns[k].label+"</option>");for(r.append(o),y=$("<td class='operators'></td>"),j.append(y),n=d.columns[u],n.searchoptions.id=$.jgrid.randId(),e&&"text"===n.inputtype&&(n.searchoptions.size||(n.searchoptions.size=10)),n.searchoptions.name=a.field,n.searchoptions.oper="filter",z=$.jgrid.createEl.call(g,n.inputtype,n.searchoptions,a.data,!0,c.p.ajaxSelectOptions||{},!0),("nu"===a.op||"nn"===a.op)&&($(z).attr("readonly","true"),$(z).attr("disabled","true")),A=$("<select class='selectopts "+h.srSelect+"'></select>"),y.append(A),A.bind("change",function(){a.op=$(A).val(),m=$(this).parents("tr:first");var b=$(".input-elm",m)[0];"nu"===a.op||"nn"===a.op?(a.data="","SELECT"!==b.tagName.toUpperCase()&&(b.value=""),b.setAttribute("readonly","true"),b.setAttribute("disabled","true")):("SELECT"===b.tagName.toUpperCase()&&(a.data=b.value),b.removeAttribute("readonly"),b.removeAttribute("disabled")),c.onchange()}),l=n.searchoptions.sopt?n.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==$.inArray(n.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts,o="",$.each(c.p.ops,function(){t.push(this.oper)}),k=0;k<l.length;k++)s=$.inArray(l[k],t),-1!==s&&(p=a.op===c.p.ops[s].oper?" selected='selected'":"",o+="<option value='"+c.p.ops[s].oper+"'"+p+">"+c.p.ops[s].text+"</option>");return A.append(o),B=$("<td class='data'></td>"),j.append(B),B.append(z),$.jgrid.bindEv.call(g,z,n.searchoptions),$(z).addClass("input-elm "+h.srInput).bind("change",function(){a.data="custom"===n.inputtype?n.searchoptions.custom_value.call(g,$(this).children(".customelement:first"),"get"):$(this).val(),c.onchange()}),C=$("<td></td>"),j.append(C),this.p.ruleButtons===!0&&(D=$("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del "+i.button+"'/>"),C.append(D),D.bind("click",function(){for(k=0;k<b.rules.length;k++)if(b.rules[k]===a){b.rules.splice(k,1);break}return c.reDraw(),c.onchange(),!1})),j},this.getStringForGroup=function(a){var c,b="(";if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){b.length>1&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)b.length>1&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(e){alert(e)}return b+=")","()"===b?"":b},this.getStringForRule=function(a){var e,f,g,h,b="",c="",i=["int","integer","float","number","currency"];for(e=0;e<this.p.ops.length;e++)if(this.p.ops[e].oper===a.op){b=this.p.operands.hasOwnProperty(a.op)?this.p.operands[a.op]:"",c=this.p.ops[e].oper;break}for(e=0;e<this.p.columns.length;e++)if(this.p.columns[e].name===a.field){f=this.p.columns[e];break}return void 0===f?"":(h=a.data,("bw"===c||"bn"===c)&&(h+="%"),("ew"===c||"en"===c)&&(h="%"+h),("cn"===c||"nc"===c)&&(h="%"+h+"%"),("in"===c||"ni"===c)&&(h=" ("+h+")"),d.errorcheck&&j(a.data,f),g=-1!==$.inArray(f.searchtype,i)||"nn"===c||"nu"===c?a.field+" "+b+" "+h:a.field+" "+b+' "'+h+'"')},this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+i.error,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+i.error,this).html(this.p.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(d.filter)},this.toString=function(){function b(b){if(a.p.errorcheck){var c,d;for(c=0;c<a.p.columns.length;c++)if(a.p.columns[c].name===b.field){d=a.p.columns[c];break}d&&j(b.data,d)}return b.op+"(item."+b.field+",'"+b.data+"')"}function c(a){var e,d="(";if(void 0!==a.groups)for(e=0;e<a.groups.length;e++)d.length>1&&(d+="OR"===a.groupOp?" || ":" && "),d+=c(a.groups[e]);if(void 0!==a.rules)for(e=0;e<a.rules.length;e++)d.length>1&&(d+="OR"===a.groupOp?" || ":" && "),d+=b(a.rules[e]);return d+=")","()"===d?"":d}var a=this;return c(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}})},$.extend($.fn.jqFilter,{toSQLString:function(){var a="";return this.each(function(){a=this.toUserFriendlyString()}),a},filterData:function(){var a;return this.each(function(){a=this.p.filter}),a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"==typeof a&&(a=$.jgrid.parse(a)),this.each(function(){this.p.filter=a,this.reDraw(),this.onchange()})}}),$.jgrid.extend({filterToolbar:function(a){var b=$.jgrid.getRegional(this[0],"search");return a=$.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},b,a||{}),this.each(function(){var d,e,f,g,h,i,j,l,m,n,k,c=this;c.p.filterToolbar||($(c).data("filterToolbar")||$(c).data("filterToolbar",a),c.p.force_regional&&(a=$.extend(a,b)),d=$.jgrid.styleUI[c.p.styleUI||"jQueryUI"].filter,e=$.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common,f=$.jgrid.styleUI[c.p.styleUI||"jQueryUI"].base,g=function(){var e,f,h,i,j,k,l,m,b={},d=0,g={};$.each(c.p.colModel,function(){var i=$("#gs_"+c.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv);if(f=this.index||this.name,h=a.searchOperators?i.parent().prev().children("a").attr("soper")||a.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":a.defaultSearch,e="custom"===this.stype&&$.isFunction(this.searchoptions.custom_value)&&i.length>0&&"SPAN"===i[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(c,i.children(".customelement:first"),"get"):i.val(),e||"nu"===h||"nn"===h)b[f]=e,g[f]=h,d++;else try{delete c.p.postData[f]}catch(j){}}),i=d>0?!0:!1,a.stringResult===!0||"local"===c.p.datatype||a.searchOperators===!0?(j='{"groupOp":"'+a.groupOp+'","rules":[',k=0,$.each(b,function(a,b){k>0&&(j+=","),j+='{"field":"'+a+'",',j+='"op":"'+g[a]+'",',b+="",j+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',k++}),j+="]}",$.extend(c.p.postData,{filters:j}),$.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})):$.extend(c.p.postData,b),c.p.searchurl&&(l=c.p.url,$(c).jqGrid("setGridParam",{url:c.p.searchurl})),m="stop"===$(c).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1,!m&&$.isFunction(a.beforeSearch)&&(m=a.beforeSearch.call(c)),m||$(c).jqGrid("setGridParam",{search:i}).trigger("reloadGrid",[{page:1}]),l&&$(c).jqGrid("setGridParam",{url:l}),$(c).triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(a.afterSearch)&&a.afterSearch.call(c)},h=function(b){var f,g,h,i,j,k,d={},e=0;b="boolean"!=typeof b?!0:b,$.each(c.p.colModel,function(){var a,b=$("#gs_"+c.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(a=this.searchoptions.defaultValue),f=this.index||this.name,this.stype){case"select":if(b.find("option").each(function(b){return 0===b&&(this.selected=!0),$(this).val()===a?(this.selected=!0,!1):void 0}),void 0!==a)d[f]=a,e++;else try{delete c.p.postData[f]}catch(g){}break;case"text":if(b.val(a||""),void 0!==a)d[f]=a,e++;else try{delete c.p.postData[f]}catch(h){}break;case"custom":$.isFunction(this.searchoptions.custom_value)&&b.length>0&&"SPAN"===b[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(c,b.children(".customelement:first"),"set",a||"")}}),g=e>0?!0:!1,c.p.resetsearch=!0,a.stringResult===!0||"local"===c.p.datatype?(h='{"groupOp":"'+a.groupOp+'","rules":[',i=0,$.each(d,function(a,b){i>0&&(h+=","),h+='{"field":"'+a+'",',h+='"op":"eq",',b+="",h+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i++}),h+="]}",$.extend(c.p.postData,{filters:h}),$.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})):$.extend(c.p.postData,d),c.p.searchurl&&(j=c.p.url,$(c).jqGrid("setGridParam",{url:c.p.searchurl})),k="stop"===$(c).triggerHandler("jqGridToolbarBeforeClear")?!0:!1,!k&&$.isFunction(a.beforeClear)&&(k=a.beforeClear.call(c)),k||b&&$(c).jqGrid("setGridParam",{search:g}).trigger("reloadGrid",[{page:1}]),j&&$(c).jqGrid("setGridParam",{url:j}),$(c).triggerHandler("jqGridToolbarAfterClear"),$.isFunction(a.afterClear)&&a.afterClear()},i=function(){var a=$("tr.ui-search-toolbar",c.grid.hDiv),b=c.p.frozenColumns===!0?$("tr.ui-search-toolbar",c.grid.fhDiv):!1;"none"===a.css("display")?(a.show(),b&&b.show()):(a.hide(),b&&b.hide())},j=function(b,f,h){var i,l,n,j,k,m,o,p,q,r,s;for($("#sopt_menu").remove(),f=parseInt(f,10),h=parseInt(h,10)+18,i=$(".ui-jqgrid-view").css("font-size")||"11px",j='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+i+";left:"+f+"px;top:"+h+'px;">',k=$(b).attr("soper"),m=[],o=0,p=$(b).attr("colname"),q=c.p.colModel.length;q>o&&c.p.colModel[o].name!==p;)o++;for(r=c.p.colModel[o],s=$.extend({},r.searchoptions),s.sopt||(s.sopt=[],s.sopt[0]="select"===r.stype?"eq":a.defaultSearch),$.each(a.odata,function(){m.push(this.oper)}),o=0;o<s.sopt.length;o++)n=$.inArray(s.sopt[o],m),-1!==n&&(l=k===a.odata[n].oper?e.highlight:"",j+='<li class="ui-menu-item '+l+'" role="presentation"><a class="'+e.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+a.odata[n].oper+'" oper="'+a.operands[a.odata[n].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+a.operands[a.odata[n].oper]+"</td><td>"+a.odata[n].text+"</td></tr></table></a></li>");j+="</ul>",$("body").append(j),$("#sopt_menu").addClass("ui-menu "+d.menu_widget),$("#sopt_menu > li > a").hover(function(){$(this).addClass(e.hover)},function(){$(this).removeClass(e.hover)}).click(function(){var f,d=$(this).attr("value"),e=$(this).attr("oper");$(c).triggerHandler("jqGridToolbarSelectOper",[d,e,b]),$("#sopt_menu").hide(),$(b).text(e).attr("soper",d),a.autosearch===!0&&(f=$(b).parent().next().children()[0],($(f).val()||"nu"===d||"nn"===d)&&g())})},k=$("<tr class='ui-search-toolbar' role='row'></tr>"),a.restoreFromFilters&&(n=c.p.postData.filters,n&&("string"==typeof n&&(n=$.jgrid.parse(n)),m=n.rules.length?n.rules:!1)),$.each(c.p.colModel,function(b){var h,n,o,p,q,r,s,t,x,y,e=this,i="",j="=",u=$("<th role='columnheader' class='"+f.headerBox+" ui-th-"+c.p.direction+"' id='gsh_"+c.p.id+"_"+e.name+"' ></th>"),v=$("<div></div>"),w=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");if(this.hidden===!0&&$(u).css("display","none"),this.search=this.search===!1?!1:!0,void 0===this.stype&&(this.stype="text"),h=$.extend({},this.searchoptions||{},{name:e.index||e.name,id:"gs_"+c.p.idPrefix+e.name,oper:"search"}),this.search){if(a.restoreFromFilters&&m)for(t=!1,x=0;x<m.length;x++)if(m[x].field&&(y=e.index||e.name,y===m[x].field)){t=m[x];break}if(a.searchOperators){for(n=h.sopt?h.sopt[0]:"select"===e.stype?"eq":a.defaultSearch,a.restoreFromFilters&&t&&(n=t.op),o=0;o<a.odata.length;o++)if(a.odata[o].oper===n){j=a.operands[n]||"";break}p=null!=h.searchtitle?h.searchtitle:a.operandTitle,i="<a title='"+p+"' style='padding-right: 0.5em;' soper='"+n+"' class='soptclass' colname='"+this.name+"'>"+j+"</a>"}switch($("td:eq(0)",w).attr("colindex",b).append(i),void 0===h.clearSearch&&(h.clearSearch=!0),h.clearSearch?(q=a.resetTitle||"Clear Search Value",$("td:eq(2)",w).append("<a title='"+q+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+a.resetIcon+"</a>")):$("td:eq(2)",w).hide(),this.surl&&(h.dataUrl=this.surl),r="",h.defaultValue&&(r=$.isFunction(h.defaultValue)?h.defaultValue.call(c):h.defaultValue),a.restoreFromFilters&&t&&(r=t.data),s=$.jgrid.createEl.call(c,this.stype,h,r,!1,$.extend({},$.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{})),$(s).addClass(d.srInput),$("td:eq(1)",w).append(s),$(v).append(w),null==h.dataEvents&&(h.dataEvents=[]),this.stype){case"select":a.autosearch===!0&&h.dataEvents.push({type:"change",fn:function(){return g(),!1}});break;case"text":a.autosearch===!0&&(a.searchOnEnter?h.dataEvents.push({type:"keypress",fn:function(a){var b=a.charCode||a.keyCode||0;return 13===b?(g(),!1):this}}):h.dataEvents.push({type:"keydown",fn:function(b){var c=b.which;switch(c){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:l&&clearTimeout(l),l=setTimeout(function(){g()},a.autosearchDelay)}}}))}$.jgrid.bindEv.call(c,s,h)}$(u).append(v),$(k).append(u),a.searchOperators||$("td:eq(0)",w).hide()}),$("table thead",c.grid.hDiv).append(k),a.searchOperators&&($(".soptclass",k).click(function(a){var b=$(this).offset(),c=b.left,d=b.top;j(this,c,d),a.stopPropagation()}),$("body").on("click",function(a){"soptclass"!==a.target.className&&$("#sopt_menu").hide()})),$(".clearsearchclass",k).click(function(){var b=$(this).parents("tr:first"),d=parseInt($("td.ui-search-oper",b).attr("colindex"),10),e=$.extend({},c.p.colModel[d].searchoptions||{}),f=e.defaultValue?e.defaultValue:"";"select"===c.p.colModel[d].stype?f?$("td.ui-search-input select",b).val(f):$("td.ui-search-input select",b)[0].selectedIndex=0:$("td.ui-search-input input",b).val(f),a.autosearch===!0&&g()}),this.p.filterToolbar=!0,this.triggerToolbar=g,this.clearToolbar=h,this.toggleToolbar=i)})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},searchGrid:function(a){var b=$.jgrid.getRegional(this[0],"search");return a=$.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},b,a||{}),this.each(function(){function k(e){d=$(b).triggerHandler("jqGridFilterBeforeShow",[e]),void 0===d&&(d=!0),d&&$.isFunction(a.beforeShowSearch)&&(d=a.beforeShowSearch.call(b,e)),d&&($.jgrid.viewModal("#"+$.jgrid.jqID(f.themodal),{gbox:"#gbox_"+$.jgrid.jqID(c),jqm:a.jqModal,modal:a.modal,overlay:a.overlay,toTop:a.toTop}),$(b).triggerHandler("jqGridFilterAfterShow",[e]),$.isFunction(a.afterShowSearch)&&a.afterShowSearch.call(b,e))}var h,c,d,e,f,g,i,j,l,m,n,t,v,o,p,q,r,s,u,w,x,b=this;b.grid&&(c="fbox_"+b.p.id,d=!0,e=!0,f={themodal:"searchmod"+c,modalhead:"searchhd"+c,modalcontent:"searchcnt"+c,scrollelm:c},g=b.p.postData[a.sFilter],i=$.jgrid.styleUI[b.p.styleUI||"jQueryUI"].filter,j=$.jgrid.styleUI[b.p.styleUI||"jQueryUI"].common,a.styleUI=b.p.styleUI,"string"==typeof g&&(g=$.jgrid.parse(g)),a.recreateFilter===!0&&$("#"+$.jgrid.jqID(f.themodal)).remove(),void 0!==$("#"+$.jgrid.jqID(f.themodal))[0]?k($("#fbox_"+$.jgrid.jqID(b.p.id))):(l=$("<div><div id='"+c+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID(b.p.id)),m="left",n="","rtl"===b.p.direction&&(m="right",n=" style='text-align:left'",l.attr("dir","rtl")),o=$.extend([],b.p.colModel),p="<a id='"+c+"_search' class='fm-button "+j.button+" fm-button-icon-right ui-search'><span class='"+j.icon_base+" "+i.icon_search+"'></span>"+a.Find+"</a>",q="<a id='"+c+"_reset' class='fm-button "+j.button+" fm-button-icon-left ui-reset'><span class='"+j.icon_base+" "+i.icon_reset+"'></span>"+a.Reset+"</a>",r="",s="",u=!1,w=-1,a.showQuery&&(r="<a id='"+c+"_query' class='fm-button "+j.button+" fm-button-icon-left'><span class='"+j.icon_base+" "+i.icon_query+"'></span>Query</a>"),a.columns.length?(o=a.columns,w=0,t=o[0].index||o[0].name):$.each(o,function(a,c){if(c.label||(c.label=b.p.colNames[a]),!u){var d=void 0===c.search?!0:c.search,e=c.hidden===!0,f=c.searchoptions&&c.searchoptions.searchhidden===!0;(f&&d||d&&!e)&&(u=!0,t=c.index||c.name,w=a)}}),(!g&&t||a.multipleSearch===!1)&&(x="eq",w>=0&&o[w].searchoptions&&o[w].searchoptions.sopt?x=o[w].searchoptions.sopt[0]:a.sopt&&a.sopt.length&&(x=a.sopt[0]),g={groupOp:"AND",rules:[{field:t,op:x,data:""}]}),u=!1,a.tmplNames&&a.tmplNames.length&&(u=!0,s="<tr><td class='ui-search-label'>"+a.tmplLabel+"</td>",s+="<td><select class='ui-template "+i.srSelect+"'>",s+="<option value='default'>Default</option>",$.each(a.tmplNames,function(a,b){s+="<option value='"+a+"'>"+b+"</option>"}),s+="</select></td></tr>"),v="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+c+"_2'><tbody><tr><td colspan='2'><hr class='"+j.content+"' style='margin:1px'/></td></tr>"+s+"<tr><td class='EditButton' style='text-align:"+m+"'>"+q+"</td><td class='EditButton' "+n+">"+r+p+"</td></tr></tbody></table>",c=$.jgrid.jqID(c),$("#"+c).jqFilter({columns:o,sortStrategy:a.sortStrategy,filter:a.loadDefaults?g:null,showQuery:a.showQuery,errorcheck:a.errorcheck,sopt:a.sopt,groupButton:a.multipleGroup,ruleButtons:a.multipleSearch,afterRedraw:a.afterRedraw,ops:a.odata,operands:a.operands,ajaxSelectOptions:b.p.ajaxSelectOptions,groupOps:a.groupOps,onChange:function(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString()),$.isFunction(a.afterChange)&&a.afterChange.call(b,$("#"+c),a)},direction:b.p.direction,id:b.p.id}),l.append(v),u&&a.tmplFilters&&a.tmplFilters.length&&$(".ui-template",l).bind("change",function(){var b=$(this).val();return"default"===b?$("#"+c).jqFilter("addFilter",g):$("#"+c).jqFilter("addFilter",a.tmplFilters[parseInt(b,10)]),!1}),a.multipleGroup===!0&&(a.multipleSearch=!0),$(b).triggerHandler("jqGridFilterInitialize",[$("#"+c)]),$.isFunction(a.onInitializeSearch)&&a.onInitializeSearch.call(b,$("#"+c)),a.gbox="#gbox_"+c,a.layer?$.jgrid.createModal(f,l,a,"#gview_"+$.jgrid.jqID(b.p.id),$("#gbox_"+$.jgrid.jqID(b.p.id))[0],"#"+$.jgrid.jqID(a.layer),{position:"relative"}):$.jgrid.createModal(f,l,a,"#gview_"+$.jgrid.jqID(b.p.id),$("#gbox_"+$.jgrid.jqID(b.p.id))[0]),(a.searchOnEnter||a.closeOnEscape)&&$("#"+$.jgrid.jqID(f.themodal)).keydown(function(b){var d=$(b.target);
return!a.searchOnEnter||13!==b.which||d.hasClass("add-group")||d.hasClass("add-rule")||d.hasClass("delete-group")||d.hasClass("delete-rule")||d.hasClass("fm-button")&&d.is("[id$=_query]")?a.closeOnEscape&&27===b.which?($("#"+$.jgrid.jqID(f.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($("#"+c+"_search").click(),!1)}),r&&$("#"+c+"_query").bind("click",function(){return $(".queryresult",l).toggle(),!1}),void 0===a.stringResult&&(a.stringResult=a.multipleSearch),$("#"+c+"_search").bind("click",function(){var g,i,d={};if(h=$("#"+c),h.find(".input-elm:focus").change(),i=h.jqFilter("filterData"),a.errorcheck&&(h[0].hideError(),a.showQuery||h.jqFilter("toSQLString"),h[0].p.error))return h[0].showError(),!1;if(a.stringResult){try{g=JSON.stringify(i)}catch(j){}"string"==typeof g&&(d[a.sFilter]=g,$.each([a.sField,a.sValue,a.sOper],function(){d[this]=""}))}else a.multipleSearch?(d[a.sFilter]=i,$.each([a.sField,a.sValue,a.sOper],function(){d[this]=""})):(d[a.sField]=i.rules[0].field,d[a.sValue]=i.rules[0].data,d[a.sOper]=i.rules[0].op,d[a.sFilter]="");return b.p.search=!0,$.extend(b.p.postData,d),e=$(b).triggerHandler("jqGridFilterSearch"),void 0===e&&(e=!0),e&&$.isFunction(a.onSearch)&&(e=a.onSearch.call(b,b.p.filters)),e!==!1&&$(b).trigger("reloadGrid",[{page:1}]),a.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(f.themodal),{gb:"#gbox_"+$.jgrid.jqID(b.p.id),jqm:a.jqModal,onClose:a.onClose}),!1}),$("#"+c+"_reset").bind("click",function(){var d={},g=$("#"+c);return b.p.search=!1,b.p.resetsearch=!0,a.multipleSearch===!1?d[a.sField]=d[a.sValue]=d[a.sOper]="":d[a.sFilter]="",g[0].resetFilter(),u&&$(".ui-template",l).val("default"),$.extend(b.p.postData,d),e=$(b).triggerHandler("jqGridFilterReset"),void 0===e&&(e=!0),e&&$.isFunction(a.onReset)&&(e=a.onReset.call(b)),e!==!1&&$(b).trigger("reloadGrid",[{page:1}]),a.closeAfterReset&&$.jgrid.hideModal("#"+$.jgrid.jqID(f.themodal),{gb:"#gbox_"+$.jgrid.jqID(b.p.id),jqm:a.jqModal,onClose:a.onClose}),!1}),k($("#"+c)),$(".fm-button:not(."+j.disabled+")",l).hover(function(){$(this).addClass(j.hover)},function(){$(this).removeClass(j.hover)})))})}}),rp_ge={},$.jgrid.extend({editGridRow:function(a,b){var c=$.jgrid.getRegional(this[0],"edit"),d=this[0].p.styleUI,e=$.jgrid.styleUI[d].formedit,f=$.jgrid.styleUI[d].common;return b=$.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:f.overlay,removemodal:!0,form:"edit",template:null,focusField:!0},c,b||{}),rp_ge[$(this)[0].p.id]=b,this.each(function(){function u(){var b,d,a={};$(i).find(".FormElement").each(function(){var d,e,f,g,b=$(".customelement",this);if(b.length)d=b[0],e=$(d).attr("name"),$.each(c.p.colModel,function(){if(this.name===e&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(o[e]=this.editoptions.custom_value.call(c,$("#"+$.jgrid.jqID(e),i),"get"),void 0===o[e])throw"e1"}catch(a){"e1"===a?$.jgrid.info_dialog(s.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.novalue,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(s.errcap,a.message,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}return!0}});else{switch($(this).get(0).type){case"checkbox":$(this).is(":checked")?o[this.name]=$(this).val():(f=$(this).attr("offval"),o[this.name]=f);break;case"select-one":o[this.name]=$("option:selected",this).val();break;case"select-multiple":o[this.name]=$(this).val(),o[this.name]=o[this.name]?o[this.name].join(","):"",g=[],$("option:selected",this).each(function(a,b){g[a]=$(b).text()});break;case"password":case"text":case"textarea":case"button":o[this.name]=$(this).val();break;case"radio":if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}c.p.autoencode&&(o[this.name]=$.jgrid.htmlEncode(o[this.name]))}});for(b in a)a.hasOwnProperty(b)&&(d=$('input[name="'+b+'"]:checked',i).val(),o[b]=void 0!==d?d:a[b],c.p.autoencode&&(o[b]=$.jgrid.htmlEncode(o[b])));return!0}function v(a,b,d,f){var h,i,j,l,m,n,t,u,k=0,o=[],p=!1,q="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",s="";for(t=1;f>=t;t++)s+=q;return"_empty"!==a&&(p=$(b).jqGrid("getInd",a)),$(b.p.colModel).each(function(q){var u,v,w,x,y;if(h=this.name,i=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,m=i?"style='display:none'":"","cb"!==h&&"subgrid"!==h&&this.editable===!0&&"rn"!==h){if(p===!1)l="";else if(h===b.p.ExpandColumn&&b.p.treeGrid===!0)l=$("td[role='gridcell']:eq("+q+")",b.rows[p]).text();else{try{l=$.unformat.call(b,$("td[role='gridcell']:eq("+q+")",b.rows[p]),{rowId:a,colModel:this},q)}catch(t){l=this.edittype&&"textarea"===this.edittype?$("td[role='gridcell']:eq("+q+")",b.rows[p]).text():$("td[role='gridcell']:eq("+q+")",b.rows[p]).html()}(!l||"&nbsp;"===l||"&#160;"===l||1===l.length&&160===l.charCodeAt(0))&&(l="")}u=$.extend({},this.editoptions||{},{id:h,name:h,rowId:a,oper:"edit"}),v=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),w=parseInt(v.rowpos,10)||k+1,x=parseInt(2*(parseInt(v.colpos,10)||1),10),"_empty"===a&&u.defaultValue&&(l=$.isFunction(u.defaultValue)?u.defaultValue.call(c):u.defaultValue),this.edittype||(this.edittype="text"),c.p.autoencode&&(l=$.jgrid.htmlDecode(l)),n=$.jgrid.createEl.call(c,this.edittype,u,l,!1,$.extend({},$.jgrid.ajaxOptions,b.p.ajaxSelectOptions||{})),"select"===this.edittype&&(l=$(n).val(),"select-multiple"===$(n).get(0).type&&l&&(l=l.join(","))),"checkbox"===this.edittype&&(l=$(n).is(":checked")?$(n).val():$(n).attr("offval")),(rp_ge[c.p.id].checkOnSubmit||rp_ge[c.p.id].checkOnUpdate)&&(rp_ge[c.p.id]._savedData[h]=l),$(n).addClass("FormElement"),$.inArray(this.edittype,["text","textarea","password","select"])>-1&&$(n).addClass(e.inputClass),r?$(I).find("#"+h).replaceWith(n):(j=$(d).find("tr[rowpos="+w+"]"),v.rowabove&&(y=$("<tr><td class='contentinfo' colspan='"+2*f+"'>"+v.rowcontent+"</td></tr>"),$(d).append(y),y[0].rp=w),0===j.length&&(j=$("<tr "+m+" rowpos='"+w+"'></tr>").addClass("FormData").attr("id","tr_"+h),$(j).append(s),$(d).append(j),j[0].rp=w),$("td:eq("+(x-2)+")",j[0]).html("<label for='"+h+"'>"+(void 0===v.label?b.p.colNames[q]:v.label)+"</label>"),$("td:eq("+(x-1)+")",j[0]).append(v.elmprefix).append(n).append(v.elmsuffix)),"custom"===this.edittype&&$.isFunction(u.custom_value)&&u.custom_value.call(c,$("#"+h,g),"set",l),$.jgrid.bindEv.call(c,n,u),o[k]=q,k++}}),k>0&&(r?(u="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+b.p.id+"_id' value='"+a+"'/>",$(I).append(u)):(u=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+b.p.id+"_id' value='"+a+"'/></td></tr>"),u[0].rp=k+999,$(d).append(u)),(rp_ge[c.p.id].checkOnSubmit||rp_ge[c.p.id].checkOnUpdate)&&(rp_ge[c.p.id]._savedData[b.p.id+"_id"]=a)),o}function w(a,b,d){var e,g,h,j,k,l,m,n,f=0;return(rp_ge[c.p.id].checkOnSubmit||rp_ge[c.p.id].checkOnUpdate)&&(rp_ge[c.p.id]._savedData={},rp_ge[c.p.id]._savedData[b.p.id+"_id"]=a),m=b.p.colModel,"_empty"===a?($(m).each(function(){e=this.name,j=$.extend({},this.editoptions||{}),h=$("#"+$.jgrid.jqID(e),d),h&&h.length&&null!==h[0]&&(k="","custom"===this.edittype&&$.isFunction(j.custom_value)?j.custom_value.call(c,$("#"+e,d),"set",k):j.defaultValue?(k=$.isFunction(j.defaultValue)?j.defaultValue.call(c):j.defaultValue,"checkbox"===h[0].type?(l=k.toLowerCase(),l.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=k):(h[0].checked=!1,h[0].defaultChecked=!1)):h.val(k)):"checkbox"===h[0].type?(h[0].checked=!1,h[0].defaultChecked=!1,k=$(h).attr("offval")):h[0].type&&"select"===h[0].type.substr(0,6)?h[0].selectedIndex=0:h.val(k),(rp_ge[c.p.id].checkOnSubmit===!0||rp_ge[c.p.id].checkOnUpdate)&&(rp_ge[c.p.id]._savedData[e]=k))}),$("#id_g",d).val(a),void 0):(n=$(b).jqGrid("getInd",a,!0),n&&($('td[role="gridcell"]',n).each(function(h){var j,k;if(e=m[h].name,"cb"!==e&&"subgrid"!==e&&"rn"!==e&&m[h].editable===!0){if(e===b.p.ExpandColumn&&b.p.treeGrid===!0)g=$(this).text();else try{g=$.unformat.call(b,$(this),{rowId:a,colModel:m[h]},h)}catch(i){g="textarea"===m[h].edittype?$(this).text():$(this).html()}switch(c.p.autoencode&&(g=$.jgrid.htmlDecode(g)),(rp_ge[c.p.id].checkOnSubmit===!0||rp_ge[c.p.id].checkOnUpdate)&&(rp_ge[c.p.id]._savedData[e]=g),e=$.jgrid.jqID(e),m[h].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===g||"&#160;"===g||1===g.length&&160===g.charCodeAt(0))&&(g=""),$("#"+e,d).val(g);break;case"select":j=g.split(","),j=$.map(j,function(a){return $.trim(a)}),$("#"+e+" option",d).each(function(){this.selected=m[h].editoptions.multiple||$.trim(g)!==$.trim($(this).text())&&j[0]!==$.trim($(this).text())&&j[0]!==$.trim($(this).val())?m[h].editoptions.multiple?$.inArray($.trim($(this).text()),j)>-1||$.inArray($.trim($(this).val()),j)>-1?!0:!1:!1:!0}),(rp_ge[c.p.id].checkOnSubmit===!0||rp_ge[c.p.id].checkOnUpdate)&&(g=$("#"+e,d).val(),m[h].editoptions.multiple&&(g=g.join(",")),rp_ge[c.p.id]._savedData[e]=g);break;case"checkbox":g=String(g),m[h].editoptions&&m[h].editoptions.value?(k=m[h].editoptions.value.split(":"),k[0]===g?$("#"+e,d)[c.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+e,d)[c.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})):(g=g.toLowerCase(),g.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==g?($("#"+e,d)[c.p.useProp?"prop":"attr"]("checked",!0),$("#"+e,d)[c.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+e,d)[c.p.useProp?"prop":"attr"]("checked",!1),$("#"+e,d)[c.p.useProp?"prop":"attr"]("defaultChecked",!1))),(rp_ge[c.p.id].checkOnSubmit===!0||rp_ge[c.p.id].checkOnUpdate)&&(g=$("#"+e,d).is(":checked")?$("#"+e,d).val():$("#"+e,d).attr("offval"),rp_ge[c.p.id]._savedData[e]=g);break;case"custom":try{if(!m[h].editoptions||!$.isFunction(m[h].editoptions.custom_value))throw"e1";m[h].editoptions.custom_value.call(c,$("#"+e,d),"set",g)}catch(l){"e1"===l?$.jgrid.info_dialog(s.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(s.errcap,l.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}}f++}}),f>0&&($("#id_g",i).val(a),(rp_ge[c.p.id].checkOnSubmit===!0||rp_ge[c.p.id].checkOnUpdate)&&(rp_ge[c.p.id]._savedData[b.p.id+"_id"]=a))),void 0)}function x(){$.each(c.p.colModel,function(a,b){b.editoptions&&b.editoptions.NullIfEmpty===!0&&o.hasOwnProperty(b.name)&&""===o[b.name]&&(o[b.name]="null")})}function y(){var a,l,m,n,p,r,t,v,y,z,A,e=[!0,"",""],h={},j=c.p.prmNames,u=$(c).triggerHandler("jqGridAddEditBeforeCheckValues",[$(g),q]);u&&"object"==typeof u&&(o=u),$.isFunction(rp_ge[c.p.id].beforeCheckValues)&&(u=rp_ge[c.p.id].beforeCheckValues.call(c,o,$(g),q),u&&"object"==typeof u&&(o=u));for(n in o)if(o.hasOwnProperty(n)&&(e=$.jgrid.checkValues.call(c,o[n],n),e[0]===!1))break;if(x(),e[0]&&(h=$(c).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[c.p.id],o,q]),void 0===h&&$.isFunction(rp_ge[c.p.id].onclickSubmit)&&(h=rp_ge[c.p.id].onclickSubmit.call(c,rp_ge[c.p.id],o,q)||{}),e=$(c).triggerHandler("jqGridAddEditBeforeSubmit",[o,$(g),q]),void 0===e&&(e=[!0,"",""]),e[0]&&$.isFunction(rp_ge[c.p.id].beforeSubmit)&&(e=rp_ge[c.p.id].beforeSubmit.call(c,o,$(g),q))),e[0]&&!rp_ge[c.p.id].processing){if(rp_ge[c.p.id].processing=!0,$("#sData",i+"_2").addClass(f.active),t=rp_ge[c.p.id].url||$(c).jqGrid("getGridParam","editurl"),m=j.oper,l="clientArray"===t?c.p.keyName:j.id,o[m]="_empty"===$.trim(o[c.p.id+"_id"])?j.addoper:j.editoper,o[m]!==j.addoper?o[l]=o[c.p.id+"_id"]:void 0===o[l]&&(o[l]=o[c.p.id+"_id"]),delete o[c.p.id+"_id"],o=$.extend(o,rp_ge[c.p.id].editData,h),c.p.treeGrid===!0){o[m]===j.addoper&&(p=$(c).jqGrid("getGridParam","selrow"),v="adjacency"===c.p.treeGridModel?c.p.treeReader.parent_id_field:"parent_id",o[v]=p);for(r in c.p.treeReader)if(c.p.treeReader.hasOwnProperty(r)&&(y=c.p.treeReader[r],o.hasOwnProperty(y))){if(o[m]===j.addoper&&"parent_id_field"===r)continue;delete o[y]}}o[l]=$.jgrid.stripPref(c.p.idPrefix,o[l]),z=$.extend({url:t,type:rp_ge[c.p.id].mtype,data:$.isFunction(rp_ge[c.p.id].serializeEditData)?rp_ge[c.p.id].serializeEditData.call(c,o):o,complete:function(h,n){var r;if($("#sData",i+"_2").removeClass(f.active),o[l]=c.p.idPrefix+o[l],h.status>=300&&304!==h.status?(e[0]=!1,e[1]=$(c).triggerHandler("jqGridAddEditErrorTextFormat",[h,q]),e[1]=$.isFunction(rp_ge[c.p.id].errorTextFormat)?rp_ge[c.p.id].errorTextFormat.call(c,h,q):n+" Status: '"+h.statusText+"'. Error code: "+h.status):(e=$(c).triggerHandler("jqGridAddEditAfterSubmit",[h,o,q]),void 0===e&&(e=[!0,"",""]),e[0]&&$.isFunction(rp_ge[c.p.id].afterSubmit)&&(e=rp_ge[c.p.id].afterSubmit.call(c,h,o,q))),e[0]===!1)$(".FormError",g).html(e[1]),$(".FormError",g).show();else if(c.p.autoencode&&$.each(o,function(a,b){o[a]=$.jgrid.htmlDecode(b)}),o[m]===j.addoper?(e[2]||(e[2]=$.jgrid.randId()),null==o[l]||"_empty"===o[l]?o[l]=e[2]:e[2]=o[l],rp_ge[c.p.id].reloadAfterSubmit?$(c).trigger("reloadGrid"):c.p.treeGrid===!0?$(c).jqGrid("addChildNode",e[2],p,o):$(c).jqGrid("addRowData",e[2],o,b.addedrow),rp_ge[c.p.id].closeAfterAdd?(c.p.treeGrid!==!0&&$(c).jqGrid("setSelection",e[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form})):rp_ge[c.p.id].clearAfterAdd&&w("_empty",c,g)):(rp_ge[c.p.id].reloadAfterSubmit?($(c).trigger("reloadGrid"),rp_ge[c.p.id].closeAfterEdit||setTimeout(function(){$(c).jqGrid("setSelection",o[l])},1e3)):c.p.treeGrid===!0?$(c).jqGrid("setTreeRow",o[l],o):$(c).jqGrid("setRowData",o[l],o),rp_ge[c.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form})),$.isFunction(rp_ge[c.p.id].afterComplete)&&(a=h,setTimeout(function(){$(c).triggerHandler("jqGridAddEditAfterComplete",[a,o,$(g),q]),rp_ge[c.p.id].afterComplete.call(c,a,o,$(g),q),a=null},500)),(rp_ge[c.p.id].checkOnSubmit||rp_ge[c.p.id].checkOnUpdate)&&($(g).data("disabled",!1),"_empty"!==rp_ge[c.p.id]._savedData[c.p.id+"_id"]))for(r in rp_ge[c.p.id]._savedData)rp_ge[c.p.id]._savedData.hasOwnProperty(r)&&o[r]&&(rp_ge[c.p.id]._savedData[r]=o[r]);rp_ge[c.p.id].processing=!1;try{$(":input:visible",g)[0].focus()}catch(s){}}},$.jgrid.ajaxOptions,rp_ge[c.p.id].ajaxEditOptions),z.url||rp_ge[c.p.id].useDataProxy||($.isFunction(c.p.dataProxy)?rp_ge[c.p.id].useDataProxy=!0:(e[0]=!1,e[1]+=" "+s.nourl)),e[0]&&(rp_ge[c.p.id].useDataProxy?(A=c.p.dataProxy.call(c,z,"set_"+c.p.id),void 0===A&&(A=[!0,""]),A[0]===!1?(e[0]=!1,e[1]=A[1]||"Error deleting the selected row!"):(z.data.oper===j.addoper&&rp_ge[c.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),z.data.oper===j.editoper&&rp_ge[c.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}))):"clientArray"===z.url?(rp_ge[c.p.id].reloadAfterSubmit=!1,o=z.data,z.complete({status:200,statusText:""},"")):$.ajax(z))}e[0]===!1&&($(".FormError",g).html(e[1]),$(".FormError",g).show())}function z(a,b){var d,c=!1;for(d in a)if(a.hasOwnProperty(d)&&a[d]!=b[d]){c=!0;break}return c}function A(){var a=!0;return $(".FormError",g).hide(),rp_ge[c.p.id].checkOnUpdate&&(o={},u(),p=z(o,rp_ge[c.p.id]._savedData),p&&($(g).data("disabled",!0),$(".confirm","#"+k.themodal).show(),a=!1)),a}function B(){var b;if("_empty"!==a&&void 0!==c.p.savedRow&&c.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow))for(b=0;b<c.p.savedRow.length;b++)if(c.p.savedRow[b].id===a){$(c).jqGrid("restoreRow",a);break}}function C(a,b){var c=b[1].length-1;0===a?$("#pData",j).addClass(f.disabled):void 0!==b[1][a-1]&&$("#"+$.jgrid.jqID(b[1][a-1])).hasClass(f.disabled)?$("#pData",j).addClass(f.disabled):$("#pData",j).removeClass(f.disabled),a===c?$("#nData",j).addClass(f.disabled):void 0!==b[1][a+1]&&$("#"+$.jgrid.jqID(b[1][a+1])).hasClass(f.disabled)?$("#nData",j).addClass(f.disabled):$("#nData",j).removeClass(f.disabled)}function D(){var a=$(c).jqGrid("getDataIDs"),b=$("#id_g",i).val(),d=$.inArray(b,a);return[d,a]}function E(a){var b="";return"string"==typeof a&&(b=a.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(a,b){return'<span id="'+b+'" ></span>'})),b}function F(){var a,b,d,e;if(rp_ge[c.p.id].checkOnSubmit||rp_ge[c.p.id].checkOnUpdate){a=[],b={},a=$.map(rp_ge[c.p.id]._savedData,function(a,b){return b}),$(".FormElement",I).each(function(){if(-1===a.indexOf(this.name)){var d=$(this).val(),e=$(this).get(0).type;if("checkbox"===e)$(this).is(":checked")||(d=$(this).attr("offval"));else if("select-multiple"===e)d=d.join(",");else if("radio"===e){if(b.hasOwnProperty(this.name))return!0;b[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}rp_ge[c.p.id]._savedData[this.name]=d}});for(d in b)b.hasOwnProperty(d)&&(e=$('input[name="'+d+'"]:checked',I).val(),rp_ge[c.p.id]._savedData[d]=void 0!==e?e:b[d])}}var j,o,p,q,d,g,h,i,k,l,m,n,r,s,t,J,G,H,I,K,L,M,N,O,P,Q,R,S,T,U,V,W,c=this;c.grid&&a&&(d=c.p.id,g="FrmGrid_"+d,h="TblGrid_"+d,i="#"+$.jgrid.jqID(h),k={themodal:"editmod"+d,modalhead:"edithd"+d,modalcontent:"editcnt"+d,scrollelm:g},l=!0,m=1,n=0,r="string"==typeof rp_ge[c.p.id].template&&rp_ge[c.p.id].template.length>0,s=$.jgrid.getRegional(this,"errors"),rp_ge[c.p.id].styleUI=c.p.styleUI||"jQueryUI",$.jgrid.isMobile()&&(rp_ge[c.p.id].resize=!1),"new"===a?(a="_empty",q="add",b.caption=rp_ge[c.p.id].addCaption):(b.caption=rp_ge[c.p.id].editCaption,q="edit"),b.recreateForm||$(c).data("formProp")&&$.extend(rp_ge[$(this)[0].p.id],$(c).data("formProp")),t=!0,b.checkOnUpdate&&b.jqModal&&!b.modal&&(t=!1),G=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",H=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",I=$("<form name='FormPost' id='"+g+"' class='FormGrid' onSubmit='return false;' style='width:"+H+";height:"+G+";'></form>").data("disabled",!1),r?(J=E(rp_ge[$(this)[0].p.id].template),j=i):(J=$("<table id='"+h+"' class='EditTable ui-common-table'><tbody></tbody></table>"),j=i+"_2"),g="#"+$.jgrid.jqID(g),$(I).append("<div class='FormError "+f.error+"' style='display:none;'></div>"),$(I).append("<div class='tinfo topinfo'>"+rp_ge[c.p.id].topinfo+"</div>"),$(c.p.colModel).each(function(){var a=this.formoptions;m=Math.max(m,a?a.colpos||0:0),n=Math.max(n,a?a.rowpos||0:0)}),$(I).append(J),l=$(c).triggerHandler("jqGridAddEditBeforeInitData",[I,q]),void 0===l&&(l=!0),l&&$.isFunction(rp_ge[c.p.id].beforeInitData)&&(l=rp_ge[c.p.id].beforeInitData.call(c,I,q)),l!==!1&&(B(),v(a,c,J,m),K="rtl"===c.p.direction?!0:!1,L=K?"nData":"pData",M=K?"pData":"nData",N="<a id='"+L+"' class='fm-button "+f.button+"'><span class='"+f.icon_base+" "+e.icon_prev+"'></span></a>",O="<a id='"+M+"' class='fm-button "+f.button+"'><span class='"+f.icon_base+" "+e.icon_next+"'></span></a>",P="<a id='sData' class='fm-button "+f.button+"'>"+b.bSubmit+"</a>",Q="<a id='cData' class='fm-button "+f.button+"'>"+b.bCancel+"</a>",R="<table style='height:auto' class='EditTable ui-common-table' id='"+h+"_2'><tbody><tr><td colspan='2'><hr class='"+f.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(K?O+N:N+O)+"</td><td class='EditButton'>"+P+Q+"</td></tr>",R+="</tbody></table>",n>0&&(S=[],$.each($(J)[0].rows,function(a,b){S[a]=b}),S.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(S,function(a,b){$("tbody",J).append(b)})),b.gbox="#gbox_"+$.jgrid.jqID(d),T=!1,b.closeOnEscape===!0&&(b.closeOnEscape=!1,T=!0),r?($(I).find("#pData").replaceWith(N),$(I).find("#nData").replaceWith(O),$(I).find("#sData").replaceWith(P),$(I).find("#cData").replaceWith(Q),U=$("<div id="+h+"></div>").append(I)):U=$("<div></div>").append(I).append(R),$(I).append("<div class='binfo topinfo bottominfo'>"+rp_ge[c.p.id].bottominfo+"</div>"),$.jgrid.createModal(k,U,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(c.p.id),$("#gbox_"+$.jgrid.jqID(c.p.id))[0]),K&&($("#pData, #nData",i+"_2").css("float","right"),$(".EditButton",i+"_2").css("text-align","left")),rp_ge[c.p.id].topinfo&&$(".tinfo",g).show(),rp_ge[c.p.id].bottominfo&&$(".binfo",g).show(),U=null,R=null,$("#"+$.jgrid.jqID(k.themodal)).keydown(function(a){var d=a.target;if($(g).data("disabled")===!0)return!1;if(rp_ge[c.p.id].savekey[0]===!0&&a.which===rp_ge[c.p.id].savekey[1]&&"TEXTAREA"!==d.tagName)return $("#sData",i+"_2").trigger("click"),!1;if(27===a.which)return A()?(T&&$.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),!1):!1;if(rp_ge[c.p.id].navkeys[0]===!0){if("_empty"===$("#id_g",i).val())return!0;if(a.which===rp_ge[c.p.id].navkeys[1])return $("#pData",j).trigger("click"),!1;if(a.which===rp_ge[c.p.id].navkeys[2])return $("#nData",j).trigger("click"),!1}}),b.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(k.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(k.themodal)).unbind("click").click(function(){return A()?($.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),!1):!1})),b.saveicon=$.extend([!0,"left",e.icon_save],b.saveicon),b.closeicon=$.extend([!0,"left",e.icon_close],b.closeicon),b.saveicon[0]===!0&&$("#sData",j).addClass("right"===b.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+b.saveicon[2]+"'></span>"),b.closeicon[0]===!0&&$("#cData",j).addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+b.closeicon[2]+"'></span>"),(rp_ge[c.p.id].checkOnSubmit||rp_ge[c.p.id].checkOnUpdate)&&(P="<a id='sNew' class='fm-button "+f.button+"' style='z-index:1002'>"+b.bYes+"</a>",O="<a id='nNew' class='fm-button "+f.button+"' style='z-index:1002;margin-left:5px'>"+b.bNo+"</a>",Q="<a id='cNew' class='fm-button "+f.button+"' style='z-index:1002;margin-left:5px;'>"+b.bExit+"</a>",V=b.zIndex||999,V++,$("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+V+";display:none;'>&#160;"+"</div><div class='confirm ui-jqconfirm "+f.content+"' style='z-index:"+(V+1)+"'>"+b.saveData+"<br/><br/>"+P+O+Q+"</div>").insertAfter(g),$("#sNew","#"+$.jgrid.jqID(k.themodal)).click(function(){return y(),$(g).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(k.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(k.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(k.themodal)).hide(),$(g).data("disabled",!1),setTimeout(function(){$(":input:visible",g)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(k.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(k.themodal)).hide(),$(g).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),!1})),$(c).triggerHandler("jqGridAddEditInitializeForm",[$(g),q]),$.isFunction(rp_ge[c.p.id].onInitializeForm)&&rp_ge[c.p.id].onInitializeForm.call(c,$(g),q),"_empty"!==a&&rp_ge[c.p.id].viewPagerButtons?$("#pData,#nData",j).show():$("#pData,#nData",j).hide(),$(c).triggerHandler("jqGridAddEditBeforeShowForm",[$(g),q]),$.isFunction(rp_ge[c.p.id].beforeShowForm)&&rp_ge[c.p.id].beforeShowForm.call(c,$(g),q),F(),$("#"+$.jgrid.jqID(k.themodal)).data("onClose",rp_ge[c.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(k.themodal),{gbox:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass,focusField:b.focusField,onHide:function(a){var b=$("#editmod"+d)[0].style.height,e=$("#editmod"+d)[0].style.width;b.indexOf("px")>-1&&(b=parseFloat(b)),e.indexOf("px")>-1&&(e=parseFloat(e)),$(c).data("formProp",{top:parseFloat($(a.w).css("top")),left:parseFloat($(a.w).css("left")),width:e,height:b,dataheight:$(g).height(),datawidth:$(g).width()}),a.w.remove(),a.o&&a.o.remove()}}),t||$("."+$.jgrid.jqID(b.overlayClass)).click(function(){return A()?($.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),!1):!1}),$(".fm-button","#"+$.jgrid.jqID(k.themodal)).hover(function(){$(this).addClass(f.hover)},function(){$(this).removeClass(f.hover)}),$("#sData",j).click(function(){return o={},$(".FormError",g).hide(),u(),"_empty"===o[c.p.id+"_id"]?y():b.checkOnSubmit===!0?(p=z(o,rp_ge[c.p.id]._savedData),p?($(g).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(k.themodal)).show()):y()):y(),!1}),$("#cData",j).click(function(){return A()?($.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),!1):!1}),$("#nData",j).click(function(){var a,d;if(!A())return!1;if($(".FormError",g).hide(),a=D(),a[0]=parseInt(a[0],10),-1!==a[0]&&a[1][a[0]+1]){if($(c).triggerHandler("jqGridAddEditClickPgButtons",["next",$(g),a[1][a[0]]]),$.isFunction(b.onclickPgButtons)&&(d=b.onclickPgButtons.call(c,"next",$(g),a[1][a[0]]),void 0!==d&&d===!1))return!1;if($("#"+$.jgrid.jqID(a[1][a[0]+1])).hasClass(f.disabled))return!1;w(a[1][a[0]+1],c,g),$(c).jqGrid("setSelection",a[1][a[0]+1]),$(c).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(g),a[1][a[0]]]),$.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(c,"next",$(g),a[1][a[0]+1]),F(),C(a[0]+1,a)}return!1}),$("#pData",j).click(function(){var a,d;if(!A())return!1;if($(".FormError",g).hide(),a=D(),-1!==a[0]&&a[1][a[0]-1]){if($(c).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(g),a[1][a[0]]]),$.isFunction(b.onclickPgButtons)&&(d=b.onclickPgButtons.call(c,"prev",$(g),a[1][a[0]]),void 0!==d&&d===!1))return!1;if($("#"+$.jgrid.jqID(a[1][a[0]-1])).hasClass(f.disabled))return!1;w(a[1][a[0]-1],c,g),$(c).jqGrid("setSelection",a[1][a[0]-1]),$(c).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(g),a[1][a[0]]]),$.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(c,"prev",$(g),a[1][a[0]-1]),F(),C(a[0]-1,a)}return!1}),$(c).triggerHandler("jqGridAddEditAfterShowForm",[$(g),q]),$.isFunction(rp_ge[c.p.id].afterShowForm)&&rp_ge[c.p.id].afterShowForm.call(c,$(g),q),W=D(),C(W[0],W)))})},viewGridRow:function(a,b){var c=$.jgrid.getRegional(this[0],"view"),d=this[0].p.styleUI,e=$.jgrid.styleUI[d].formedit,f=$.jgrid.styleUI[d].common;return b=$.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},c,b||{}),rp_ge[$(this)[0].p.id]=b,this.each(function(){function p(){(rp_ge[c.p.id].closeOnEscape===!0||rp_ge[c.p.id].navkeys[0]===!0)&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(k.modalhead)).attr("tabindex","-1").focus()},0)}function q(a,c,d,e){var g,h,i,k,l,o,v,w,x,y,j=0,m=[],n=!1,p="<td class='CaptionTD form-view-label "+f.content+"' width='"+b.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset "+f.content+"'>&#160;</td>",q="",r="<td class='CaptionTD form-view-label "+f.content+"'>&#160;</td><td class='DataTD form-view-data "+f.content+"'>&#160;</td>",s=["integer","number","currency"],t=0,u=0;for(o=1;e>=o;o++)q+=1===o?p:r;return $(c.p.colModel).each(function(){h=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,h||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,s)?t=Math.max(t,parseInt(this.width,10)):u=Math.max(u,parseInt(this.width,10)))}),v=0!==t?t:0!==u?u:0,n=$(c).jqGrid("getInd",a),$(c.p.colModel).each(function(a){var b,f,o,p;g=this.name,w=!1,h=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,l=h?"style='display:none'":"",x="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==g&&"subgrid"!==g&&"rn"!==g&&x&&(k=n===!1?"":g===c.p.ExpandColumn&&c.p.treeGrid===!0?$("td:eq("+a+")",c.rows[n]).text():$("td:eq("+a+")",c.rows[n]).html(),w="right"===this.align&&0!==v?!0:!1,b=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),f=parseInt(b.rowpos,10)||j+1,o=parseInt(2*(parseInt(b.colpos,10)||1),10),b.rowabove&&(p=$("<tr><td class='contentinfo' colspan='"+2*e+"'>"+b.rowcontent+"</td></tr>"),$(d).append(p),p[0].rp=f),i=$(d).find("tr[rowpos="+f+"]"),0===i.length&&(i=$("<tr "+l+" rowpos='"+f+"'></tr>").addClass("FormData").attr("id","trv_"+g),$(i).append(q),$(d).append(i),i[0].rp=f),$("td:eq("+(o-2)+")",i[0]).html("<b>"+(void 0===b.label?c.p.colNames[a]:b.label)+"</b>"),$("td:eq("+(o-1)+")",i[0]).append("<span>"+k+"</span>").attr("id","v_"+g),w&&$("td:eq("+(o-1)+") span",i[0]).css({"text-align":"right",width:v+"px"}),m[j]=a,j++)}),j>0&&(y=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+a+"'/></td></tr>"),y[0].rp=j+99,$(d).append(y)),m}function r(a,b){var c,d,f,g,e=0;g=$(b).jqGrid("getInd",a,!0),g&&($("td",g).each(function(a){c=b.p.colModel[a].name,d=b.p.colModel[a].editrules&&b.p.colModel[a].editrules.edithidden===!0?!1:b.p.colModel[a].hidden===!0?!0:!1,"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(f=c===b.p.ExpandColumn&&b.p.treeGrid===!0?$(this).text():$(this).html(),c=$.jgrid.jqID("v_"+c),$("#"+c+" span","#"+h).html(f),d&&$("#"+c,"#"+h).parents("tr:first").hide(),e++)}),e>0&&$("#id_g","#"+h).val(a))}function s(a,b){var c=b[1].length-1;0===a?$("#pData","#"+h+"_2").addClass(f.disabled):void 0!==b[1][a-1]&&$("#"+$.jgrid.jqID(b[1][a-1])).hasClass(f.disabled)?$("#pData",h+"_2").addClass(f.disabled):$("#pData","#"+h+"_2").removeClass(f.disabled),a===c?$("#nData","#"+h+"_2").addClass(f.disabled):void 0!==b[1][a+1]&&$("#"+$.jgrid.jqID(b[1][a+1])).hasClass(f.disabled)?$("#nData",h+"_2").addClass(f.disabled):$("#nData","#"+h+"_2").removeClass(f.disabled)}function t(){var a=$(c).jqGrid("getDataIDs"),b=$("#id_g","#"+h).val(),d=$.inArray(b,a);return[d,a]}var d,g,h,i,j,k,l,m,n,o,u,v,w,x,y,z,A,B,C,D,E,F,G,c=this;c.grid&&a&&(d=c.p.id,g="ViewGrid_"+$.jgrid.jqID(d),h="ViewTbl_"+$.jgrid.jqID(d),i="ViewGrid_"+d,j="ViewTbl_"+d,k={themodal:"viewmod"+d,modalhead:"viewhd"+d,modalcontent:"viewcnt"+d,scrollelm:g},l=$.isFunction(rp_ge[c.p.id].beforeInitData)?rp_ge[c.p.id].beforeInitData:!1,m=!0,n=1,o=0,rp_ge[c.p.id].styleUI=c.p.styleUI||"jQueryUI",b.recreateForm||$(c).data("viewProp")&&$.extend(rp_ge[$(this)[0].p.id],$(c).data("viewProp")),u=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",v=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",w=$("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+v+";height:"+u+";'></form>"),x=$("<table id='"+j+"' class='EditTable ViewTable'><tbody></tbody></table>"),$(c.p.colModel).each(function(){var a=this.formoptions;
n=Math.max(n,a?a.colpos||0:0),o=Math.max(o,a?a.rowpos||0:0)}),$(w).append(x),l&&(m=l.call(c,w),void 0===m&&(m=!0)),m!==!1&&(q(a,c,x,n),y="rtl"===c.p.direction?!0:!1,z=y?"nData":"pData",A=y?"pData":"nData",B="<a id='"+z+"' class='fm-button "+f.button+"'><span class='"+f.icon_base+" "+e.icon_prev+"'></span></a>",C="<a id='"+A+"' class='fm-button "+f.button+"'><span class='"+f.icon_base+" "+e.icon_next+"'></span></a>",D="<a id='cData' class='fm-button "+f.button+"'>"+b.bClose+"</a>",o>0&&(E=[],$.each($(x)[0].rows,function(a,b){E[a]=b}),E.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(E,function(a,b){$("tbody",x).append(b)})),b.gbox="#gbox_"+$.jgrid.jqID(d),F=$("<div></div>").append(w).append("<table border='0' class='EditTable' id='"+h+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+b.labelswidth+"'>"+(y?C+B:B+C)+"</td><td class='EditButton'>"+D+"</td></tr></tbody></table>"),$.jgrid.createModal(k,F,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(c.p.id),$("#gview_"+$.jgrid.jqID(c.p.id))[0]),y&&($("#pData, #nData","#"+h+"_2").css("float","right"),$(".EditButton","#"+h+"_2").css("text-align","left")),b.viewPagerButtons||$("#pData, #nData","#"+h+"_2").hide(),F=null,$("#"+k.themodal).keydown(function(a){if(27===a.which)return rp_ge[c.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),!1;if(b.navkeys[0]===!0){if(a.which===b.navkeys[1])return $("#pData","#"+h+"_2").trigger("click"),!1;if(a.which===b.navkeys[2])return $("#nData","#"+h+"_2").trigger("click"),!1}}),b.closeicon=$.extend([!0,"left",e.icon_close],b.closeicon),b.closeicon[0]===!0&&$("#cData","#"+h+"_2").addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+b.closeicon[2]+"'></span>"),$.isFunction(b.beforeShowForm)&&b.beforeShowForm.call(c,$("#"+g)),$.jgrid.viewModal("#"+$.jgrid.jqID(k.themodal),{gbox:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,overlay:b.overlay,modal:b.modal,onHide:function(a){$(c).data("viewProp",{top:parseFloat($(a.w).css("top")),left:parseFloat($(a.w).css("left")),width:$(a.w).width(),height:$(a.w).height(),dataheight:$("#"+g).height(),datawidth:$("#"+g).width()}),a.w.remove(),a.o&&a.o.remove()}}),$(".fm-button:not(."+f.disabled+")","#"+h+"_2").hover(function(){$(this).addClass(f.hover)},function(){$(this).removeClass(f.hover)}),p(),$("#cData","#"+h+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(k.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:b.jqModal,onClose:b.onClose,removemodal:rp_ge[c.p.id].removemodal,formprop:!rp_ge[c.p.id].recreateForm,form:rp_ge[c.p.id].form}),!1}),$("#nData","#"+h+"_2").click(function(){$("#FormError","#"+h).hide();var a=t();return a[0]=parseInt(a[0],10),-1!==a[0]&&a[1][a[0]+1]&&($.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(c,"next",$("#"+g),a[1][a[0]]),r(a[1][a[0]+1],c),$(c).jqGrid("setSelection",a[1][a[0]+1]),$.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(c,"next",$("#"+g),a[1][a[0]+1]),s(a[0]+1,a)),p(),!1}),$("#pData","#"+h+"_2").click(function(){$("#FormError","#"+h).hide();var a=t();return-1!==a[0]&&a[1][a[0]-1]&&($.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(c,"prev",$("#"+g),a[1][a[0]]),r(a[1][a[0]-1],c),$(c).jqGrid("setSelection",a[1][a[0]-1]),$.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(c,"prev",$("#"+g),a[1][a[0]-1]),s(a[0]-1,a)),p(),!1}),G=t(),s(G[0],G)))})},delGridRow:function(a,b){var c=$.jgrid.getRegional(this[0],"del"),d=this[0].p.styleUI,e=$.jgrid.styleUI[d].formedit,f=$.jgrid.styleUI[d].common;return b=$.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},c,b||{}),rp_ge[$(this)[0].p.id]=b,this.each(function(){var m,n,o,p,d,g,h,i,j,k,l,q,r,s,t,u,v,w,c=this;if(c.grid&&a){if(d=$.isFunction(rp_ge[c.p.id].beforeShowForm),g=$.isFunction(rp_ge[c.p.id].afterShowForm),h=$.isFunction(rp_ge[c.p.id].beforeInitData)?rp_ge[c.p.id].beforeInitData:!1,i=c.p.id,j={},k=!0,l="DelTbl_"+$.jgrid.jqID(i),q="DelTbl_"+i,r={themodal:"delmod"+i,modalhead:"delhd"+i,modalcontent:"delcnt"+i,scrollelm:l},rp_ge[c.p.id].styleUI=c.p.styleUI||"jQueryUI",$.isArray(a)&&(a=a.join()),void 0!==$("#"+$.jgrid.jqID(r.themodal))[0]){if(h&&(k=h.call(c,$("#"+l)),void 0===k&&(k=!0)),k===!1)return;$("#DelData>td","#"+l).text(a),$("#DelError","#"+l).hide(),rp_ge[c.p.id].processing===!0&&(rp_ge[c.p.id].processing=!1,$("#dData","#"+l).removeClass(f.active)),d&&rp_ge[c.p.id].beforeShowForm.call(c,$("#"+l)),$.jgrid.viewModal("#"+$.jgrid.jqID(r.themodal),{gbox:"#gbox_"+$.jgrid.jqID(i),jqm:rp_ge[c.p.id].jqModal,jqM:!1,overlay:rp_ge[c.p.id].overlay,modal:rp_ge[c.p.id].modal}),g&&rp_ge[c.p.id].afterShowForm.call(c,$("#"+l))}else{if(s=isNaN(rp_ge[c.p.id].dataheight)?rp_ge[c.p.id].dataheight:rp_ge[c.p.id].dataheight+"px",t=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",u="<div id='"+q+"' class='formdata' style='width:"+t+";overflow:auto;position:relative;height:"+s+";'>",u+="<table class='DelTable'><tbody>",u+="<tr id='DelError' style='display:none'><td class='"+f.error+"'></td></tr>",u+="<tr id='DelData' style='display:none'><td >"+a+"</td></tr>",u+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[c.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",u+="</tbody></table></div>",v="<a id='dData' class='fm-button "+f.button+"'>"+b.bSubmit+"</a>",w="<a id='eData' class='fm-button "+f.button+"'>"+b.bCancel+"</a>",u+="<table class='EditTable ui-common-table' id='"+l+"_2'><tbody><tr><td><hr class='"+f.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+v+"&#160;"+w+"</td></tr></tbody></table>",b.gbox="#gbox_"+$.jgrid.jqID(i),$.jgrid.createModal(r,u,rp_ge[c.p.id],"#gview_"+$.jgrid.jqID(c.p.id),$("#gview_"+$.jgrid.jqID(c.p.id))[0]),h&&(k=h.call(c,$(u)),void 0===k&&(k=!0)),k===!1)return;$(".fm-button","#"+l+"_2").hover(function(){$(this).addClass(f.hover)},function(){$(this).removeClass(f.hover)}),b.delicon=$.extend([!0,"left",e.icon_del],rp_ge[c.p.id].delicon),b.cancelicon=$.extend([!0,"left",e.icon_cancel],rp_ge[c.p.id].cancelicon),b.delicon[0]===!0&&$("#dData","#"+l+"_2").addClass("right"===b.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+b.delicon[2]+"'></span>"),b.cancelicon[0]===!0&&$("#eData","#"+l+"_2").addClass("right"===b.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+b.cancelicon[2]+"'></span>"),$("#dData","#"+l+"_2").click(function(){var d,g,h,a=[!0,""],e=$("#DelData>td","#"+l).text();if(j={},$.isFunction(rp_ge[c.p.id].onclickSubmit)&&(j=rp_ge[c.p.id].onclickSubmit.call(c,rp_ge[c.p.id],e)||{}),$.isFunction(rp_ge[c.p.id].beforeSubmit)&&(a=rp_ge[c.p.id].beforeSubmit.call(c,e)),a[0]&&!rp_ge[c.p.id].processing){if(rp_ge[c.p.id].processing=!0,o=c.p.prmNames,m=$.extend({},rp_ge[c.p.id].delData,j),p=o.oper,m[p]=o.deloper,n=o.id,e=String(e).split(","),!e.length)return!1;for(d in e)e.hasOwnProperty(d)&&(e[d]=$.jgrid.stripPref(c.p.idPrefix,e[d]));m[n]=e.join(),$(this).addClass(f.active),g=$.extend({url:rp_ge[c.p.id].url||$(c).jqGrid("getGridParam","editurl"),type:rp_ge[c.p.id].mtype,data:$.isFunction(rp_ge[c.p.id].serializeDelData)?rp_ge[c.p.id].serializeDelData.call(c,m):m,complete:function(d,g){var h;if($("#dData","#"+l+"_2").removeClass(f.active),d.status>=300&&304!==d.status?(a[0]=!1,a[1]=$.isFunction(rp_ge[c.p.id].errorTextFormat)?rp_ge[c.p.id].errorTextFormat.call(c,d):g+" Status: '"+d.statusText+"'. Error code: "+d.status):$.isFunction(rp_ge[c.p.id].afterSubmit)&&(a=rp_ge[c.p.id].afterSubmit.call(c,d,m)),a[0]===!1)$("#DelError>td","#"+l).html(a[1]),$("#DelError","#"+l).show();else{if(rp_ge[c.p.id].reloadAfterSubmit&&"local"!==c.p.datatype)$(c).trigger("reloadGrid");else{if(c.p.treeGrid===!0)try{$(c).jqGrid("delTreeNode",c.p.idPrefix+e[0])}catch(j){}else for(h=0;h<e.length;h++)$(c).jqGrid("delRowData",c.p.idPrefix+e[h]);c.p.selrow=null,c.p.selarrrow=[]}$.isFunction(rp_ge[c.p.id].afterComplete)&&setTimeout(function(){rp_ge[c.p.id].afterComplete.call(c,d,e)},500)}rp_ge[c.p.id].processing=!1,a[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(r.themodal),{gb:"#gbox_"+$.jgrid.jqID(i),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose})}},$.jgrid.ajaxOptions,rp_ge[c.p.id].ajaxDelOptions),g.url||rp_ge[c.p.id].useDataProxy||($.isFunction(c.p.dataProxy)?rp_ge[c.p.id].useDataProxy=!0:(a[0]=!1,a[1]+=" "+$.jgrid.getRegional(c,"errors.nourl"))),a[0]&&(rp_ge[c.p.id].useDataProxy?(h=c.p.dataProxy.call(c,g,"del_"+c.p.id),void 0===h&&(h=[!0,""]),h[0]===!1?(a[0]=!1,a[1]=h[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(r.themodal),{gb:"#gbox_"+$.jgrid.jqID(i),jqm:b.jqModal,onClose:rp_ge[c.p.id].onClose})):"clientArray"===g.url?(m=g.data,g.complete({status:200,statusText:""},"")):$.ajax(g))}return a[0]===!1&&($("#DelError>td","#"+l).html(a[1]),$("#DelError","#"+l).show()),!1}),$("#eData","#"+l+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(r.themodal),{gb:"#gbox_"+$.jgrid.jqID(i),jqm:rp_ge[c.p.id].jqModal,onClose:rp_ge[c.p.id].onClose}),!1}),d&&rp_ge[c.p.id].beforeShowForm.call(c,$("#"+l)),$.jgrid.viewModal("#"+$.jgrid.jqID(r.themodal),{gbox:"#gbox_"+$.jgrid.jqID(i),jqm:rp_ge[c.p.id].jqModal,overlay:rp_ge[c.p.id].overlay,modal:rp_ge[c.p.id].modal}),g&&rp_ge[c.p.id].afterShowForm.call(c,$("#"+l))}rp_ge[c.p.id].closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(r.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(a,b,c,d,e,f,g){var h=$.jgrid.getRegional(this[0],"nav"),i=this[0].p.styleUI,j=$.jgrid.styleUI[i].navigator,k=$.jgrid.styleUI[i].common;return b=$.extend({edit:!1,editicon:j.icon_edit_nav,add:!1,addicon:j.icon_add_nav,del:!1,delicon:j.icon_del_nav,search:!1,searchicon:j.icon_search_nav,refresh:!0,refreshicon:j.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:j.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},h,b||{}),this.each(function(){var m,n,o,j,l,q,p,r,s,t,w,x,u,v;if(!this.p.navGrid&&(j={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},l=this,l.grid&&"string"==typeof a)){for($(l).data("navGrid")||$(l).data("navGrid",b),o=$(l).data("navGrid"),l.p.force_regional&&(o=$.extend(o,h)),void 0===$("#"+j.themodal)[0]&&(o.alerttop||o.alertleft||(void 0!==window.innerWidth?(o.alertleft=window.innerWidth,o.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(o.alertleft=document.documentElement.clientWidth,o.alerttop=document.documentElement.clientHeight):(o.alertleft=1024,o.alerttop=768),o.alertleft=o.alertleft/2-parseInt(o.alertwidth,10)/2,o.alerttop=o.alerttop/2-25),$.jgrid.createModal(j,"<div>"+o.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqModal:!0,drag:!0,resize:!0,caption:o.alertcap,top:o.alerttop,left:o.alertleft,width:o.alertwidth,height:o.alertheight,closeOnEscape:o.closeOnEscape,zIndex:o.alertzIndex,styleUI:l.p.styleUI},"#gview_"+$.jgrid.jqID(l.p.id),$("#gbox_"+$.jgrid.jqID(l.p.id))[0],!0)),p=1,r=function(){$(this).hasClass(k.disabled)||$(this).addClass(k.hover)},s=function(){$(this).removeClass(k.hover)},o.cloneToTop&&l.p.toppager&&(p=2),q=0;p>q;q++)u=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),v="<td class='ui-pg-button "+k.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>",0===q?(w=a,x=l.p.id,w===l.p.toppager&&(x+="_top",p=1)):(w=l.p.toppager,x=l.p.id+"_top"),"rtl"===l.p.direction&&$(u).attr("dir","rtl").css("float","right"),d=d||{},o.add&&(t=$("<td class='ui-pg-button "+k.cornerall+"'></td>"),$(t).append("<div class='ui-pg-div'><span class='"+k.icon_base+" "+o.addicon+"'></span>"+o.addtext+"</div>"),$("tr",u).append(t),$(t,u).attr({title:o.addtitle||"",id:d.id||"add_"+x}).click(function(){return $(this).hasClass(k.disabled)||($.isFunction(o.addfunc)?o.addfunc.call(l):$(l).jqGrid("editGridRow","new",d)),!1}).hover(r,s),t=null),c=c||{},o.edit&&(t=$("<td class='ui-pg-button "+k.cornerall+"'></td>"),$(t).append("<div class='ui-pg-div'><span class='"+k.icon_base+" "+o.editicon+"'></span>"+o.edittext+"</div>"),$("tr",u).append(t),$(t,u).attr({title:o.edittitle||"",id:c.id||"edit_"+x}).click(function(){if(!$(this).hasClass(k.disabled)){var a=l.p.selrow;a?$.isFunction(o.editfunc)?o.editfunc.call(l,a):$(l).jqGrid("editGridRow",a,c):($.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(r,s),t=null),g=g||{},o.view&&(t=$("<td class='ui-pg-button "+k.cornerall+"'></td>"),$(t).append("<div class='ui-pg-div'><span class='"+k.icon_base+" "+o.viewicon+"'></span>"+o.viewtext+"</div>"),$("tr",u).append(t),$(t,u).attr({title:o.viewtitle||"",id:g.id||"view_"+x}).click(function(){if(!$(this).hasClass(k.disabled)){var a=l.p.selrow;a?$.isFunction(o.viewfunc)?o.viewfunc.call(l,a):$(l).jqGrid("viewGridRow",a,g):($.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(r,s),t=null),e=e||{},o.del&&(t=$("<td class='ui-pg-button "+k.cornerall+"'></td>"),$(t).append("<div class='ui-pg-div'><span class='"+k.icon_base+" "+o.delicon+"'></span>"+o.deltext+"</div>"),$("tr",u).append(t),$(t,u).attr({title:o.deltitle||"",id:e.id||"del_"+x}).click(function(){if(!$(this).hasClass(k.disabled)){var a;l.p.multiselect?(a=l.p.selarrrow,0===a.length&&(a=null)):a=l.p.selrow,a?$.isFunction(o.delfunc)?o.delfunc.call(l,a):$(l).jqGrid("delGridRow",a,e):($.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(r,s),t=null),(o.add||o.edit||o.del||o.view)&&$("tr",u).append(v),f=f||{},o.search&&(t=$("<td class='ui-pg-button "+k.cornerall+"'></td>"),$(t).append("<div class='ui-pg-div'><span class='"+k.icon_base+" "+o.searchicon+"'></span>"+o.searchtext+"</div>"),$("tr",u).append(t),$(t,u).attr({title:o.searchtitle||"",id:f.id||"search_"+x}).click(function(){return $(this).hasClass(k.disabled)||($.isFunction(o.searchfunc)?o.searchfunc.call(l,f):$(l).jqGrid("searchGrid",f)),!1}).hover(r,s),f.showOnLoad&&f.showOnLoad===!0&&$(t,u).click(),t=null),o.refresh&&(t=$("<td class='ui-pg-button "+k.cornerall+"'></td>"),$(t).append("<div class='ui-pg-div'><span class='"+k.icon_base+" "+o.refreshicon+"'></span>"+o.refreshtext+"</div>"),$("tr",u).append(t),$(t,u).attr({title:o.refreshtitle||"",id:"refresh_"+x}).click(function(){if(!$(this).hasClass(k.disabled)){$.isFunction(o.beforeRefresh)&&o.beforeRefresh.call(l),l.p.search=!1,l.p.resetsearch=!0;try{if("currentfilter"!==o.refreshstate){var a=l.p.id;l.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(a)).jqFilter("resetFilter")}catch(b){}$.isFunction(l.clearToolbar)&&l.clearToolbar.call(l,!1)}}catch(c){}switch(o.refreshstate){case"firstpage":$(l).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(l).trigger("reloadGrid",[{current:!0}])}$.isFunction(o.afterRefresh)&&o.afterRefresh.call(l)}return!1}).hover(r,s),t=null),n=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[i].base.entrieBox+"' style='font-size:"+n+";visibility:hidden;' ></div>"),m=$(u).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),l.p._nvtd&&(o.dropmenu?(u=null,$(l).jqGrid("_buildNavMenu",w,x,b,c,d,e,f,g)):m>l.p._nvtd[0]?(l.p.responsive?(u=null,$(l).jqGrid("_buildNavMenu",w,x,b,c,d,e,f,g)):$(w+"_"+o.position,w).append(u).width(m),l.p._nvtd[0]=m):$(w+"_"+o.position,w).append(u),l.p._nvtd[1]=m),l.p.navGrid=!0;l.p.storeNavOptions&&(l.p.navOptions=o,l.p.editOptions=c,l.p.addOptions=d,l.p.delOptions=e,l.p.searchOptions=f,l.p.viewOptions=g,l.p.navButtons=[])}})},navButtonAdd:function(a,b){var c=this[0].p.styleUI,d=$.jgrid.styleUI[c].navigator;return b=$.extend({caption:"newButton",title:"",buttonicon:d.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},b||{}),this.each(function(){var d,e,f,g,h,i,j,k,l,m;if(this.grid)if("string"==typeof a&&0!==a.indexOf("#")&&(a="#"+$.jgrid.jqID(a)),d=$(".navtable",a)[0],e=this,f=$.jgrid.styleUI[c].common.disabled,g=$.jgrid.styleUI[c].common.hover,h=$.jgrid.styleUI[c].common.cornerall,i=$.jgrid.styleUI[c].common.icon_base,e.p.storeNavOptions&&!b.internal&&e.p.navButtons.push([a,b]),d){if(b.id&&void 0!==$("#"+$.jgrid.jqID(b.id),d)[0])return;j=$("<td></td>"),"NONE"===b.buttonicon.toString().toUpperCase()?$(j).addClass("ui-pg-button "+h).append("<div class='ui-pg-div'>"+b.caption+"</div>"):$(j).addClass("ui-pg-button "+h).append("<div class='ui-pg-div'><span class='"+i+" "+b.buttonicon+"'></span>"+b.caption+"</div>"),b.id&&$(j).attr("id",b.id),"first"===b.position?0===d.rows[0].cells.length?$("tr",d).append(j):$("tr td:eq(0)",d).before(j):$("tr",d).append(j),$(j,d).attr("title",b.title||"").click(function(a){return $(this).hasClass(f)||$.isFunction(b.onClickButton)&&b.onClickButton.call(e,a),!1}).hover(function(){$(this).hasClass(f)||$(this).addClass(g)},function(){$(this).removeClass(g)})}else d=$(".dropdownmenu",a)[0],d&&(k=$(d).val(),l=b.id||$.jgrid.randId(),m=$('<li class="ui-menu-item" role="presentation"><a class="'+h+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(b.caption||b.title)+"</a></li>"),k&&("first"===b.position?$("#"+k).prepend(m):$("#"+k).append(m),$(m).on("click",function(a){return $(this).hasClass(f)||($("#"+k).hide(),$.isFunction(b.onClickButton)&&b.onClickButton.call(e,a)),!1}).find("a").hover(function(){$(this).hasClass(f)||$(this).addClass(g)},function(){$(this).removeClass(g)})))})},navSeparatorAdd:function(a,b){var c=this[0].p.styleUI,d=$.jgrid.styleUI[c].common;return b=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},b||{}),this.each(function(){if(this.grid){"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+$.jgrid.jqID(a));var e,f,c=$(".navtable",a)[0];this.p.storeNavOptions&&this.p.navButtons.push([a,b]),c?(e="<td class='ui-pg-button "+d.disabled+"' style='width:4px;'><span class='"+b.sepclass+"'></span>"+b.sepcontent+"</td>","first"===b.position?0===c.rows[0].cells.length?$("tr",c).append(e):$("tr td:eq(0)",c).before(e):$("tr",c).append(e)):(c=$(".dropdownmenu",a)[0],e="<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",c&&(f=$(c).val(),f&&("first"===b.position?$("#"+f).prepend(e):$("#"+f).append(e))))}})},_buildNavMenu:function(a,b,c,d,e,f,g,h){return this.each(function(){var r,s,i=this,j=$.jgrid.getRegional(i,"nav"),k=i.p.styleUI,m=($.jgrid.styleUI[k].navigator,$.jgrid.styleUI[k].filter),n=$.jgrid.styleUI[k].common,o="form_menu_"+$.jgrid.randId(),p=c.navButtonText?c.navButtonText:j.selectcaption||"Actions",q="<button class='dropdownmenu "+n.button+"' value='"+o+"'>"+p+"</button>";$(a+"_"+c.position,a).append(q),r={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},s=function(){var j,k,a=$(".ui-jqgrid-view").css("font-size")||"11px",l=$('<ul id="'+o+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+a+'"></ul>');c.add&&(e=e||{},j=e.id||"add_"+b,k=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+j+'">'+(c.addtext||c.addtitle)+"</a></li>").click(function(){return $(this).hasClass(n.disabled)||($.isFunction(c.addfunc)?c.addfunc.call(i):$(i).jqGrid("editGridRow","new",e),$(l).hide()),!1}),$(l).append(k)),c.edit&&(d=d||{},j=d.id||"edit_"+b,k=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+j+'">'+(c.edittext||c.edittitle)+"</a></li>").click(function(){if(!$(this).hasClass(n.disabled)){var a=i.p.selrow;a?$.isFunction(c.editfunc)?c.editfunc.call(i,a):$(i).jqGrid("editGridRow",a,d):($.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+$.jgrid.jqID(i.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(l).hide()}return!1}),$(l).append(k)),c.view&&(h=h||{},j=h.id||"view_"+b,k=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+j+'">'+(c.viewtext||c.viewtitle)+"</a></li>").click(function(){if(!$(this).hasClass(n.disabled)){var a=i.p.selrow;a?$.isFunction(c.editfunc)?c.viewfunc.call(i,a):$(i).jqGrid("viewGridRow",a,h):($.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+$.jgrid.jqID(i.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(l).hide()}return!1}),$(l).append(k)),c.del&&(f=f||{},j=f.id||"del_"+b,k=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+j+'">'+(c.deltext||c.deltitle)+"</a></li>").click(function(){if(!$(this).hasClass(n.disabled)){var a;i.p.multiselect?(a=i.p.selarrrow,0===a.length&&(a=null)):a=i.p.selrow,a?$.isFunction(c.delfunc)?c.delfunc.call(i,a):$(i).jqGrid("delGridRow",a,f):($.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+$.jgrid.jqID(i.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(l).hide()}return!1}),$(l).append(k)),(c.add||c.edit||c.del||c.view)&&$(l).append("<li class='ui-menu-item "+n.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),c.search&&(g=g||{},j=g.id||"search_"+b,k=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+j+'">'+(c.searchtext||c.searchtitle)+"</a></li>").click(function(){return $(this).hasClass(n.disabled)||($.isFunction(c.searchfunc)?c.searchfunc.call(i,g):$(i).jqGrid("searchGrid",g),$(l).hide()),!1}),$(l).append(k),g.showOnLoad&&g.showOnLoad===!0&&$(k).click()),c.refresh&&(j=g.id||"search_"+b,k=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+j+'">'+(c.refreshtext||c.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(n.disabled)){$.isFunction(c.beforeRefresh)&&c.beforeRefresh.call(i),i.p.search=!1,i.p.resetsearch=!0;try{if("currentfilter"!==c.refreshstate){var a=i.p.id;i.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(a)).jqFilter("resetFilter")}catch(b){}$.isFunction(i.clearToolbar)&&i.clearToolbar.call(i,!1)}}catch(d){}switch(c.refreshstate){case"firstpage":$(i).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(i).trigger("reloadGrid",[{current:!0}])}$.isFunction(c.afterRefresh)&&c.afterRefresh.call(i),$(l).hide()}return!1}),$(l).append(k)),$(l).hide(),$("body").append(l),$("#"+o).addClass("ui-menu "+m.menu_widget),$("#"+o+" > li > a").hover(function(){$(this).addClass(n.hover)},function(){$(this).removeClass(n.hover)})},s(),$(".dropdownmenu",a+"_"+c.position).on("click",function(a){var b=$(this).offset(),c=b.left,d=parseInt(b.top),e=$(this).val();$("#"+e).show().css({top:d-($("#"+e).height()+10)+"px",left:c+"px"}),a.stopPropagation()}),$("body").on("click",function(a){$(a.target).hasClass("dropdownmenu")||$("#"+o).hide()})})},GridToForm:function(a,b){return this.each(function(){var d,e,c=this;if(c.grid&&(e=$(c).jqGrid("getRowData",a)))for(d in e)e.hasOwnProperty(d)&&($("[name="+$.jgrid.jqID(d)+"]",b).is("input:radio")||$("[name="+$.jgrid.jqID(d)+"]",b).is("input:checkbox")?$("[name="+$.jgrid.jqID(d)+"]",b).each(function(){$(this).val()==e[d]?$(this)[c.p.useProp?"prop":"attr"]("checked",!0):$(this)[c.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(d)+"]",b).val(e[d]))})},FormToGrid:function(a,b,c,d){return this.each(function(){var f,g,e=this;e.grid&&(c||(c="set"),d||(d="first"),f=$(b).serializeArray(),g={},$.each(f,function(a,b){g[b.name]=b.value}),"add"===c?$(e).jqGrid("addRowData",a,g,d):"set"===c&&$(e).jqGrid("setRowData",a,g))})}}),$.jgrid.extend({groupingSetup:function(){return this.each(function(){var b,c,d,a=this,e=a.p.colModel,f=a.p.groupingView,g=$.jgrid.styleUI[a.p.styleUI||"jQueryUI"].grouping;if(null===f||"object"!=typeof f&&!$.isFunction(f))a.p.grouping=!1;else if(f.plusicon||(f.plusicon=g.icon_plus),f.minusicon||(f.minusicon=g.icon_minus),f.groupField.length){for(void 0===f.visibiltyOnNextGrouping&&(f.visibiltyOnNextGrouping=[]),f.lastvalues=[],f._locgr||(f.groups=[]),f.counters=[],b=0;b<f.groupField.length;b++)f.groupOrder[b]||(f.groupOrder[b]="asc"),f.groupText[b]||(f.groupText[b]="{0}"),"boolean"!=typeof f.groupColumnShow[b]&&(f.groupColumnShow[b]=!0),"boolean"!=typeof f.groupSummary[b]&&(f.groupSummary[b]=!1),f.groupSummaryPos[b]||(f.groupSummaryPos[b]="footer"),f.groupColumnShow[b]===!0?(f.visibiltyOnNextGrouping[b]=!0,$(a).jqGrid("showCol",f.groupField[b])):(f.visibiltyOnNextGrouping[b]=$("#"+$.jgrid.jqID(a.p.id+"_"+f.groupField[b])).is(":visible"),$(a).jqGrid("hideCol",f.groupField[b]));for(f.summary=[],f.hideFirstGroupCol&&$.isArray(f.formatDisplayField)&&!$.isFunction(f.formatDisplayField[0])&&(f.formatDisplayField[0]=function(a){return a}),c=0,d=e.length;d>c;c++)f.hideFirstGroupCol&&(e[c].hidden||f.groupField[0]!==e[c].name||(e[c].formatter=function(){return""})),e[c].summaryType&&(e[c].summaryDivider?f.summary.push({nm:e[c].name,st:e[c].summaryType,v:"",sd:e[c].summaryDivider,vd:"",sr:e[c].summaryRound,srt:e[c].summaryRoundType||"round"}):f.summary.push({nm:e[c].name,st:e[c].summaryType,v:"",sr:e[c].summaryRound,srt:e[c].summaryRoundType||"round"}))}else a.p.grouping=!1})},groupingPrepare:function(a,b){return this.each(function(){var e,h,i,j,k,c=this.p.groupingView,d=this,f=function(){$.isFunction(this.st)?this.v=this.st.call(d,this.v,this.nm,a):(this.v=$(d).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,a),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=$(d).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,a)))},g=c.groupField.length,l=0;for(e=0;g>e;e++)h=c.groupField[e],j=c.displayField[e],i=a[h],k=null==j?null:a[j],null==k&&(k=i),void 0!==i&&(0===b?(c.groups.push({idx:e,dataIndex:h,value:i,displayValue:k,startRow:b,cnt:1,summary:[]}),c.lastvalues[e]=i,c.counters[e]={cnt:1,pos:c.groups.length-1,summary:$.extend(!0,[],c.summary)},$.each(c.counters[e].summary,f),c.groups[c.counters[e].pos].summary=c.counters[e].summary):"object"==typeof i||($.isArray(c.isInTheSameGroup)&&$.isFunction(c.isInTheSameGroup[e])?c.isInTheSameGroup[e].call(d,c.lastvalues[e],i,e,c):c.lastvalues[e]===i)?1===l?(c.groups.push({idx:e,dataIndex:h,value:i,displayValue:k,startRow:b,cnt:1,summary:[]}),c.lastvalues[e]=i,c.counters[e]={cnt:1,pos:c.groups.length-1,summary:$.extend(!0,[],c.summary)},$.each(c.counters[e].summary,f),c.groups[c.counters[e].pos].summary=c.counters[e].summary):(c.counters[e].cnt+=1,c.groups[c.counters[e].pos].cnt=c.counters[e].cnt,$.each(c.counters[e].summary,f),c.groups[c.counters[e].pos].summary=c.counters[e].summary):(c.groups.push({idx:e,dataIndex:h,value:i,displayValue:k,startRow:b,cnt:1,summary:[]}),c.lastvalues[e]=i,l=1,c.counters[e]={cnt:1,pos:c.groups.length-1,summary:$.extend(!0,[],c.summary)},$.each(c.counters[e].summary,f),c.groups[c.counters[e].pos].summary=c.counters[e].summary))}),this},groupingToggle:function(a){return this.each(function(){var m,n,f,g,h,i,j,k,l,o,p,q,r,s,b=this,c=b.p.groupingView,d=a.split("_"),e=parseInt(d[d.length-2],10);if(d.splice(d.length-2,2),f=d.join("_"),g=c.minusicon,h=c.plusicon,i=$("#"+$.jgrid.jqID(a)),j=i.length?i[0].nextSibling:null,k=$("#"+$.jgrid.jqID(a)+" span."+"tree-wrap-"+b.p.direction),l=function(a){var b=$.map(a.split(" "),function(a){return a.substring(0,f.length+1)===f+"_"?parseInt(a.substring(f.length+1),10):void 0});return b.length>0?b[0]:void 0},o=!1,p=!1,q=b.p.frozenColumns?b.p.id+"_frozen":!1,r=q?$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(q)):!1,s=r&&r.length?r[0].nextSibling:null,k.hasClass(g)){if(c.showSummaryOnHide){if(j)for(;j&&(m=l(j.className),!(void 0!==m&&e>=m));)$(j).hide(),j=j.nextSibling,q&&($(s).hide(),s=s.nextSibling)}else if(j)for(;j&&(m=l(j.className),!(void 0!==m&&e>=m));)$(j).hide(),j=j.nextSibling,q&&($(s).hide(),s=s.nextSibling);k.removeClass(g).addClass(h),o=!0}else{if(j)for(n=void 0;j;){if(m=l(j.className),void 0===n&&(n=void 0===m),p=$(j).hasClass("ui-subgrid")&&$(j).hasClass("ui-sg-collapsed"),void 0!==m){if(e>=m)break;m===e+1&&(p||($(j).show().find(">td>span.tree-wrap-"+b.p.direction).removeClass(g).addClass(h),q&&$(s).show().find(">td>span.tree-wrap-"+b.p.direction).removeClass(g).addClass(h)))}else n&&(p||($(j).show(),q&&$(s).show()));j=j.nextSibling,q&&(s=s.nextSibling)}k.removeClass(h).addClass(g)}$(b).triggerHandler("jqGridGroupingClickGroup",[a,o]),$.isFunction(b.p.onClickGroup)&&b.p.onClickGroup.call(b,a,o)}),!1},groupingRender:function(a,b,c,d){return this.each(function(){function q(a,b,c){var e,f,d=!1;if(0===b)d=c[a];else if(f=c[a].idx,0===f)d=c[a];else for(e=a;e>=0;e--)if(c[e].idx===f-b){d=c[e];break}return d}function r(a,c,d,f){var i,l,m,n,g=q(a,c,d),h=e.p.colModel,j=g.cnt,k="";for(l=f;b>l;l++)m="<td "+e.formatCol(l,1,"")+">&#160;</td>",n="{0}",$.each(g.summary,function(){if(this.nm===h[l].name){h[l].summaryTpl&&(n=h[l].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&j>0&&(this.v=this.v/j));try{this.groupCount=g.cnt,this.groupIndex=g.dataIndex,this.groupValue=g.value,i=e.formatter("",this.v,l,this)}catch(a){i=this.v}return m="<td "+e.formatCol(l,1,"")+">"+$.jgrid.template(n,i)+"</td>",!1}}),k+=m;return k}var i,j,l,p,t,s,e=this,f=e.p.groupingView,g="",h="",k=f.groupCollapse?f.plusicon:f.minusicon,m=[],n=f.groupField.length,o=$.jgrid.styleUI[e.p.styleUI||"jQueryUI"].common;k=k+" tree-wrap-"+e.p.direction,$.each(e.p.colModel,function(a,b){var c;for(c=0;n>c;c++)if(f.groupField[c]===b.name){m[c]=a;break}}),p=0,s=$.makeArray(f.groupSummary),s.reverse(),t=e.p.multiselect?' colspan="2"':"",$.each(f.groups,function(q,u){var w,x,z,A,y,B,C,D,E,F;if(f._locgr&&!(u.startRow+u.cnt>(c-1)*d&&u.startRow<c*d))return!0;p++,j=e.p.id+"ghead_"+u.idx,i=j+"_"+q,h="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+o.icon_base+" "+k+"' onclick=\"jQuery('#"+$.jgrid.jqID(e.p.id)+"').jqGrid('groupingToggle','"+i+"');return false;\"></span>";try{$.isArray(f.formatDisplayField)&&$.isFunction(f.formatDisplayField[u.idx])?(u.displayValue=f.formatDisplayField[u.idx].call(e,u.displayValue,u.value,e.p.colModel[m[u.idx]],u.idx,f),l=u.displayValue):l=e.formatter(i,u.displayValue,m[u.idx],u.value)}catch(v){l=u.displayValue}if(w="",w=$.isFunction(f.groupText[u.idx])?f.groupText[u.idx].call(e,l,u.cnt,u.summary):$.jgrid.template(f.groupText[u.idx],l,u.cnt,u.summary),"string"!=typeof w&&"number"!=typeof w&&(w=l),"header"===f.groupSummaryPos[u.idx]?(g+='<tr id="'+i+'"'+(f.groupCollapse&&u.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+o.content+" jqgroup ui-row-"+e.p.direction+" "+j+'"><td style="padding-left:'+12*u.idx+"px;"+'"'+t+">"+h+w+"</td>",g+=r(q,0,f.groups,f.groupColumnShow[u.idx]===!1?""===t?2:3:""===t?1:2),g+="</tr>"):g+='<tr id="'+i+'"'+(f.groupCollapse&&u.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+o.content+" jqgroup ui-row-"+e.p.direction+" "+j+'"><td style="padding-left:'+12*u.idx+"px;"+'" colspan="'+(f.groupColumnShow[u.idx]===!1?b-1:b)+'">'+h+w+"</td></tr>",x=n-1===u.idx){for(y=f.groups[q+1],B=0,C=u.startRow,D=void 0!==y?y.startRow:f.groups[q].startRow+f.groups[q].cnt,f._locgr&&(B=(c-1)*d,B>u.startRow&&(C=B)),z=C;D>z&&a[z-B];z++)g+=a[z-B].join("");if("header"!==f.groupSummaryPos[u.idx]){if(void 0!==y){for(E=0;E<f.groupField.length&&y.dataIndex!==f.groupField[E];E++);p=f.groupField.length-E
}for(A=0;p>A;A++)s[A]&&(F="",f.groupCollapse&&!f.showSummaryOnHide&&(F=' style="display:none;"'),g+="<tr"+F+' jqfootlevel="'+(u.idx-A)+'" role="row" class="'+o.content+" jqfoot ui-row-"+e.p.direction+'">',g+=r(q,A,f.groups,0),g+="</tr>");p=E}}}),$("#"+$.jgrid.jqID(e.p.id)+" tbody:first").append(g),g=null})},groupingGroupBy:function(a,b){return this.each(function(){var d,e,c=this;for("string"==typeof a&&(a=[a]),d=c.p.groupingView,c.p.grouping=!0,d._locgr=!1,void 0===d.visibiltyOnNextGrouping&&(d.visibiltyOnNextGrouping=[]),e=0;e<d.groupField.length;e++)!d.groupColumnShow[e]&&d.visibiltyOnNextGrouping[e]&&$(c).jqGrid("showCol",d.groupField[e]);for(e=0;e<a.length;e++)d.visibiltyOnNextGrouping[e]=$("#"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(a[e])).is(":visible");c.p.groupingView=$.extend(c.p.groupingView,b||{}),d.groupField=a,$(c).trigger("reloadGrid")})},groupingRemove:function(a){return this.each(function(){var d,c,b=this;if(void 0===a&&(a=!0),b.p.grouping=!1,a===!0){for(c=b.p.groupingView,d=0;d<c.groupField.length;d++)!c.groupColumnShow[d]&&c.visibiltyOnNextGrouping[d]&&$(b).jqGrid("showCol",c.groupField);$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID(b.p.id)+" tbody:first").remove(),$("tr.jqgrow:hidden","#"+$.jgrid.jqID(b.p.id)+" tbody:first").show()}else $(b).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,b,c,d,e,f){var h,i,g={sum:function(){return parseFloat(b||0)+parseFloat(f[c]||0)},min:function(){return""===b?parseFloat(f[c]||0):Math.min(parseFloat(b),parseFloat(f[c]||0))},max:function(){return""===b?parseFloat(f[c]||0):Math.max(parseFloat(b),parseFloat(f[c]||0))},count:function(){return""===b&&(b=0),f.hasOwnProperty(c)?b+1:0},avg:function(){return g.sum()}};if(!g[a])throw"jqGrid Grouping No such method: "+a;return h=g[a](),null!=d&&("fixed"===e?h=h.toFixed(d):(i=Math.pow(10,d),h=Math.round(h*i)/i)),h}},setGroupHeaders:function(a){return a=$.extend({useColSpanStyle:!1,groupHeaders:[]},a||{}),this.each(function(){var c,d,f,g,h,i,j,k,l,m,n,o,p,w,z,A,b=this,e=0,q=b.p.colModel,r=q.length,s=b.grid.headers,t=$("table.ui-jqgrid-htable",b.grid.hDiv),u=t.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),v=t.children("thead"),x=t.find(".jqg-first-row-header"),y=$.jgrid.styleUI[b.p.styleUI||"jQueryUI"].base;for(b.p.groupHeader||(b.p.groupHeader=[]),b.p.groupHeader.push(a),void 0===x[0]?x=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):x.empty(),A=function(a,b){var d,c=b.length;for(d=0;c>d;d++)if(b[d].startColumnName===a)return d;return-1},$(b).prepend(v),f=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),c=0;r>c;c++)if(h=s[c].el,i=$(h),d=q[c],j={height:"0px",width:s[c].width+"px",display:d.hidden?"none":""},$("<th>",{role:"gridcell"}).css(j).addClass("ui-first-th-"+b.p.direction).appendTo(x),h.style.width="",k=A(d.name,a.groupHeaders),k>=0){for(l=a.groupHeaders[k],m=l.numberOfColumns,n=l.titleText,p=l.className||"",o=0,k=0;m>k&&r>c+k;k++)q[c+k].hidden||o++;g=$("<th>").attr({role:"columnheader"}).addClass(y.headerBox+" ui-th-column-header ui-th-"+b.p.direction+" "+p).html(n),o>0&&g.attr("colspan",String(o)),b.p.headertitles&&g.attr("title",g.text()),0===o&&g.hide(),i.before(g),f.append(h),e=m-1}else 0===e?a.useColSpanStyle?i.attr("rowspan","2"):($("<th>",{role:"columnheader"}).addClass(y.headerBox+" ui-th-column-header ui-th-"+b.p.direction).css({display:d.hidden?"none":""}).insertBefore(i),f.append(h)):(f.append(h),e--);w=$(b).children("thead"),w.prepend(x),f.insertAfter(u),t.append(w),a.useColSpanStyle&&(t.find("span.ui-jqgrid-resize").each(function(){var a=$(this).parent();a.is(":visible")&&(this.style.cssText="height: "+a.height()+"px !important; cursor: col-resize;")}),t.find("div.ui-jqgrid-sortable").each(function(){var a=$(this),b=a.parent();b.is(":visible")&&b.is(":has(span.ui-jqgrid-resize)")&&a.css("top",(b.height()-a.outerHeight())/2-4+"px")})),z=w.find("tr.jqg-first-row-header"),$(b).bind("jqGridResizeStop.setGroupHeaders",function(a,b,c){z.find("th").eq(c)[0].style.width=b+"px"})})},destroyGroupHeader:function(a){return void 0===a&&(a=!0),this.each(function(){var c,d,e,f,g,h,l,b=this,i=b.grid,j=$("table.ui-jqgrid-htable thead",i.hDiv),k=b.p.colModel;if(i){for($(this).unbind(".setGroupHeaders"),c=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),f=i.headers,d=0,e=f.length;e>d;d++){l=k[d].hidden?"none":"",g=$(f[d].el).width(f[d].width).css("display",l);try{g.removeAttr("rowSpan")}catch(m){g.attr("rowSpan",1)}c.append(g),h=g.children("span.ui-jqgrid-resize"),h.length>0&&(h[0].style.height=""),g.children("div")[0].style.top=""}$(j).children("tr.ui-jqgrid-labels").remove(),$(j).prepend(c),a===!0&&$(b).jqGrid("setGridParam",{groupHeader:null})}})}}),$.jgrid=$.jgrid||{},$.extend($.jgrid,{saveState:function(a,b){if(b=$.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16"},b||{}),a){var e,g,c="",d="",f=$("#"+a)[0];if(f.grid){if(g=$(f).data("inlineNav"),g&&f.p.inlineNav&&$(f).jqGrid("setGridParam",{_iN:g}),g=$(f).data("filterToolbar"),g&&f.p.filterToolbar&&$(f).jqGrid("setGridParam",{_fT:g}),c=$(f).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""}),$(f.grid.bDiv).find(".ui-jqgrid-btable tr:gt(0)").each(function(a,b){d+=b.outerHTML}),$.isFunction(b.beforeSetItem)&&(e=b.beforeSetItem.call(f,c),null!=e&&(c=e)),b.compression&&b.compressionModule)try{e=window[b.compressionModule][b.compressionMethod](c),null!=e&&(c=e,d=window[b.compressionModule][b.compressionMethod](d))}catch(h){}if(b.useStorage&&$.jgrid.isLocalStorage())try{window[b.storageType].setItem("jqGrid"+f.p.id,c),window[b.storageType].setItem("jqGrid"+f.p.id+"_data",d)}catch(h){22===h.code&&alert("Local storage limit is over!")}return c}}},loadState:function(a,b,c){var d,e,g,h,i,f,k,l,m,n;if(c=$.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16"},c||{}),a){if(f=$("#"+a)[0],c.useStorage)try{b=window[c.storageType].getItem("jqGrid"+f.id),g=window[c.storageType].getItem("jqGrid"+f.id+"_data")}catch(j){}if(b){if(c.decompression&&c.decompressionModule)try{d=window[c.decompressionModule][c.decompressionMethod](b),null!=d&&(b=d,g=window[c.decompressionModule][c.decompressionMethod](g))}catch(j){}if(d=jqGridUtils.parse(b),d&&"object"===$.type(d)){if(f.grid&&$.jgrid.gridUnload(a),$.isFunction(c.beforeSetGrid)&&(e=c.beforeSetGrid(d),e&&"object"===$.type(e)&&(d=e)),k=function(a){var b;return b=a},l={reccount:d.reccount,records:d.records,lastpage:d.lastpage,shrinkToFit:k(d.shrinkToFit),data:k(d.data),datatype:k(d.datatype),grouping:k(d.grouping)},d.shrinkToFit=!1,d.data=[],d.datatype="local",d.grouping=!1,d.inlineNav&&(h=k(d._iN),d._iN=null,delete d._iN),d.filterToolbar&&(i=k(d._fT),d._fT=null,delete d._fT),m=$("#"+a).jqGrid(d),m.append(g),m.jqGrid("setGridParam",l),d.storeNavOptions&&d.navGrid&&(m[0].p.navGrid=!1,m.jqGrid("navGrid",d.pager,d.navOptions,d.editOptions,d.addOptions,d.delOptions,d.searchOptions,d.viewOptions),d.navButtons&&d.navButtons.length))for(n=0;n<d.navButtons.length;n++)"sepclass"in d.navButtons[n][1]?m.jqGrid("navSeparatorAdd",d.navButtons[n][0],d.navButtons[n][1]):m.jqGrid("navButtonAdd",d.navButtons[n][0],d.navButtons[n][1]);d.inlineNav&&h&&(m.jqGrid("setGridParam",{inlineNav:!1}),m.jqGrid("inlineNav",d.pager,h)),d.filterToolbar&&i&&(m.jqGrid("setGridParam",{filterToolbar:!1}),i.restoreFromFilters=!0,m.jqGrid("filterToolbar",i)),d.frozenColumns&&m.jqGrid("setFrozenColumns"),m[0].updatepager(!0,!0),$.isFunction(c.afterSetGrid)&&c.afterSetGrid(m),c.clearAfterLoad&&(window[c.storageType].removeItem("jqGrid"+f.id),window[c.storageType].removeItem("jqGrid"+f.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function(a,b){var d,e,f,c={storageType:"localStorage"};c=$.extend(c,b||{});try{e=window[c.storageType].getItem("jqGrid"+a),f=window[c.storageType].getItem("jqGrid"+a+"_data"),d=null!=e&&null!=f&&"string"==typeof e&&"string"==typeof f}catch(g){d=!1}return d},setRegional:function(a,b){var d,e,f,g,c={storageType:"sessionStorage"};if(c=$.extend(c,b||{}),c.regional){$.jgrid.saveState(a,c),c.beforeSetGrid=function(a){return a.regional=c.regional,a.force_regional=!0,a},$.jgrid.loadState(a,null,c),d=$("#"+a)[0],e=$(d).jqGrid("getGridParam","colModel"),f=-1,g=$.jgrid.getRegional(d,"nav"),$.each(e,function(a){return this.formatter&&"actions"===this.formatter?(f=a,!1):void 0}),-1!==f&&g&&$("#"+a+" tbody tr").each(function(){var a=this.cells[f];$(a).find(".ui-inline-edit").attr("title",g.edittitle),$(a).find(".ui-inline-del").attr("title",g.deltitle),$(a).find(".ui-inline-save").attr("title",g.savetitle),$(a).find(".ui-inline-cancel").attr("title",g.canceltitle)});try{window[c.storageType].removeItem("jqGrid"+d.id),window[c.storageType].removeItem("jqGrid"+d.id+"_data")}catch(h){}}},jqGridImport:function(a,b){var c,d,e,f;switch(b=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{}),c=(0===a.indexOf("#")?"":"#")+$.jgrid.jqID(a),d=function(a,b){var f,g,h,i,d=$(b.xmlGrid.config,a)[0],e=$(b.xmlGrid.data,a)[0];if(jqGridUtils.xmlToJSON){f=jqGridUtils.xmlToJSON(d);for(h in f)f.hasOwnProperty(h)&&(g=f[h]);e?(i=f.grid.datatype,f.grid.datatype="xmlstring",f.grid.datastr=a,$(c).jqGrid(g).jqGrid("setGridParam",{datatype:i})):setTimeout(function(){$(c).jqGrid(g)},0)}else alert("xml2json or parse are not present")},e=function(a,b){var d,e,f,g;a&&"string"==typeof a&&(d=jqGridUtils.parse(a),e=d[b.jsonGrid.config],f=d[b.jsonGrid.data],f?(g=e.datatype,e.datatype="jsonstring",e.datastr=f,$(c).jqGrid(e).jqGrid("setGridParam",{datatype:g})):$(c).jqGrid(e))},b.imptype){case"xml":$.ajax($.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(a,e){"success"===e&&(d(a.responseXML,b),$(c).triggerHandler("jqGridImportComplete",[a,b]),$.isFunction(b.importComplete)&&b.importComplete(a)),a=null}},b.ajaxOptions));break;case"xmlstring":b.impstring&&"string"==typeof b.impstring&&(f=$.parseXML(b.impstring),f&&(d(f,b),$(c).triggerHandler("jqGridImportComplete",[f,b]),$.isFunction(b.importComplete)&&b.importComplete(f)));break;case"json":$.ajax($.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(a){try{e(a.responseText,b),$(c).triggerHandler("jqGridImportComplete",[a,b]),$.isFunction(b.importComplete)&&b.importComplete(a)}catch(d){}a=null}},b.ajaxOptions));break;case"jsonstring":b.impstring&&"string"==typeof b.impstring&&(e(b.impstring,b),$(c).triggerHandler("jqGridImportComplete",[b.impstring,b]),$.isFunction(b.importComplete)&&b.importComplete(b.impstring))}}}),$.jgrid.extend({jqGridExport:function(a){a=$.extend({exptype:"xmlstring",root:"grid",ident:"	",addOptions:{}},a||{});var b=null;return this.each(function(){if(this.grid){var c,d=$.extend(!0,{},$(this).jqGrid("getGridParam"),a.addOptions);if(d.rownumbers&&(d.colNames.splice(0,1),d.colModel.splice(0,1)),d.multiselect&&(d.colNames.splice(0,1),d.colModel.splice(0,1)),d.subGrid&&(d.colNames.splice(0,1),d.colModel.splice(0,1)),d.knv=null,d.treeGrid)for(c in d.treeReader)d.treeReader.hasOwnProperty(c)&&(d.colNames.splice(d.colNames.length-1),d.colModel.splice(d.colModel.length-1));switch(a.exptype){case"xmlstring":b="<"+a.root+">"+jqGridUtils.jsonToXML(d,{xmlDecl:""})+"</"+a.root+">";break;case"jsonstring":b=jqGridUtils.stringify(d),a.root&&(b="{"+a.root+":"+b+"}")}}}),b},excelExport:function(a){return a=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},a||{}),this.each(function(){var b,c,d;this.grid&&"remote"===a.exptype&&(c=$.extend({},this.p.postData),c[a.oper]=a.tag,d=jQuery.param(c),b=-1!==a.url.indexOf("?")?a.url+"&"+d:a.url+"?"+d,window.location=b)})}}),$.jgrid.inlineEdit=$.jgrid.inlineEdit||{},$.jgrid.extend({editRow:function(a,b,c,d,e,f,g,h,i){var j={},k=$.makeArray(arguments).slice(1);return"object"===$.type(k[0])?j=k[0]:(void 0!==b&&(j.keys=b),$.isFunction(c)&&(j.oneditfunc=c),$.isFunction(d)&&(j.successfunc=d),void 0!==e&&(j.url=e),void 0!==f&&(j.extraparam=f),$.isFunction(g)&&(j.aftersavefunc=g),$.isFunction(h)&&(j.errorfunc=h),$.isFunction(i)&&(j.afterrestorefunc=i)),j=$.extend(!0,{keys:!1,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0},$.jgrid.inlineEdit,j),this.each(function(){var c,d,e,i,k,l,b=this,f=0,g=null,h={},m=$(this).jqGrid("getStyleUI",b.p.styleUI+".inlinedit","inputClass",!0);b.grid&&(i=$(b).jqGrid("getInd",a,!0),i!==!1&&(l=$.isFunction(j.beforeEditRow)?j.beforeEditRow.call(b,j,a):void 0,void 0===l&&(l=!0),l&&(e=$(i).attr("editable")||"0","0"!==e||$(i).hasClass("not-editable-row")||(k=b.p.colModel,$('td[role="gridcell"]',i).each(function(e){var i,l,n;if(c=k[e].name,i=b.p.treeGrid===!0&&c===b.p.ExpandColumn)d=$("span:first",this).html();else try{d=$.unformat.call(b,this,{rowId:a,colModel:k[e]},e)}catch(j){d=k[e].edittype&&"textarea"===k[e].edittype?$(this).text():$(this).html()}"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(b.p.autoencode&&(d=$.jgrid.htmlDecode(d)),h[c]=d,k[e].editable===!0&&(null===g&&(g=e),i?$("span:first",this).html(""):$(this).html(""),l=$.extend({},k[e].editoptions||{},{id:a+"_"+c,name:c,rowId:a,oper:"edit"}),k[e].edittype||(k[e].edittype="text"),("&nbsp;"===d||"&#160;"===d||1===d.length&&160===d.charCodeAt(0))&&(d=""),n=$.jgrid.createEl.call(b,k[e].edittype,l,d,!0,$.extend({},$.jgrid.ajaxOptions,b.p.ajaxSelectOptions||{})),$(n).addClass("editable inline-edit-cell"),$.inArray(k[e].edittype,["text","textarea","password","select"])>-1&&$(n).addClass(m),i?$("span:first",this).append(n):$(this).append(n),$.jgrid.bindEv.call(b,n,l),"select"===k[e].edittype&&void 0!==k[e].editoptions&&k[e].editoptions.multiple===!0&&void 0===k[e].editoptions.dataUrl&&$.jgrid.msie&&$(n).width($(n).width()),f++))}),f>0&&(h.id=a,b.p.savedRow.push(h),$(i).attr("editable","1"),j.focusField&&("number"==typeof j.focusField&&parseInt(j.focusField,10)<=k.length&&(g=j.focusField),setTimeout(function(){var a=$("td:eq("+g+") :input:visible",i).not(":disabled");a.length>0&&a.focus()},0)),j.keys===!0&&$(i).bind(j.keyevent,function(c){if(27===c.keyCode){if($(b).jqGrid("restoreRow",a,j.afterrestorefunc),b.p.inlineNav)try{$(b).jqGrid("showAddEditButtons")}catch(d){}return!1}}),$(b).triggerHandler("jqGridInlineEditRow",[a,j]),$.isFunction(j.oneditfunc)&&j.oneditfunc.call(b,a))))))})},saveRow:function(a,b,c,d,e,f,g){var l,p,q,r,s,k,m,n,o,t,u,v,w,x,y,z,A,C,D,E,F,G,H,I,J,h=$.makeArray(arguments).slice(1),i={},j=this[0];if("object"===$.type(h[0])?i=h[0]:($.isFunction(b)&&(i.successfunc=b),void 0!==c&&(i.url=c),void 0!==d&&(i.extraparam=d),$.isFunction(e)&&(i.aftersavefunc=e),$.isFunction(f)&&(i.errorfunc=f),$.isFunction(g)&&(i.afterrestorefunc=g)),i=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional(j,"defaults.savetext")},$.jgrid.inlineEdit,i),k=!1,m={},n={},o={},t=!1,u=$.trim($(j).jqGrid("getStyleUI",j.p.styleUI+".common","error",!0)),!j.grid)return k;if(s=$(j).jqGrid("getInd",a,!0),s===!1)return k;if(v=$.jgrid.getRegional(this,"errors"),w=$.jgrid.getRegional(this,"edit"),x=$.isFunction(i.beforeSaveRow)?i.beforeSaveRow.call(j,i,a):void 0,void 0===x&&(x=!0),x){if(p=$(s).attr("editable"),i.url=i.url||j.p.editurl,"1"===p){if($('td[role="gridcell"]',s).each(function(a){var b,c,d;if(y=j.p.colModel[a],l=y.name,"cb"!==l&&"subgrid"!==l&&y.editable===!0&&"rn"!==l&&!$(this).hasClass("not-editable-cell")){switch(y.edittype){case"checkbox":b=["Yes","No"],y.editoptions&&(b=y.editoptions.value.split(":")),m[l]=$("input",this).is(":checked")?b[0]:b[1];break;case"text":case"password":case"textarea":case"button":m[l]=$("input, textarea",this).val();break;case"select":y.editoptions.multiple?(c=$("select",this),d=[],m[l]=$(c).val(),m[l]=m[l]?m[l].join(","):"",$("select option:selected",this).each(function(a,b){d[a]=$(b).text()}),n[l]=d.join(",")):(m[l]=$("select option:selected",this).val(),n[l]=$("select option:selected",this).text()),y.formatter&&"select"===y.formatter&&(n={});break;case"custom":try{if(!y.editoptions||!$.isFunction(y.editoptions.custom_value))throw"e1";if(m[l]=y.editoptions.custom_value.call(j,$(".customelement",this),"get"),void 0===m[l])throw"e2"}catch(e){"e1"===e?$.jgrid.info_dialog(v.errcap,"function 'custom_value' "+w.msg.nodefined,w.bClose,{styleUI:j.p.styleUI}):$.jgrid.info_dialog(v.errcap,e.message,w.bClose,{styleUI:j.p.styleUI})}}if(r=$.jgrid.checkValues.call(j,m[l],a),r[0]===!1)return!1;j.p.autoencode&&(m[l]=$.jgrid.htmlEncode(m[l])),"clientArray"!==i.url&&y.editoptions&&y.editoptions.NullIfEmpty===!0&&""===m[l]&&(o[l]="null",t=!0)}}),r[0]===!1){try{z=$(j).jqGrid("getGridRowById",a),A=$.jgrid.findPos(z),$.jgrid.info_dialog(v.errcap,r[1],w.bClose,{left:A[0],top:A[1]+$(z).outerHeight(),styleUI:j.p.styleUI})}catch(B){alert(r[1])}return k}if(D=j.p.prmNames,E=a,C=j.p.keyName===!1?D.id:j.p.keyName,m&&(m[D.oper]=D.editoper,void 0===m[C]||""===m[C]?m[C]=a:s.id!==j.p.idPrefix+m[C]&&(F=$.jgrid.stripPref(j.p.idPrefix,a),void 0!==j.p._index[F]&&(j.p._index[m[C]]=j.p._index[F],delete j.p._index[F]),a=j.p.idPrefix+m[C],$(s).attr("id",a),j.p.selrow===E&&(j.p.selrow=a),$.isArray(j.p.selarrrow)&&(G=$.inArray(E,j.p.selarrrow),G>=0&&(j.p.selarrrow[G]=a)),j.p.multiselect&&(H="jqg_"+j.p.id+"_"+a,$("input.cbox",s).attr("id",H).attr("name",H))),void 0===j.p.inlineData&&(j.p.inlineData={}),m=$.extend({},m,j.p.inlineData,i.extraparam)),"clientArray"===i.url){for(m=$.extend({},m,n),j.p.autoencode&&$.each(m,function(a,b){m[a]=$.jgrid.htmlDecode(b)}),J=$(j).jqGrid("setRowData",a,m),$(s).attr("editable","0"),I=0;I<j.p.savedRow.length;I++)if(String(j.p.savedRow[I].id)===String(E)){q=I;break}q>=0&&j.p.savedRow.splice(q,1),$(j).triggerHandler("jqGridInlineAfterSaveRow",[a,J,m,i]),$.isFunction(i.aftersavefunc)&&i.aftersavefunc.call(j,a,J,m,i),k=!0,$(s).removeClass("jqgrid-new-row").unbind("keydown")}else $(j).jqGrid("progressBar",{method:"show",loadtype:i.saveui,htmlcontent:i.savetext}),o=$.extend({},m,o),o[C]=$.jgrid.stripPref(j.p.idPrefix,o[C]),$.ajax($.extend({url:i.url,data:$.isFunction(j.p.serializeRowData)?j.p.serializeRowData.call(j,o):o,type:i.mtype,async:!1,complete:function(b,c){if($(j).jqGrid("progressBar",{method:"hide",loadtype:i.saveui,htmlcontent:i.savetext}),"success"===c){var e,f,d=!0;if(e=$(j).triggerHandler("jqGridInlineSuccessSaveRow",[b,a,i]),$.isArray(e)||(e=[!0,o]),e[0]&&$.isFunction(i.successfunc)&&(e=i.successfunc.call(j,b)),$.isArray(e)?(d=e[0],m=e[1]||m):d=e,d===!0){for(j.p.autoencode&&$.each(m,function(a,b){m[a]=$.jgrid.htmlDecode(b)}),t&&$.each(m,function(a){"null"===m[a]&&(m[a]="")}),m=$.extend({},m,n),$(j).jqGrid("setRowData",a,m),$(s).attr("editable","0"),f=0;f<j.p.savedRow.length;f++)if(String(j.p.savedRow[f].id)===String(a)){q=f;break}q>=0&&j.p.savedRow.splice(q,1),$(j).triggerHandler("jqGridInlineAfterSaveRow",[a,b,m,i]),$.isFunction(i.aftersavefunc)&&i.aftersavefunc.call(j,a,b,m,i),k=!0,$(s).removeClass("jqgrid-new-row").unbind("keydown")}else $(j).triggerHandler("jqGridInlineErrorSaveRow",[a,b,c,null,i]),$.isFunction(i.errorfunc)&&i.errorfunc.call(j,a,b,c,null),i.restoreAfterError===!0&&$(j).jqGrid("restoreRow",a,i.afterrestorefunc)}},error:function(b,c,d){if($("#lui_"+$.jgrid.jqID(j.p.id)).hide(),$(j).triggerHandler("jqGridInlineErrorSaveRow",[a,b,c,d,i]),$.isFunction(i.errorfunc))i.errorfunc.call(j,a,b,c,d);else{var e=b.responseText||b.statusText;try{$.jgrid.info_dialog(v.errcap,'<div class="'+u+'">'+e+"</div>",w.bClose,{buttonalign:"right",styleUI:j.p.styleUI})}catch(f){alert(e)}}i.restoreAfterError===!0&&$(j).jqGrid("restoreRow",a,i.afterrestorefunc)}},$.jgrid.ajaxOptions,j.p.ajaxRowOptions||{}))}return k}},restoreRow:function(a,b){var c=$.makeArray(arguments).slice(1),d={};return"object"===$.type(c[0])?d=c[0]:$.isFunction(b)&&(d.afterrestorefunc=b),d=$.extend(!0,{},$.jgrid.inlineEdit,d),this.each(function(){var e,g,h,b=this,c=-1,f={};if(b.grid&&(e=$(b).jqGrid("getInd",a,!0),e!==!1&&(h=$.isFunction(d.beforeCancelRow)?d.beforeCancelRow.call(b,d,a):void 0,void 0===h&&(h=!0),h))){for(g=0;g<b.p.savedRow.length;g++)if(String(b.p.savedRow[g].id)===String(a)){c=g;break}if(c>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(e.id)).datepicker("hide")}catch(i){}$.each(b.p.colModel,function(){this.editable===!0&&b.p.savedRow[c].hasOwnProperty(this.name)&&(f[this.name]=b.p.savedRow[c][this.name])}),$(b).jqGrid("setRowData",a,f),$(e).attr("editable","0").unbind("keydown"),b.p.savedRow.splice(c,1),$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(b.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$(b).jqGrid("delRowData",a),$(b).jqGrid("showAddEditButtons")},0)}$(b).triggerHandler("jqGridInlineAfterRestoreRow",[a]),$.isFunction(d.afterrestorefunc)&&d.afterrestorefunc.call(b,a)}})},addRow:function(a){return a=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},a||{}),this.each(function(){var b,c,d,e;this.grid&&(b=this,c=$.isFunction(a.beforeAddRow)?a.beforeAddRow.call(b,a.addRowParams):void 0,void 0===c&&(c=!0),c&&(a.rowID=$.isFunction(a.rowID)?a.rowID.call(b,a):null!=a.rowID?a.rowID:$.jgrid.randId(),a.useDefValues===!0&&$(b.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var c=this.editoptions.defaultValue,d=$.isFunction(c)?c.call(b):c;a.initdata[this.name]=d}}),$(b).jqGrid("addRowData",a.rowID,a.initdata,a.position),a.rowID=b.p.idPrefix+a.rowID,$("#"+$.jgrid.jqID(a.rowID),"#"+$.jgrid.jqID(b.p.id)).addClass("jqgrid-new-row"),a.useFormatter?$("#"+$.jgrid.jqID(a.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID(b.p.id)).click():(d=b.p.prmNames,e=d.oper,a.addRowParams.extraparam[e]=d.addoper,$(b).jqGrid("editRow",a.rowID,a.addRowParams),$(b).jqGrid("setSelection",a.rowID))))})},inlineNav:function(a,b){var c=this[0],d=$.jgrid.getRegional(c,"nav"),e=$.jgrid.styleUI[c.p.styleUI].inlinedit;return b=$.extend(!0,{edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,save:!0,saveicon:e.icon_save_nav,cancel:!0,cancelicon:e.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},d,b||{}),this.each(function(){var e,f,h,g,i,j;if(this.grid&&!this.p.inlineNav){if(e=$.jgrid.jqID(c.p.id),f=$.trim($(c).jqGrid("getStyleUI",c.p.styleUI+".common","disabled",!0)),c.p.navGrid||$(c).jqGrid("navGrid",a,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),$(c).data("inlineNav")||$(c).data("inlineNav",b),c.p.force_regional&&(b=$.extend(b,d)),c.p.inlineNav=!0,b.addParams.useFormatter===!0)for(g=c.p.colModel,h=0;h<g.length;h++)if(g[h].formatter&&"actions"===g[h].formatter){g[h].formatoptions&&(i={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},j=$.extend(i,g[h].formatoptions),b.addParams.addRowParams={keys:j.keys,oneditfunc:j.onEdit,successfunc:j.onSuccess,url:j.url,extraparam:j.extraparam,aftersavefunc:j.afterSave,errorfunc:j.onError,afterrestorefunc:j.afterRestore});break}b.add&&$(c).jqGrid("navButtonAdd",a,{caption:b.addtext,title:b.addtitle,buttonicon:b.addicon,id:c.p.id+"_iladd",internal:!0,onClickButton:function(){$(c).jqGrid("addRow",b.addParams),b.addParams.useFormatter||($("#"+e+"_ilsave").removeClass(f),$("#"+e+"_ilcancel").removeClass(f),$("#"+e+"_iladd").addClass(f),$("#"+e+"_iledit").addClass(f))}}),b.edit&&$(c).jqGrid("navButtonAdd",a,{caption:b.edittext,title:b.edittitle,buttonicon:b.editicon,id:c.p.id+"_iledit",internal:!0,onClickButton:function(){var a=$(c).jqGrid("getGridParam","selrow");a?($(c).jqGrid("editRow",a,b.editParams),$("#"+e+"_ilsave").removeClass(f),$("#"+e+"_ilcancel").removeClass(f),$("#"+e+"_iladd").addClass(f),$("#"+e+"_iledit").addClass(f)):($.jgrid.viewModal("#alertmod_"+e,{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus())}}),b.save&&($(c).jqGrid("navButtonAdd",a,{caption:b.savetext||"",title:b.savetitle||"Save row",buttonicon:b.saveicon,id:c.p.id+"_ilsave",internal:!0,onClickButton:function(){var d,f,g,a=c.p.savedRow[0].id;a?(d=c.p.prmNames,f=d.oper,g=b.editParams,$("#"+$.jgrid.jqID(a),"#"+e).hasClass("jqgrid-new-row")?(b.addParams.addRowParams.extraparam[f]=d.addoper,g=b.addParams.addRowParams):(b.editParams.extraparam||(b.editParams.extraparam={}),b.editParams.extraparam[f]=d.editoper),$(c).jqGrid("saveRow",a,g)&&$(c).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod_"+e,{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+e+"_ilsave").addClass(f)),b.cancel&&($(c).jqGrid("navButtonAdd",a,{caption:b.canceltext||"",title:b.canceltitle||"Cancel row editing",buttonicon:b.cancelicon,id:c.p.id+"_ilcancel",internal:!0,onClickButton:function(){var a=c.p.savedRow[0].id,d=b.editParams;a?($("#"+$.jgrid.jqID(a),"#"+e).hasClass("jqgrid-new-row")&&(d=b.addParams.addRowParams),$(c).jqGrid("restoreRow",a,d),$(c).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+e+"_ilcancel").addClass(f)),b.restoreAfterSelect===!0&&$(c).bind("jqGridBeforeSelectRow.inlineNav",function(a,d){c.p.savedRow.length>0&&c.p.inlineNav===!0&&d!==c.p.selrow&&null!==c.p.selrow&&(c.p.selrow===b.addParams.rowID?$(c).jqGrid("delRowData",c.p.selrow):$(c).jqGrid("restoreRow",c.p.selrow,b.editParams),$(c).jqGrid("showAddEditButtons"))})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var a=$.jgrid.jqID(this.p.id),b=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));$("#"+a+"_ilsave").addClass(b),$("#"+a+"_ilcancel").addClass(b),$("#"+a+"_iladd").removeClass(b),$("#"+a+"_iledit").removeClass(b)}})}}),$.jgrid.msie&&8===$.jgrid.msiever()&&($.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"===a.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect&&($.ui.multiselect.prototype._setSelected&&(setSelected=$.ui.multiselect.prototype._setSelected,$.ui.multiselect.prototype._setSelected=function(a,b){var d,c=setSelected.call(this,a,b);return b&&this.selectedList&&(d=this.element,this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(d)})),c}),$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0),$.jgrid.extend({sortableColumns:function(a){return this.each(function(){function d(){b.p.disableClick=!0}var f,g,h,b=this,c=$.jgrid.jqID(b.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+c+"_cb"+",#jqgh_"+c+"_rn"+",#jqgh_"+c+"_subgrid),:hidden)",placeholder:{element:function(a){var b=$(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return b},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},update:function(a,c){var i,d=$(c.item).parent(),e=$(">th",d),f=b.p.colModel,g={},h=b.p.id+"_";$.each(f,function(a){g[this.name]=a}),i=[],e.each(function(){var a=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(h,"");g.hasOwnProperty(a)&&i.push(g[a])}),$(b).jqGrid("remapColumns",i,!0,!0),$.isFunction(b.p.sortable.update)&&b.p.sortable.update(i),setTimeout(function(){b.p.disableClick=!1},50)}};b.p.sortable.options?$.extend(e,b.p.sortable.options):$.isFunction(b.p.sortable)&&(b.p.sortable={update:b.p.sortable}),e.start?(f=e.start,e.start=function(a,b){d(),f.call(this,a,b)}):e.start=d,b.p.sortable.exclude&&(e.items+=":not("+b.p.sortable.exclude+")"),g=a.sortable(e),h=g.data("sortable")||g.data("uiSortable"),null!=h&&(h.data("sortable").floating=!0)})},columnChooser:function(a){function p(a,b,c){var d,e;return b>=0?(d=a.slice(),e=d.splice(b,Math.max(a.length-b,b)),b>a.length&&(b=a.length),d[b]=c,d.concat(e)):a}function q(a,b){a&&("string"==typeof a?$.fn[a]&&$.fn[a].apply(b,$.makeArray(arguments).slice(2)):$.isFunction(a)&&a.apply(b,$.makeArray(arguments).slice(2)))}var c,d,g,h,i,j,k,b=this,e={},f=[],l=b.jqGrid("getGridParam","colModel"),m=b.jqGrid("getGridParam","colNames"),n=function(a){return $.ui.multiselect.prototype&&a.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||a.data("ui-multiselect")||a.data("multiselect")},o=$.jgrid.getRegional(this[0],"col");if(!$("#colchooser_"+$.jgrid.jqID(b[0].p.id)).length){if(c=$('<div id="colchooser_'+b[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),d=$("select",c),a=$.extend({width:400,height:240,classname:null,done:function(a){a&&b.jqGrid("remapColumns",a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(a){var b={};return b[a.bSubmit]=function(){a.apply_perm(),a.cleanup(!1)},b[a.bCancel]=function(){a.cleanup(!0)},$.extend(!0,{buttons:b,close:function(){a.cleanup(!0)},modal:a.modal||!1,resizable:a.resizable||!0,width:a.width+70,resize:function(){var a=n(d),b=a.container.closest(".ui-dialog-content");b.length>0&&"object"==typeof b[0].style?b[0].style.width="":b.css("width",""),a.selectedList.height(Math.max(a.selectedContainer.height()-a.selectedActions.outerHeight()-1,1)),a.availableList.height(Math.max(a.availableContainer.height()-a.availableActions.outerHeight()-1,1))}},a.dialog_opts||{})},apply_perm:function(){var c=[];$("option",d).each(function(){$(this).is(":selected")?b.jqGrid("showCol",l[this.value].name):b.jqGrid("hideCol",l[this.value].name)}),$("option[selected]",d).each(function(){c.push(parseInt(this.value,10))}),$.each(c,function(){delete e[l[parseInt(this,10)].name]}),$.each(e,function(){var a=parseInt(this,10);c=p(c,a,a)}),a.done&&a.done.call(b,c),b.jqGrid("setGridWidth",b[0].p.width,b[0].p.shrinkToFit)},cleanup:function(e){q(a.dlog,c,"destroy"),q(a.msel,d,"destroy"),c.remove(),e&&a.done&&a.done.call(b)},msel_opts:{}},o,a||{}),$.ui&&$.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect)return alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!"),void 0;a.msel_opts=$.extend($.ui.multiselect.defaults,a.msel_opts)}a.caption&&c.attr("title",a.caption),a.classname&&(c.addClass(a.classname),d.addClass(a.classname)),a.width&&($(">div",c).css({width:a.width,margin:"0 auto"}),d.css("width",a.width)),a.height&&($(">div",c).css("height",a.height),d.css("height",a.height-10)),d.empty(),$.each(l,function(a){return e[this.name]=a,this.hidedlg?(this.hidden||f.push(a),void 0):(d.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(m[a])+"</option>"),void 0)}),g=$.isFunction(a.dlog_opts)?a.dlog_opts.call(b,a):a.dlog_opts,q(a.dlog,c,g),h=$.isFunction(a.msel_opts)?a.msel_opts.call(b,a):a.msel_opts,q(a.msel,d,h),i=$("#colchooser_"+$.jgrid.jqID(b[0].p.id)),i.css({margin:"auto"}),i.find(">div").css({width:"100%",height:"100%",margin:"auto"}),j=n(d),j.container.css({width:"100%",height:"100%",margin:"auto"}),j.selectedContainer.css({width:100*j.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),j.availableContainer.css({width:100-100*j.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),j.selectedList.css("height","auto"),j.availableList.css("height","auto"),k=Math.max(j.selectedList.height(),j.availableList.height()),k=Math.min(k,$(window).height()),j.selectedList.css("height",k),j.availableList.css("height",k)
}},sortableRows:function(a){return this.each(function(){var b=this;b.grid&&(b.p.treeGrid||$.fn.sortable&&(a=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},a||{}),a.start&&$.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&$.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(c,d){if($(d.item).css("border-width","0"),$("td",d.item).each(function(a){this.style.width=b.grid.cols[a].style.width}),b.p.subGrid){var e=$(d.item).attr("id");try{$(b).jqGrid("collapseSubGridRow",e)}catch(f){}}a._start_&&a._start_.apply(this,[c,d])},a.update=function(c,d){$(d.item).css("border-width",""),b.p.rownumbers===!0&&$("td.jqgrid-rownum",b.rows).each(function(a){$(this).html(a+1+(parseInt(b.p.page,10)-1)*parseInt(b.p.rowNum,10))}),a._update_&&a._update_.apply(this,[c,d])},$("tbody:first",b).sortable(a),$("tbody:first > .jqgrow",b).disableSelection()))})},gridDnD:function(a){return this.each(function(){function e(){var a=$.data(b,"dnd");$("tr.jqgrow:not(.ui-draggable)",b).draggable($.isFunction(a.drag)?a.drag.call($(b),a):a.drag)}var c,d,f,b=this;if(b.grid&&!b.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(f="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>",void 0===$("#jqgrid_dnd")[0]&&$("body").append(f),"string"==typeof a&&"updateDnD"===a&&b.p.jqgdnd===!0)return e(),void 0;if(a=$.extend({drag:function(a){return $.extend({start:function(c,d){var e,f;if(b.p.subGrid){f=$(d.helper).attr("id");try{$(b).jqGrid("collapseSubGridRow",f)}catch(g){}}for(e=0;e<$.data(b,"dnd").connectWith.length;e++)0===$($.data(b,"dnd").connectWith[e]).jqGrid("getGridParam","reccount")&&$($.data(b,"dnd").connectWith[e]).jqGrid("addRowData","jqg_empty_row",{});d.helper.addClass("ui-state-highlight"),$("td",d.helper).each(function(a){this.style.width=b.grid.headers[a].width+"px"}),a.onstart&&$.isFunction(a.onstart)&&a.onstart.call($(b),c,d)},stop:function(c,d){var e,f;for(d.helper.dropped&&!a.dragcopy&&(f=$(d.helper).attr("id"),void 0===f&&(f=$(this).attr("id")),$(b).jqGrid("delRowData",f)),e=0;e<$.data(b,"dnd").connectWith.length;e++)$($.data(b,"dnd").connectWith[e]).jqGrid("delRowData","jqg_empty_row");a.onstop&&$.isFunction(a.onstop)&&a.onstop.call($(b),c,d)}},a.drag_opts||{})},drop:function(a){return $.extend({accept:function(a){var b,c;return $(a).hasClass("jqgrow")?(b=$(a).closest("table.ui-jqgrid-btable"),b.length>0&&void 0!==$.data(b[0],"dnd")?(c=$.data(b[0],"dnd").connectWith,-1!==$.inArray("#"+$.jgrid.jqID(this.id),c)?!0:!1):!1):a},drop:function(c,d){var e,f,i,j,g,h,k,m,n;if($(d.draggable).hasClass("jqgrow")){if(e=$(d.draggable).attr("id"),f=d.draggable.parent().parent().jqGrid("getRowData",e),!a.dropbyname){g=0,h={},k=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(j in f)f.hasOwnProperty(j)&&(i=k[g].name,"cb"!==i&&"rn"!==i&&"subgrid"!==i&&f.hasOwnProperty(j)&&k[g]&&(h[i]=f[j]),g++);f=h}catch(l){}}d.helper.dropped=!0,a.beforedrop&&$.isFunction(a.beforedrop)&&(m=a.beforedrop.call(this,c,d,f,$("#"+$.jgrid.jqID(b.p.id)),$(this)),void 0!==m&&null!==m&&"object"==typeof m&&(f=m)),d.helper.dropped&&(a.autoid&&($.isFunction(a.autoid)?n=a.autoid.call(this,f):(n=Math.ceil(1e3*Math.random()),n=a.autoidprefix+n)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",n,f,a.droppos)),a.ondrop&&$.isFunction(a.ondrop)&&a.ondrop.call(this,c,d,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith)for(a.connectWith=a.connectWith.split(","),a.connectWith=$.map(a.connectWith,function(a){return $.trim(a)}),$.data(b,"dnd",a),0===b.p.reccount||b.p.jqgdnd||e(),b.p.jqgdnd=!0,c=0;c<a.connectWith.length;c++)d=a.connectWith[c],$(d).droppable($.isFunction(a.drop)?a.drop.call($(b),a):a.drop)}})},gridResize:function(opts){return this.each(function(){var req,optstest,$t=this,gID=$.jgrid.jqID($t.p.id);$t.grid&&$.fn.resizable&&(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(a,b){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",b.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,a,b),$t.p.caption&&$("#gbox_"+gID).css({height:"auto"}),$t.p.frozenColumns&&(req&&clearTimeout(req),req=setTimeout(function(){req&&clearTimeout(req),$("#"+gID).jqGrid("destroyFrozenColumns"),$("#"+gID).jqGrid("setFrozenColumns")}))},opts._alsoResize_?(optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}",opts.alsoResize=eval("("+optstest+")")):opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID),delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts))})}}),$.assocArraySize=function(a){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b},$.jgrid.extend({pivotSetup:function(a,b){var c=[],d=[],e=[],f=[],g=[],h={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},i=[],j=$.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},b||{});return this.each(function(){function t(a,b,c){var d;return d=_pivotfilter.call(a,b,c),d.length>0?d[0]:null}function u(a,b){var e,c=0,d=!0;for(e in a)if(a.hasOwnProperty(e)){if(a[e]!=this[c]){d=!1;break}if(c++,c>=this.length)break}return d&&(k=b),d}function v(a,b,c,d,e){var f;switch(a){case"sum":f=parseFloat(b||0)+parseFloat(d[c]||0);break;case"count":(""===b||null==b)&&(b=0),f=d.hasOwnProperty(c)?b+1:0;break;case"min":f=""===b||null==b?parseFloat(d[c]||0):Math.min(parseFloat(b),parseFloat(d[c]||0));break;case"max":f=""===b||null==b?parseFloat(d[c]||0):Math.max(parseFloat(b),parseFloat(d[c]||0));break;case"avg":f=(parseFloat(b||0)*(e-1)+parseFloat(d[c]||0))/e}return f}function w(a,b,c,d){var h,i,j,k,o,n,e=b.length,l="",m=[];for($.isArray(c)?(k=c.length,m=c):(k=1,m[0]=c),f=[],g=[],f.root=0,d._count?d._count++:d._count=1,j=0;k>j;j++){for(n=[],h=0;e>h;h++){if(null==c)i=$.trim(b[h].member)+"_"+b[h].aggregator,o=i,m[0]=b[h].label||b[h].aggregator+" "+$.trim(b[h].member);else{o=c[j].replace(/\s+/g,"");try{i=1===e?l+o:l+o+"_"+b[h].aggregator+"_"+String(h)}catch(p){}m[j]=c[j]}i=isNaN(parseInt(i,10))?i:i+" ",d[i]=n[i]=v(b[h].aggregator,d[i],b[h].member,a,d._count)}l+=c[j].replace(/\s+/g,""),f[i]=n,g[i]=m[j]}return d}function L(a){var b,d,e,f,g,h,k,l,m,q;for(e in a)if(a.hasOwnProperty(e)){if("object"!=typeof a[e]){if("level"===e){if(void 0===I[a.level]&&(I[a.level]="",a.level>0&&-1===a.text.indexOf("_r_Totals")&&(i[a.level-1]={useColSpanStyle:!1,groupHeaders:[]})),I[a.level]!==a.text&&a.children.length&&-1===a.text.indexOf("_r_Totals")&&a.level>0){if(i[a.level-1].groupHeaders.push({titleText:a.label,numberOfColumns:0}),h=i[a.level-1].groupHeaders.length-1,k=0===h?K:J,a.level-1===(j.rowTotals?1:0)&&h>0){for(l=0,m=0;h>m;m++)l+=i[a.level-1].groupHeaders[m].numberOfColumns;l&&(k=l+n)}c[k]&&(i[a.level-1].groupHeaders[h].startColumnName=c[k].name,i[a.level-1].groupHeaders[h].numberOfColumns=c.length-k),J=c.length}I[a.level]=a.text}if(a.level===o&&"level"===e&&o>0)if(p>1){q=1;for(b in a.fields)a.fields.hasOwnProperty(b)&&(1===q&&i[o-1].groupHeaders.push({startColumnName:b,numberOfColumns:1,titleText:a.label||a.text}),q++);i[o-1].groupHeaders[i[o-1].groupHeaders.length-1].numberOfColumns=q-1}else i.splice(o-1,1)}if(null!=a[e]&&"object"==typeof a[e]&&L(a[e]),"level"===e&&a.level>0&&(a.level===(0===o?a.level:o)||-1!==I[a.level].indexOf("_r_Totals"))){d=0;for(b in a.fields)if(a.fields.hasOwnProperty(b)){g={};for(f in j.aggregates[d])if(j.aggregates[d].hasOwnProperty(f))switch(f){case"member":case"label":case"aggregator":break;default:g[f]=j.aggregates[d][f]}p>1?(g.name=b,g.label=j.aggregates[d].label||a.label):(g.name=a.text,g.label="_r_Totals"===a.text?j.rowTotalsText:a.label),c.push(g),d++}}}}var b,k,l,n,o,p,q,r,x,y,z,A,B,C,D,H,E,F,G,I,J,K,M,N,m=a.length,s=0;if(j.rowTotals&&j.yDimension.length>0&&(x=j.yDimension[0].dataName,j.yDimension.splice(0,0,{dataName:x}),j.yDimension[0].converter=function(){return"_r_Totals"}),n=$.isArray(j.xDimension)?j.xDimension.length:0,o=j.yDimension.length,p=$.isArray(j.aggregates)?j.aggregates.length:0,0===n||0===p)throw"xDimension or aggregates optiona are not set!";for(l=0;n>l;l++)y={name:j.xDimension[l].dataName,frozen:j.frozenStaticCols},null==j.xDimension[l].isGroupField&&(j.xDimension[l].isGroupField=!0),y=$.extend(!0,y,j.xDimension[l]),c.push(y);for(z=n-1,A={};m>s;){b=a[s],B=[],C=[],q={},l=0;do B[l]=$.trim(b[j.xDimension[l].dataName]),q[j.xDimension[l].dataName]=B[l],l++;while(n>l);if(D=0,k=-1,r=t(d,u,B)){if(k>=0){if(D=0,o>=1){for(D=0;o>D;D++)C[D]=$.trim(b[j.yDimension[D].dataName]),j.yDimension[D].converter&&$.isFunction(j.yDimension[D].converter)&&(C[D]=j.yDimension[D].converter.call(this,C[D],B,C));r=w(b,j.aggregates,C,r)}else 0===o&&(r=w(b,j.aggregates,null,r));d[k]=r}}else{if(D=0,o>=1){for(D=0;o>D;D++)C[D]=$.trim(b[j.yDimension[D].dataName]),j.yDimension[D].converter&&$.isFunction(j.yDimension[D].converter)&&(C[D]=j.yDimension[D].converter.call(this,C[D],B,C));q=w(b,j.aggregates,C,q)}else 0===o&&(q=w(b,j.aggregates,null,q));d.push(q)}E=0,F=null,G=null;for(H in f)if(f.hasOwnProperty(H)){if(0===E)A.children&&void 0!==A.children||(A={text:H,level:0,children:[],label:H}),F=A.children;else{for(G=null,l=0;l<F.length;l++)if(F[l].text===H){G=F[l];break}G?F=G.children:(F.push({children:[],text:H,level:E,fields:f[H],label:g[H]}),F=F[F.length-1].children)}E++}s++}if(I=[],J=c.length,K=J,o>0&&(i[o-1]={useColSpanStyle:!1,groupHeaders:[]}),L(A),j.colTotals)for(N=d.length;N--;)for(l=n;l<c.length;l++)M=c[l].name,e[M]?e[M]+=parseFloat(d[N][M]||0):e[M]=parseFloat(d[N][M]||0);if(z>0)for(l=0;z>l;l++)c[l].isGroupField&&(h.groupingView.groupField.push(c[l].name),h.groupingView.groupSummary.push(j.groupSummary),h.groupingView.groupSummaryPos.push(j.groupSummaryPos));else h.grouping=!1;h.sortname=c[z].name,h.groupingView.hideFirstGroupCol=!0}),{colModel:c,rows:d,groupOptions:h,groupHeaders:i,summary:e}},jqPivot:function(a,b,c,d){return this.each(function(){function f(a){var h,i,j,k,l,d=jQuery(e).jqGrid("pivotSetup",a,b),f=$.assocArraySize(d.summary)>0?!0:!1,g=$.jgrid.from.call(e,d.rows);for(b.ignoreCase&&(g=g.ignoreCase()),h=0;h<d.groupOptions.groupingView.groupField.length;h++)i=b.xDimension[h].sortorder?b.xDimension[h].sortorder:"asc",j=b.xDimension[h].sorttype?b.xDimension[h].sorttype:"text",g.orderBy(d.groupOptions.groupingView.groupField[h],i,j,"",j);if(k=b.xDimension.length,d.groupOptions.sortname&&k&&(i=b.xDimension[k-1].sortorder?b.xDimension[k-1].sortorder:"asc",j=b.xDimension[k-1].sorttype?b.xDimension[k-1].sorttype:"text",g.orderBy(d.groupOptions.sortname,i,j,"",j)),jQuery(e).jqGrid($.extend(!0,{datastr:$.extend(g.select(),f?{userdata:d.summary}:{}),datatype:"jsonstring",footerrow:f,userDataOnFooter:f,colModel:d.colModel,viewrecords:!0,sortname:b.xDimension[0].dataName},d.groupOptions,c||{})),l=d.groupHeaders,l.length)for(h=0;h<l.length;h++)l[h]&&l[h].groupHeaders.length&&jQuery(e).jqGrid("setGroupHeaders",l[h]);b.frozenStaticCols&&jQuery(e).jqGrid("setFrozenColumns")}var e=this;"string"==typeof a?$.ajax($.extend({url:a,dataType:"json",success:function(a){f($.jgrid.getAccessor(a,d&&d.reader?d.reader:"rows"))}},d||{})):f(a)})}}),$.jgrid.extend({setSubGrid:function(){return this.each(function(){var b,c,a=this,d=$.jgrid.styleUI[a.p.styleUI||"jQueryUI"].subgrid,e={plusicon:d.icon_plus,minusicon:d.icon_minus,openicon:d.icon_open,expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(a.p.subGridOptions=$.extend(e,a.p.subGridOptions||{}),a.p.colNames.unshift(""),a.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?a.p.subGridWidth+a.p.cellLayout:a.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),b=a.p.subGridModel,b[0])for(b[0].align=$.extend([],b[0].align||[]),c=0;c<b[0].name.length;c++)b[0].align[c]=b[0].align[c]||"left"})},addSubGridCell:function(a,b){var d,e,f,c="";return this.each(function(){c=this.formatCol(a,b),e=this.p.id,d=this.p.subGridOptions.plusicon,f=$.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common}),'<td role="gridcell" aria-describedby="'+e+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+c+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+f.icon_base+" "+d+"'></span></a></td>"},addSubGrid:function(a,b){return this.each(function(){var d,e,f,g,h,i,j,k,l,n,o,m,p,q,c=this;if(c.grid){for(d=$.jgrid.styleUI[c.p.styleUI||"jQueryUI"].base,e=$.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common,f=function(a,b,d){var e=$("<td align='"+c.p.subGridModel[0].align[d]+"'></td>").html(b);$(a).append(e)},g=function(a,b){var g,h,i,l,j=$("<table class='"+d.rowTable+" ui-common-table'><tbody></tbody></table>"),k=$("<tr></tr>");for(h=0;h<c.p.subGridModel[0].name.length;h++)g=$("<th class='"+d.headerBox+" ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),$(g).html(c.p.subGridModel[0].name[h]),$(g).width(c.p.subGridModel[0].width[h]),$(k).append(g);return $(j).append(k),a&&(i=c.p.xmlReader.subgrid,$(i.root+" "+i.row,a).each(function(){if(k=$("<tr class='"+e.content+" ui-subtblcell'></tr>"),i.repeatitems===!0)$(i.cell,this).each(function(a){f(k,$(this).text()||"&#160;",a)});else{var a=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name;if(a)for(h=0;h<a.length;h++)f(k,$(a[h],this).text()||"&#160;",h)}$(j).append(k)})),l=$("table:first",c.grid.bDiv).attr("id")+"_",$("#"+$.jgrid.jqID(l+b)).append(j),c.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(c.p.id)).hide(),!1},h=function(a,b){var g,h,i,j,k,l,o,p,m=$("<table class='"+d.rowTable+" ui-common-table'><tbody></tbody></table>"),n=$("<tr></tr>");for(i=0;i<c.p.subGridModel[0].name.length;i++)g=$("<th class='"+d.headerBox+" ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),$(g).html(c.p.subGridModel[0].name[i]),$(g).width(c.p.subGridModel[0].width[i]),$(n).append(g);if($(m).append(n),a&&(k=c.p.jsonReader.subgrid,h=$.jgrid.getAccessor(a,k.root),void 0!==h))for(i=0;i<h.length;i++){if(j=h[i],n=$("<tr class='"+e.content+" ui-subtblcell'></tr>"),k.repeatitems===!0)for(k.cell&&(j=j[k.cell]),l=0;l<j.length;l++)f(n,j[l]||"&#160;",l);else if(o=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name,o.length)for(l=0;l<o.length;l++)f(n,j[o[l]]||"&#160;",l);$(m).append(n)}return p=$("table:first",c.grid.bDiv).attr("id")+"_",$("#"+$.jgrid.jqID(p+b)).append(m),c.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(c.p.id)).hide(),!1},i=function(a){var b,d,e,f;if(b=$(a).attr("id"),d={nd_:(new Date).getTime()},d[c.p.prmNames.subgridid]=b,!c.p.subGridModel[0])return!1;if(c.p.subGridModel[0].params)for(f=0;f<c.p.subGridModel[0].params.length;f++)for(e=0;e<c.p.colModel.length;e++)c.p.colModel[e].name===c.p.subGridModel[0].params[f]&&(d[c.p.colModel[e].name]=$("td:eq("+e+")",a).text().replace(/\&#160\;/gi,""));if(!c.grid.hDiv.loading)switch(c.grid.hDiv.loading=!0,$("#load_"+$.jgrid.jqID(c.p.id)).show(),c.p.subgridtype||(c.p.subgridtype=c.p.datatype),$.isFunction(c.p.subgridtype)?c.p.subgridtype.call(c,d):c.p.subgridtype=c.p.subgridtype.toLowerCase(),c.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:c.p.mtype,url:$.isFunction(c.p.subGridUrl)?c.p.subGridUrl.call(c,d):c.p.subGridUrl,dataType:c.p.subgridtype,data:$.isFunction(c.p.serializeSubGridData)?c.p.serializeSubGridData.call(c,d):d,complete:function(a){"xml"===c.p.subgridtype?g(a.responseXML,b):h($.jgrid.parse(a.responseText),b),a=null}},$.jgrid.ajaxOptions,c.p.ajaxSubgridOptions||{}))}return!1},m=0,$.each(c.p.colModel,function(){(this.hidden===!0||"rn"===this.name||"cb"===this.name)&&m++}),p=c.rows.length,q=1,void 0!==b&&b>0&&(q=b,p=b+1);p>q;)$(c.rows[q]).hasClass("jqgrow")&&(c.p.scroll&&$(c.rows[q].cells[a]).unbind("click"),$(c.rows[q].cells[a]).bind("click",function(){var b=$(this).parent("tr")[0];if(k=c.p.id,j=b.id,o=$("#"+k+"_"+j+"_expandedContent"),$(this).hasClass("sgcollapsed")){if(n=$(c).triggerHandler("jqGridSubGridBeforeExpand",[k+"_"+j,j]),n=n===!1||"stop"===n?!1:!0,n&&$.isFunction(c.p.subGridBeforeExpand)&&(n=c.p.subGridBeforeExpand.call(c,k+"_"+j,j)),n===!1)return!1;c.p.subGridOptions.reloadOnExpand===!0||c.p.subGridOptions.reloadOnExpand===!1&&!o.hasClass("ui-subgrid")?(l=a>=1?"<td colspan='"+a+"'>&#160;</td>":"",$(b).after("<tr role='row' id='"+k+"_"+j+"_expandedContent"+"' class='ui-subgrid ui-sg-expanded'>"+l+"<td class='"+e.content+" subgrid-cell'><span class='"+e.icon_base+" "+c.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(c.p.colNames.length-1-m,10)+"' class='"+e.content+" subgrid-data'><div id="+k+"_"+j+" class='tablediv'></div></td></tr>"),$(c).triggerHandler("jqGridSubGridRowExpanded",[k+"_"+j,j]),$.isFunction(c.p.subGridRowExpanded)?c.p.subGridRowExpanded.call(c,k+"_"+j,j):i(b)):o.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+e.icon_base+" "+c.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),c.p.subGridOptions.selectOnExpand&&$(c).jqGrid("setSelection",j)}else if($(this).hasClass("sgexpanded")){if(n=$(c).triggerHandler("jqGridSubGridRowColapsed",[k+"_"+j,j]),n=n===!1||"stop"===n?!1:!0,n&&$.isFunction(c.p.subGridRowColapsed)&&(n=c.p.subGridRowColapsed.call(c,k+"_"+j,j)),n===!1)return!1;c.p.subGridOptions.reloadOnExpand===!0?o.remove(".ui-subgrid"):o.hasClass("ui-subgrid")&&o.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+e.icon_base+" "+c.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed"),c.p.subGridOptions.selectOnCollapse&&$(c).jqGrid("setSelection",j)}return!1})),q++;c.p.subGridOptions.expandOnLoad===!0&&$(c.rows).filter(".jqgrow").each(function(a,b){$(b.cells[0]).click()}),c.subGridXml=function(a,b){g(a,b)},c.subGridJson=function(a,b){h(a,b)}}})},expandSubGridRow:function(a){return this.each(function(){var c,d,b=this;(b.grid||a)&&b.p.subGrid===!0&&(c=$(this).jqGrid("getInd",a,!0),c&&(d=$("td.sgcollapsed",c)[0],d&&$(d).trigger("click")))})},collapseSubGridRow:function(a){return this.each(function(){var c,d,b=this;(b.grid||a)&&b.p.subGrid===!0&&(c=$(this).jqGrid("getInd",a,!0),c&&(d=$("td.sgexpanded",c)[0],d&&$(d).trigger("click")))})},toggleSubGridRow:function(a){return this.each(function(){var c,d,b=this;(b.grid||a)&&b.p.subGrid===!0&&(c=$(this).jqGrid("getInd",a,!0),c&&(d=$("td.sgcollapsed",c)[0],d?$(d).trigger("click"):(d=$("td.sgexpanded",c)[0],d&&$(d).trigger("click"))))})}}),$.jgrid.extend({setTreeNode:function(a,b){return this.each(function(){var j,k,l,m,n,o,p,q,d,e,f,g,h,i,r,u,s,t,c=this;if(c.grid&&c.p.treeGrid)for(d=c.p.expColInd,e=c.p.treeReader.expanded_field,f=c.p.treeReader.leaf_field,g=c.p.treeReader.level_field,h=c.p.treeReader.icon_field,i=c.p.treeReader.loaded,r=$.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common;b>a;)s=$.jgrid.stripPref(c.p.idPrefix,c.rows[a].id),t=c.p._index[s],p=c.p.data[t],"nested"===c.p.treeGridModel&&(p[f]||(j=parseInt(p[c.p.treeReader.left_field],10),k=parseInt(p[c.p.treeReader.right_field],10),p[f]=k===j+1?"true":"false",c.rows[a].cells[c.p._treeleafpos].innerHTML=p[f])),l=parseInt(p[g],10),0===c.p.tree_root_level?(m=l+1,n=l):(m=l,n=l-1),o="<div class='tree-wrap tree-wrap-"+c.p.direction+"' style='width:"+18*m+"px;'>",o+="<div style='"+("rtl"===c.p.direction?"right:":"left:")+18*n+"px;' class='"+r.icon_base+" ",void 0!==p[i]&&(p[i]="true"===p[i]||p[i]===!0?!0:!1),"true"===p[f]||p[f]===!0?(o+=(void 0!==p[h]&&""!==p[h]?p[h]:c.p.treeIcons.leaf)+" tree-leaf treeclick",p[f]=!0,q="leaf"):(p[f]=!1,q=""),p[e]=("true"===p[e]||p[e]===!0?!0:!1)&&(p[i]||void 0===p[i]),o+=p[e]===!1?p[f]===!0?"'":c.p.treeIcons.plus+" tree-plus treeclick'":p[f]===!0?"'":c.p.treeIcons.minus+" tree-minus treeclick'",o+="></div></div>",$(c.rows[a].cells[d]).wrapInner("<span class='cell-wrapper"+q+"'></span>").prepend(o),l!==parseInt(c.p.tree_root_level,10)&&(u=$(c).jqGrid("isVisibleNode",p),u||$(c.rows[a]).css("display","none")),$(c.rows[a].cells[d]).find("div.treeclick").bind("click",function(a){var b=a.target||a.srcElement,d=$.jgrid.stripPref(c.p.idPrefix,$(b,c.rows).closest("tr.jqgrow")[0].id),g=c.p._index[d];return c.p.data[g][f]||(c.p.data[g][e]?($(c).jqGrid("collapseRow",c.p.data[g]),$(c).jqGrid("collapseNode",c.p.data[g])):($(c).jqGrid("expandRow",c.p.data[g]),$(c).jqGrid("expandNode",c.p.data[g]))),!1}),c.p.ExpandColClick===!0&&$(c.rows[a].cells[d]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(a){var b=a.target||a.srcElement,d=$.jgrid.stripPref(c.p.idPrefix,$(b,c.rows).closest("tr.jqgrow")[0].id),g=c.p._index[d];return c.p.data[g][f]||(c.p.data[g][e]?($(c).jqGrid("collapseRow",c.p.data[g]),$(c).jqGrid("collapseNode",c.p.data[g])):($(c).jqGrid("expandRow",c.p.data[g]),$(c).jqGrid("expandNode",c.p.data[g]))),$(c).jqGrid("setSelection",d),!1}),a++})},setTreeGrid:function(){return this.each(function(){var c,e,f,g,a=this,b=0,d=!1,h=[],i=$.jgrid.styleUI[a.p.styleUI||"jQueryUI"].treegrid;if(a.p.treeGrid){a.p.treedatatype||$.extend(a.p,{treedatatype:a.p.datatype}),a.p.loadonce&&(a.p.treedatatype="local"),a.p.subGrid=!1,a.p.altRows=!1,a.p.pgbuttons=!1,a.p.pginput=!1,a.p.gridview=!0,null===a.p.rowTotal&&(a.p.rowNum=1e4),a.p.multiselect=!1,a.p.rowList=[],a.p.expColInd=0,c=i.icon_plus,"jQueryUI"===a.p.styleUI&&(c+="rtl"===a.p.direction?"w":"e"),a.p.treeIcons=$.extend({plus:c,minus:i.icon_minus,leaf:i.icon_leaf},a.p.treeIcons||{}),"nested"===a.p.treeGridModel?a.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},a.p.treeReader):"adjacency"===a.p.treeGridModel&&(a.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},a.p.treeReader));for(f in a.p.colModel)if(a.p.colModel.hasOwnProperty(f)){e=a.p.colModel[f].name,e!==a.p.ExpandColumn||d||(d=!0,a.p.expColInd=b),b++;for(g in a.p.treeReader)a.p.treeReader.hasOwnProperty(g)&&a.p.treeReader[g]===e&&h.push(e)}$.each(a.p.treeReader,function(c,d){d&&-1===$.inArray(d,h)&&("leaf_field"===c&&(a.p._treeleafpos=b),b++,a.p.colNames.push(d),a.p.colModel.push({name:d,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(a){this.each(function(){var c,d,e,f,b=this;b.grid&&b.p.treeGrid&&(c=$(b).jqGrid("getNodeChildren",a),d=b.p.treeReader.expanded_field,e=a[b.p.localReader.id],f=$.isFunction(b.p.beforeExpandTreeGridRow)?b.p.beforeExpandTreeGridRow.call(b,e,a,c):!0,f!==!1&&($(c).each(function(){var a=b.p.idPrefix+$.jgrid.getAccessor(this,b.p.localReader.id);$($(b).jqGrid("getGridRowById",a)).css("display",""),this[d]&&$(b).jqGrid("expandRow",this)}),$.isFunction(b.p.afterExpandTreeGridRow)&&b.p.afterExpandTreeGridRow.call(b,e,a,c)))})},collapseRow:function(a){this.each(function(){var c,d,e,f,b=this;b.grid&&b.p.treeGrid&&(c=$(b).jqGrid("getNodeChildren",a),d=b.p.treeReader.expanded_field,e=a[b.p.localReader.id],f=$.isFunction(b.p.beforeCollapseTreeGridRow)?b.p.beforeCollapseTreeGridRow.call(b,e,a,c):!0,f!==!1&&($(c).each(function(){var a=b.p.idPrefix+$.jgrid.getAccessor(this,b.p.localReader.id);$($(b).jqGrid("getGridRowById",a)).css("display","none"),this[d]&&$(b).jqGrid("collapseRow",this)}),$.isFunction(b.p.afterCollapseTreeGridRow)&&b.p.afterCollapseTreeGridRow.call(b,e,a,c)))})},getRootNodes:function(a){var b=[];return this.each(function(){var d,e,f,c=this;if(c.grid&&c.p.treeGrid)switch("boolean"!=typeof a&&(a=!1),f=a?$(c).jqGrid("getRowData",null,!0):c.p.data,c.p.treeGridModel){case"nested":d=c.p.treeReader.level_field,$(f).each(function(){parseInt(this[d],10)===parseInt(c.p.tree_root_level,10)&&(a?b.push(c.p.data[c.p._index[this[c.p.keyName]]]):b.push(this))});break;case"adjacency":e=c.p.treeReader.parent_id_field,$(f).each(function(){(null===this[e]||"null"===String(this[e]).toLowerCase())&&(a?b.push(c.p.data[c.p._index[this[c.p.keyName]]]):b.push(this))})}}),b},getNodeDepth:function(a){var b=null;return this.each(function(){var c,d;if(this.grid&&this.p.treeGrid)switch(c=this,c.p.treeGridModel){case"nested":d=c.p.treeReader.level_field,b=parseInt(a[d],10)-parseInt(c.p.tree_root_level,10);break;case"adjacency":b=$(c).jqGrid("getNodeAncestors",a).length}}),b},getNodeParent:function(a){var b=null;return this.each(function(){var d,e,f,g,h,i,j,k,l,m,c=this;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case"nested":d=c.p.treeReader.left_field,e=c.p.treeReader.right_field,f=c.p.treeReader.level_field,g=parseInt(a[d],10),h=parseInt(a[e],10),i=parseInt(a[f],10),$(this.p.data).each(function(){return parseInt(this[f],10)===i-1&&parseInt(this[d],10)<g&&parseInt(this[e],10)>h?(b=this,!1):void 0});break;case"adjacency":for(j=c.p.treeReader.parent_id_field,k=c.p.localReader.id,l=a[k],m=c.p._index[l];m--;)if(c.p.data[m][k]===$.jgrid.stripPref(c.p.idPrefix,a[j])){b=c.p.data[m];break}}}),b},getNodeChildren:function(a){var b=[];return this.each(function(){var d,e,f,g,h,i,j,k,c=this;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case"nested":d=c.p.treeReader.left_field,e=c.p.treeReader.right_field,f=c.p.treeReader.level_field,g=parseInt(a[d],10),h=parseInt(a[e],10),i=parseInt(a[f],10),$(this.p.data).each(function(){parseInt(this[f],10)===i+1&&parseInt(this[d],10)>g&&parseInt(this[e],10)<h&&b.push(this)});break;case"adjacency":j=c.p.treeReader.parent_id_field,k=c.p.localReader.id,$(this.p.data).each(function(){this[j]==$.jgrid.stripPref(c.p.idPrefix,a[k])&&b.push(this)})}}),b},getFullTreeNode:function(a,b){var c=[];return this.each(function(){var e,g,h,i,j,k,l,m,n,d=this,f=d.p.treeReader.expanded_field;if(d.grid&&d.p.treeGrid)switch((null==b||"boolean"!=typeof b)&&(b=!1),d.p.treeGridModel){case"nested":g=d.p.treeReader.left_field,h=d.p.treeReader.right_field,i=d.p.treeReader.level_field,j=parseInt(a[g],10),k=parseInt(a[h],10),l=parseInt(a[i],10),$(this.p.data).each(function(){parseInt(this[i],10)>=l&&parseInt(this[g],10)>=j&&parseInt(this[g],10)<=k&&(b&&(this[f]=!0),c.push(this))});break;case"adjacency":a&&(c.push(a),m=d.p.treeReader.parent_id_field,n=d.p.localReader.id,$(this.p.data).each(function(a){for(e=c.length,a=0;e>a;a++)if($.jgrid.stripPref(d.p.idPrefix,c[a][n])===this[m]){b&&(this[f]=!0),c.push(this);break}}))}}),c},getNodeAncestors:function(a){var b=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var c=$(this).jqGrid("getNodeParent",a);c;)b.push(c),c=$(this).jqGrid("getNodeParent",c)}),b},isVisibleNode:function(a){var b=!0;return this.each(function(){var d,e,c=this;c.grid&&c.p.treeGrid&&(d=$(c).jqGrid("getNodeAncestors",a),e=c.p.treeReader.expanded_field,$(d).each(function(){return b=b&&this[e],b?void 0:!1}))}),b},isNodeLoaded:function(a){var b;return this.each(function(){var d,e,c=this;c.grid&&c.p.treeGrid&&(d=c.p.treeReader.leaf_field,e=c.p.treeReader.loaded,b=void 0!==a?void 0!==a[e]?a[e]:a[d]||$(c).jqGrid("getNodeChildren",a).length>0?!0:!1:!1)}),b},reloadNode:function(a){return this.each(function(){var b,c,d,e,f,g,h,i,j,k;this.grid&&this.p.treeGrid&&(b=this.p.localReader.id,c=this.p.selrow,$(this).jqGrid("delChildren",a[b]),d=this.p.treeReader.expanded_field,e=this.p.treeReader.parent_id_field,f=this.p.treeReader.loaded,g=this.p.treeReader.level_field,h=this.p.treeReader.left_field,i=this.p.treeReader.right_field,j=$.jgrid.getAccessor(a,this.p.localReader.id),k=$("#"+j,this.grid.bDiv)[0],a[d]=!0,$("div.treeclick",k).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=k.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:j,n_left:a[h],n_right:a[i],n_level:a[g]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:j,parentid:a[e],n_level:a[g]}}),$(this).trigger("reloadGrid"),a[f]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{selrow:c,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{selrow:c,postData:{nodeid:"",parentid:"",n_level:""}}))})},expandNode:function(a){return this.each(function(){var b,c,d,e,f,g,h,i,j,k;if(this.grid&&this.p.treeGrid&&(b=this.p.treeReader.expanded_field,c=this.p.treeReader.parent_id_field,d=this.p.treeReader.loaded,e=this.p.treeReader.level_field,f=this.p.treeReader.left_field,g=this.p.treeReader.right_field,!a[b])){if(h=$.jgrid.getAccessor(a,this.p.localReader.id),i=$("#"+this.p.idPrefix+$.jgrid.jqID(h),this.grid.bDiv)[0],j=this.p._index[h],k=$.isFunction(this.p.beforeExpandTreeGridNode)?this.p.beforeExpandTreeGridNode.call(this,h,a):!0,k===!1)return;$(this).jqGrid("isNodeLoaded",this.p.data[j])?(a[b]=!0,$("div.treeclick",i).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(a[b]=!0,$("div.treeclick",i).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=i.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:h,n_left:a[f],n_right:a[g],n_level:a[e]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:h,parentid:a[c],n_level:a[e]}}),$(this).trigger("reloadGrid"),a[d]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})),$.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,h,a)}})},collapseNode:function(a){return this.each(function(){var b,c,d,e;if(this.grid&&this.p.treeGrid&&(b=this.p.treeReader.expanded_field,a[b])){if(c=$.jgrid.getAccessor(a,this.p.localReader.id),d=$.isFunction(this.p.beforeCollapseTreeGridNode)?this.p.beforeCollapseTreeGridNode.call(this,c,a):!0,e=$("#"+this.p.idPrefix+$.jgrid.jqID(c),this.grid.bDiv)[0],a[b]=!1,d===!1)return;$("div.treeclick",e).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"),$.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,c,a)}})},SortTree:function(a,b,c,d){return this.each(function(){if(this.grid&&this.p.treeGrid){var e,f,g,j,k,h=[],i=this,l=$(this).jqGrid("getRootNodes",i.p.search);for(j=$.jgrid.from.call(this,l),j.orderBy(a,b,c,d),k=j.select(),e=0,f=k.length;f>e;e++)g=k[e],h.push(g),$(this).jqGrid("collectChildrenSortTree",h,g,a,b,c,d);$.each(h,function(a){var b=$.jgrid.getAccessor(this,i.p.localReader.id);$("#"+$.jgrid.jqID(i.p.id)+" tbody tr:eq("+a+")").after($("tr#"+$.jgrid.jqID(b),i.grid.bDiv))}),j=null,k=null,h=null}})},searchTree:function(a){var b,e,h,c=a.length||0,d=[],f=[],g=[];return this.each(function(){if(this.grid&&this.p.treeGrid&&c)for(e=this.p.localReader.id,b=0;c>b;b++)d=$(this).jqGrid("getNodeAncestors",a[b]),d.length||d.push(a[b]),h=d[d.length-1][e],-1===$.inArray(h,f)&&(f.push(h),d=$(this).jqGrid("getFullTreeNode",d[d.length-1],!0),g=g.concat(d))}),g},collectChildrenSortTree:function(a,b,c,d,e,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var g,h,i,j,k,l;for(j=$(this).jqGrid("getNodeChildren",b),k=$.jgrid.from.call(this,j),k.orderBy(c,d,e,f),l=k.select(),g=0,h=l.length;h>g;g++)i=l[g],a.push(i),$(this).jqGrid("collectChildrenSortTree",a,i,c,d,e,f)}})},setTreeRow:function(a,b){var c=!1;return this.each(function(){var d=this;d.grid&&d.p.treeGrid&&(c=$(d).jqGrid("setRowData",a,b))}),c},delTreeNode:function(a){return this.each(function(){var d,g,h,i,j,k,l,b=this,c=b.p.localReader.id,e=b.p.treeReader.left_field,f=b.p.treeReader.right_field;if(b.grid&&b.p.treeGrid&&(k=b.p._index[a],void 0!==k)){if(g=parseInt(b.p.data[k][f],10),h=g-parseInt(b.p.data[k][e],10)+1,l=$(b).jqGrid("getFullTreeNode",b.p.data[k]),l.length>0)for(d=0;d<l.length;d++)$(b).jqGrid("delRowData",l[d][c]);
if("nested"===b.p.treeGridModel){if(i=$.jgrid.from.call(b,b.p.data).greater(e,g,{stype:"integer"}).select(),i.length)for(j in i)i.hasOwnProperty(j)&&(i[j][e]=parseInt(i[j][e],10)-h);if(i=$.jgrid.from.call(b,b.p.data).greater(f,g,{stype:"integer"}).select(),i.length)for(j in i)i.hasOwnProperty(j)&&(i[j][f]=parseInt(i[j][f],10)-h)}}})},delChildren:function(a){return this.each(function(){var f,g,h,i,j,k,l,b=this,c=b.p.localReader.id,d=b.p.treeReader.left_field,e=b.p.treeReader.right_field;if(b.grid&&b.p.treeGrid&&(j=b.p._index[a],void 0!==j)){if(f=parseInt(b.p.data[j][e],10),g=f-parseInt(b.p.data[j][d],10)+1,k=$(b).jqGrid("getFullTreeNode",b.p.data[j]),k.length>0)for(l=0;l<k.length;l++)k[l][c]!==a&&$(b).jqGrid("delRowData",k[l][c]);if("nested"===b.p.treeGridModel){if(h=$.jgrid.from(b.p.data).greater(d,f,{stype:"integer"}).select(),h.length)for(i in h)h.hasOwnProperty(i)&&(h[i][d]=parseInt(h[i][d],10)-g);if(h=$.jgrid.from(b.p.data).greater(e,f,{stype:"integer"}).select(),h.length)for(i in h)h.hasOwnProperty(i)&&(h[i][e]=parseInt(h[i][e],10)-g)}}})},addChildNode:function(a,b,c,d){var m,n,o,p,q,r,u,v,f,g,h,i,j,k,l,s,t,w,x,y,z,A,e=this[0];if(c){if(f=e.p.treeReader.expanded_field,g=e.p.treeReader.leaf_field,h=e.p.treeReader.level_field,i=e.p.treeReader.parent_id_field,j=e.p.treeReader.left_field,k=e.p.treeReader.right_field,l=e.p.treeReader.loaded,s=0,t=b,void 0===d&&(d=!1),null==a){if(q=e.p.data.length-1,q>=0)for(;q>=0;)s=Math.max(s,parseInt(e.p.data[q][e.p.localReader.id],10)),q--;a=s+1}if(w=$(e).jqGrid("getInd",b),u=!1,void 0===b||null===b||""===b?(b=null,t=null,m="last",p=e.p.tree_root_level,q=e.p.data.length+1):(m="after",n=e.p._index[b],o=e.p.data[n],b=o[e.p.localReader.id],p=parseInt(o[h],10)+1,x=$(e).jqGrid("getFullTreeNode",o),x.length?(q=x[x.length-1][e.p.localReader.id],t=q,q=$(e).jqGrid("getInd",t)+1):q=$(e).jqGrid("getInd",b)+1,o[g]&&(u=!0,o[f]=!0,$(e.rows[w]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(e.p.treeIcons.leaf+" tree-leaf").addClass(e.p.treeIcons.minus+" tree-minus"),e.p.data[n][g]=!1,o[l]=!0)),r=q+1,void 0===c[f]&&(c[f]=!1),void 0===c[l]&&(c[l]=!1),c[h]=p,void 0===c[g]&&(c[g]=!0),"adjacency"===e.p.treeGridModel&&(c[i]=b),"nested"===e.p.treeGridModel)if(null!==b){if(v=parseInt(o[k],10),y=$.jgrid.from.call(e,e.p.data),y=y.greaterOrEquals(k,v,{stype:"integer"}),z=y.select(),z.length)for(A in z)z.hasOwnProperty(A)&&(z[A][j]=z[A][j]>v?parseInt(z[A][j],10)+2:z[A][j],z[A][k]=z[A][k]>=v?parseInt(z[A][k],10)+2:z[A][k]);c[j]=v,c[k]=v+1}else{if(v=parseInt($(e).jqGrid("getCol",k,!1,"max"),10),z=$.jgrid.from.call(e,e.p.data).greater(j,v,{stype:"integer"}).select(),z.length)for(A in z)z.hasOwnProperty(A)&&(z[A][j]=parseInt(z[A][j],10)+2);if(z=$.jgrid.from.call(e,e.p.data).greater(k,v,{stype:"integer"}).select(),z.length)for(A in z)z.hasOwnProperty(A)&&(z[A][k]=parseInt(z[A][k],10)+2);c[j]=v+1,c[k]=v+2}(null===b||$(e).jqGrid("isNodeLoaded",o)||u)&&($(e).jqGrid("addRowData",a,c,m,t),$(e).jqGrid("setTreeNode",q,r)),o&&!o[f]&&d&&$(e.rows[w]).find("div.treeclick").click()}}}),$.fn.jqDrag=function(a){return i(this,a,"d")},$.fn.jqResize=function(a,b){return i(this,a,"r",b)},$.jqDnR={dnr:{},e:0,drag:function(a){return"d"==M.k?E.css({left:M.X+a.pageX-M.pX,top:M.Y+a.pageY-M.pY}):(E.css({width:Math.max(a.pageX-M.pX+M.W,0),height:Math.max(a.pageY-M.pY+M.H,0)}),M1&&E1.css({width:Math.max(a.pageX-M1.pX+M1.W,0),height:Math.max(a.pageY-M1.pY+M1.H,0)})),!1},stop:function(){$(document).unbind("mousemove",J.drag).unbind("mouseup",J.stop)}},J=$.jqDnR,M=J.dnr,E=J.e,i=function(a,b,c,d){return a.each(function(){b=b?$(b,a):a,b.bind("mousedown",{e:a,k:c},function(a){var b=a.data,c={};if(E=b.e,E1=d?$(d):!1,"relative"!=E.css("position"))try{E.position(c)}catch(e){}if(M={X:c.left||f("left")||0,Y:c.top||f("top")||0,W:f("width")||E[0].scrollWidth||0,H:f("height")||E[0].scrollHeight||0,pX:a.pageX,pY:a.pageY,k:b.k},M1=E1&&"d"!=b.k?{X:c.left||f1("left")||0,Y:c.top||f1("top")||0,W:E1[0].offsetWidth||f1("width")||0,H:E1[0].offsetHeight||f1("height")||0,pX:a.pageX,pY:a.pageY,k:b.k}:!1,$("input.hasDatepicker",E[0])[0])try{$("input.hasDatepicker",E[0]).datepicker("hide")}catch(g){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},f=function(a){return parseInt(E.css(a),10)||!1},f1=function(a){return parseInt(E1.css(a),10)||!1},$.fn.tinyDraggable=function(a){var b=$.extend({handle:0,exclude:0},a);return this.each(function(){var a,c,d=$(this),e=b.handle?$(b.handle,d):d;e.on({mousedown:function(e){if(!b.exclude||!~$.inArray(e.target,$(b.exclude,d))){e.preventDefault();var f=d.offset();a=e.pageX-f.left,c=e.pageY-f.top,$(document).on("mousemove.drag",function(b){d.offset({top:b.pageY-c,left:b.pageX-a})})}},mouseup:function(){$(document).off("mousemove.drag")}})})},$.fn.jqm=function(a){var b={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:F,ajaxText:"",target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){return this._jqm?H[this._jqm].c=$.extend({},H[this._jqm].c,a):(s++,this._jqm=s,H[s]={c:$.extend(b,$.jqm.params,a),a:F,w:$(this).addClass("jqmID"+s),s:s},b.trigger&&$(this).jqmAddTrigger(b.trigger),void 0)})},$.fn.jqmAddClose=function(a){return hs(this,a,"jqmHide")},$.fn.jqmAddTrigger=function(a){return hs(this,a,"jqmShow")},$.fn.jqmShow=function(a){return this.each(function(){$.jqm.open(this._jqm,a)})},$.fn.jqmHide=function(a){return this.each(function(){$.jqm.close(this._jqm,a)})},$.jqm={hash:{},open:function(a,b){var h,i,j,c=H[a],d=c.c,f="."+d.closeClass,g=parseInt(c.w.css("z-index"));return g=g>0?g:3e3,h=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":g-1,opacity:d.overlay/100}),c.a?F:(c.t=b,c.a=!0,c.w.css("z-index",g),d.modal?(A[0]||setTimeout(function(){new L("bind")},1),A.push(a)):d.overlay>0?d.closeoverlay&&c.w.jqmAddClose(h):h=F,c.o=h?h.addClass(d.overlayClass).prependTo("body"):F,d.ajax?(i=d.target||c.w,j=d.ajax,i="string"==typeof i?$(i,c.w):$(i),j="@"===j.substr(0,1)?$(b).attr(j.substring(1)):j,i.html(d.ajaxText).load(j,function(){d.onLoad&&d.onLoad.call(this,c),f&&c.w.jqmAddClose($(f,c.w)),e(c)})):f&&c.w.jqmAddClose($(f,c.w)),d.toTop&&c.o&&c.w.before('<span id="jqmP'+c.w[0]._jqm+'"></span>').insertAfter(c.o),d.onShow?d.onShow(c):c.w.show(),e(c),F)},close:function(a){var b=H[a];return b.a?(b.a=F,A[0]&&(A.pop(),A[0]||new L("unbind")),b.c.toTop&&b.o&&$("#jqmP"+b.w[0]._jqm).after(b.w).remove(),b.c.onHide?b.c.onHide(b):(b.w.hide(),b.o&&b.o.remove()),F):F},params:{}},s=0,H=$.jqm.hash,A=[],F=!1,e=function(a){void 0===a.c.focusField&&(a.c.focusField=0),a.c.focusField>=0&&f(a)},f=function(a){try{$(":input:visible",a.w)[parseInt(a.c.focusField,10)].focus()}catch(b){}},L=function(a){$(document)[a]("keypress",m)[a]("keydown",m)[a]("mousedown",m)},m=function(a){var b=H[A[A.length-1]],c=!$(a.target).parents(".jqmID"+b.s)[0];return c&&($(".jqmID"+b.s).each(function(){var b=$(this),d=b.offset();return d.top<=a.pageY&&a.pageY<=d.top+b.height()&&d.left<=a.pageX&&a.pageX<=d.left+b.width()?(c=!1,!1):void 0}),f(b)),!c},hs=function(a,b,c){return a.each(function(){var a=this._jqm;$(b).each(function(){this[c]||(this[c]=[],$(this).click(function(){var a,b;for(a in{jqmShow:1,jqmHide:1})for(b in this[a])H[this[a][b]]&&H[this[a][b]].w[a](this);return F})),this[c].push(a)})})},$.fmatter={},$.extend($.fmatter,{isBoolean:function(a){return"boolean"==typeof a},isObject:function(a){return a&&("object"==typeof a||$.isFunction(a))||!1},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(a){return!this.isString(a)&&this.isValue(a)?!1:this.isValue(a)?(a=$.trim(a).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===a):!0}}),$.fn.fmatter=function(a,b,c,d,e){var f=b;c=$.extend({},$.jgrid.getRegional(this,"formatter"),c);try{f=$.fn.fmatter[a].call(this,b,c,d,e)}catch(g){}return f},$.fmatter.util={NumberFormat:function(a,b){var c,d,e,f,g,h,i,j,l,k;if($.fmatter.isNumber(a)||(a*=1),$.fmatter.isNumber(a)){if(c=0>a,d=String(a),e=b.decimalSeparator||".",$.fmatter.isNumber(b.decimalPlaces)&&(g=b.decimalPlaces,h=Math.pow(10,g),d=String(Math.round(a*h)/h),f=d.lastIndexOf("."),g>0))for(0>f?(d+=e,f=d.length-1):"."!==e&&(d=d.replace(".",e));d.length-1-f<g;)d+="0";if(b.thousandsSeparator){for(i=b.thousandsSeparator,f=d.lastIndexOf(e),f=f>-1?f:d.length,j=d.substring(f),k=-1,l=f;l>0;l--)k++,0===k%3&&l!==f&&(!c||l>1)&&(j=i+j),j=d.charAt(l-1)+j;d=j}return d=b.prefix?b.prefix+d:d,d=b.suffix?d+b.suffix:d}return a}},$.fn.fmatter.defaultFormat=function(a,b){return $.fmatter.isValue(a)&&""!==a?a:b.defaultValue||"&#160;"},$.fn.fmatter.email=function(a,b){return $.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):'<a href="mailto:'+a+'">'+a+"</a>"},$.fn.fmatter.checkbox=function(a,b){var d,e,c=$.extend({},b.checkbox);return void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=$.extend({},c,b.colModel.formatoptions)),d=c.disabled===!0?'disabled="disabled"':"",($.fmatter.isEmpty(a)||void 0===a)&&(a=$.fn.fmatter.defaultFormat(a,c)),a=String(a),a=(a+"").toLowerCase(),e=a.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+e+' value="'+a+'" offval="no" '+d+"/>"},$.fn.fmatter.link=function(a,b){var c={target:b.target},d="";return void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=$.extend({},c,b.colModel.formatoptions)),c.target&&(d="target="+c.target),$.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):"<a "+d+' href="'+a+'">'+a+"</a>"},$.fn.fmatter.showlink=function(a,b){var e,c={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName},d="";return void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=$.extend({},c,b.colModel.formatoptions)),c.target&&(d="target="+c.target),e=c.baseLinkUrl+c.showAction+"?"+c.idName+"="+b.rowId+c.addParam,$.fmatter.isString(a)||$.fmatter.isNumber(a)?"<a "+d+' href="'+e+'">'+a+"</a>":$.fn.fmatter.defaultFormat(a,b)},$.fn.fmatter.integer=function(a,b){var c=$.extend({},b.integer);return void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=$.extend({},c,b.colModel.formatoptions)),$.fmatter.isEmpty(a)?c.defaultValue:$.fmatter.util.NumberFormat(a,c)},$.fn.fmatter.number=function(a,b){var c=$.extend({},b.number);return void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=$.extend({},c,b.colModel.formatoptions)),$.fmatter.isEmpty(a)?c.defaultValue:$.fmatter.util.NumberFormat(a,c)},$.fn.fmatter.currency=function(a,b){var c=$.extend({},b.currency);return void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(c=$.extend({},c,b.colModel.formatoptions)),$.fmatter.isEmpty(a)?c.defaultValue:$.fmatter.util.NumberFormat(a,c)},$.fn.fmatter.date=function(a,b,c,d){var e=$.extend({},b.date);return void 0!==b.colModel&&void 0!==b.colModel.formatoptions&&(e=$.extend({},e,b.colModel.formatoptions)),e.reformatAfterEdit||"edit"!==d?$.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):$.jgrid.parseDate.call(this,e.srcformat,a,e.newformat,e):$.fn.fmatter.defaultFormat(a,b)},$.fn.fmatter.select=function(a,b){var e,f,c,d,i,g,h,l,j,k;if(a=String(a),c=!1,d=[],void 0!==b.colModel.formatoptions?(c=b.colModel.formatoptions.value,e=void 0===b.colModel.formatoptions.separator?":":b.colModel.formatoptions.separator,f=void 0===b.colModel.formatoptions.delimiter?";":b.colModel.formatoptions.delimiter):void 0!==b.colModel.editoptions&&(c=b.colModel.editoptions.value,e=void 0===b.colModel.editoptions.separator?":":b.colModel.editoptions.separator,f=void 0===b.colModel.editoptions.delimiter?";":b.colModel.editoptions.delimiter),c)if(g=(null!=b.colModel.editoptions&&b.colModel.editoptions.multiple===!0)==!0?!0:!1,h=[],g&&(h=a.split(","),h=$.map(h,function(a){return $.trim(a)})),$.fmatter.isString(c)){for(j=c.split(f),k=0,l=0;l<j.length;l++)if(i=j[l].split(e),i.length>2&&(i[1]=$.map(i,function(a,b){return b>0?a:void 0}).join(e)),g)$.inArray(i[0],h)>-1&&(d[k]=i[1],k++);else if($.trim(i[0])===$.trim(a)){d[0]=i[1];break}}else $.fmatter.isObject(c)&&(g?d=$.map(h,function(a){return c[a]}):d[0]=c[a]||"");return a=d.join(", "),""===a?$.fn.fmatter.defaultFormat(a,b):a},$.fn.fmatter.rowactions=function(a){var m,b=$(this).closest("tr.jqgrow"),c=b.attr("id"),d=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),e=$("#"+d),f=e[0],g=f.p,h=g.colModel[$.jgrid.getCellIndex(this)],i=h.frozen?$("tr#"+c+" td:eq("+$.jgrid.getCellIndex(this)+") > div",e):$(this).parent(),j={extraparam:{}},k=function(a,b){$.isFunction(j.afterSave)&&j.afterSave.call(f,a,b),i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide()},l=function(a){$.isFunction(j.afterRestore)&&j.afterRestore.call(f,a),i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide()};switch(void 0!==h.formatoptions&&(j=$.extend(j,h.formatoptions)),void 0!==g.editOptions&&(j.editOptions=g.editOptions),void 0!==g.delOptions&&(j.delOptions=g.delOptions),b.hasClass("jqgrid-new-row")&&(j.extraparam[g.prmNames.oper]=g.prmNames.addoper),m={keys:j.keys,oneditfunc:j.onEdit,successfunc:j.onSuccess,url:j.url,extraparam:j.extraparam,aftersavefunc:k,errorfunc:j.onError,afterrestorefunc:l,restoreAfterError:j.restoreAfterError,mtype:j.mtype},a){case"edit":e.jqGrid("editRow",c,m),i.find("div.ui-inline-edit,div.ui-inline-del").hide(),i.find("div.ui-inline-save,div.ui-inline-cancel").show(),e.triggerHandler("jqGridAfterGridComplete");break;case"save":e.jqGrid("saveRow",c,m)&&(i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide(),e.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":e.jqGrid("restoreRow",c,l),i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide(),e.triggerHandler("jqGridAfterGridComplete");break;case"del":e.jqGrid("delGridRow",c,j.delOptions);break;case"formedit":e.jqGrid("setSelection",c),e.jqGrid("editGridRow",c,j.editOptions)}},$.fn.fmatter.actions=function(a,b){var f,j,c={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},d=b.rowId,e="",g=$.jgrid.getRegional(this,"nav"),h=$.jgrid.styleUI[b.styleUI||"jQueryUI"].fmatter,i=$.jgrid.styleUI[b.styleUI||"jQueryUI"].common;return void 0!==b.colModel.formatoptions&&(c=$.extend(c,b.colModel.formatoptions)),void 0===d||$.fmatter.isEmpty(d)?"":(j="onmouseover=jQuery(this).addClass('"+i.hover+"'); onmouseout=jQuery(this).removeClass('"+i.hover+"');  ",c.editformbutton?(f="id='jEditButton_"+d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+j,e+="<div title='"+g.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+f+"><span class='"+i.icon_base+" "+h.icon_edit+"'></span></div>"):c.editbutton&&(f="id='jEditButton_"+d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+j,e+="<div title='"+g.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+f+"><span class='"+i.icon_base+" "+h.icon_edit+"'></span></div>"),c.delbutton&&(f="id='jDeleteButton_"+d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+j,e+="<div title='"+g.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+f+"><span class='"+i.icon_base+" "+h.icon_del+"'></span></div>"),f="id='jSaveButton_"+d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+j,e+="<div title='"+g.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+f+"><span class='"+i.icon_base+" "+h.icon_save+"'></span></div>",f="id='jCancelButton_"+d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+j,e+="<div title='"+g.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+f+"><span class='"+i.icon_base+" "+h.icon_cancel+"'></span></div>","<div style='margin-left:8px;'>"+e+"</div>")},$.unformat=function(a,b,c,d){var e,h,l,k,m,f=b.colModel.formatter,g=b.colModel.formatoptions||{},i=/([\.\*\_\'\(\)\{\}\+\?\\])/g,j=b.colModel.unformat||$.fn.fmatter[f]&&$.fn.fmatter[f].unformat;if(void 0!==j&&$.isFunction(j))e=j.call(this,$(a).text(),b,a);else if(void 0!==f&&$.fmatter.isString(f))switch(k=$.jgrid.getRegional(this,"formatter")||{},f){case"integer":g=$.extend({},k.integer,g),h=g.thousandsSeparator.replace(i,"\\$1"),l=new RegExp(h,"g"),e=$(a).text().replace(l,"");break;case"number":g=$.extend({},k.number,g),h=g.thousandsSeparator.replace(i,"\\$1"),l=new RegExp(h,"g"),e=$(a).text().replace(l,"").replace(g.decimalSeparator,".");break;case"currency":g=$.extend({},k.currency,g),h=g.thousandsSeparator.replace(i,"\\$1"),l=new RegExp(h,"g"),e=$(a).text(),g.prefix&&g.prefix.length&&(e=e.substr(g.prefix.length)),g.suffix&&g.suffix.length&&(e=e.substr(0,e.length-g.suffix.length)),e=e.replace(l,"").replace(g.decimalSeparator,".");break;case"checkbox":m=b.colModel.editoptions?b.colModel.editoptions.value.split(":"):["Yes","No"],e=$("input",a).is(":checked")?m[0]:m[1];break;case"select":e=$.unformat.select(a,b,c,d);break;case"actions":return"";default:e=$(a).text()}return void 0!==e?e:d===!0?$(a).text():$.jgrid.htmlDecode($(a).html())},$.unformat.select=function(a,b,c,d){var g,h,i,m,j,k,l,p,n,o,e=[],f=$(a).text();if(d===!0)return f;if(g=$.extend({},void 0!==b.colModel.formatoptions?b.colModel.formatoptions:b.colModel.editoptions),h=void 0===g.separator?":":g.separator,i=void 0===g.delimiter?";":g.delimiter,g.value){if(j=g.value,k=g.multiple===!0?!0:!1,l=[],k&&(l=f.split(","),l=$.map(l,function(a){return $.trim(a)})),$.fmatter.isString(j)){for(n=j.split(i),o=0,p=0;p<n.length;p++)if(m=n[p].split(h),m.length>2&&(m[1]=$.map(m,function(a,b){return b>0?a:void 0}).join(h)),k)$.inArray($.trim(m[1]),l)>-1&&(e[o]=m[0],o++);else if($.trim(m[1])===$.trim(f)){e[0]=m[0];break}}else($.fmatter.isObject(j)||$.isArray(j))&&(k||(l[0]=f),e=$.map(l,function(a){var b;return $.each(j,function(c,d){return d===a?(b=c,!1):void 0}),void 0!==b?b:void 0}));return e.join(", ")}return f||""},$.unformat.date=function(a,b){var c=$.jgrid.getRegional(this,"formatter.date")||{};return void 0!==b.formatoptions&&(c=$.extend({},c,b.formatoptions)),$.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):$.jgrid.parseDate.call(this,c.newformat,a,c.srcformat,c)},window.jqGridUtils={stringify:function(a){return JSON.stringify(a,function(a,b){return"function"==typeof b?b.toString():b})},parse:function(str){return JSON.parse(str,function(key,value){return"string"==typeof value&&-1!==value.indexOf("function")?eval("("+value+")"):value})},encode:function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(a,b){var c=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},b||{}),d=this,e=function(a,b){return"#text"===a?c.encode?d.encode(b):b:"function"==typeof b?"<"+a+"><![CDATA["+b+"]]></"+a+">\n":""===b?"<"+a+">__EMPTY_STRING_</"+a+">\n":"<"+a+">"+(c.encode?d.encode(b):b)+"</"+a+">\n"},f=function(a,b){var d,h,c=[];for(d=0;d<b.length;d++)h=b[d],c[c.length]="undefined"==typeof h||null==h?"<"+a+" />":"object"==typeof h&&h.constructor==Array?f(a,h):"object"==typeof h?g(a,h):e(a,h);return c.length||(c[0]="<"+a+">__EMPTY_ARRAY_</"+a+">\n"),c.join("")},g=function(a,b){var j,k,l,m,h=[],i=[];for(j in b)b.hasOwnProperty(j)&&(k=b[j],j.charAt(0)!==c.attr_prefix?h[h.length]=null==k?"<"+j+" />":"object"==typeof k&&k.constructor===Array?f(j,k):"object"==typeof k?g(j,k):e(j,k):i[i.length]=" "+j.substring(1)+'="'+(c.encode?d.encode(k):k)+'"');return l=i.join(""),m=h.join(""),null==a||(m=h.length>0?m.match(/\n/)?"<"+a+l+">\n"+m+"</"+a+">\n":"<"+a+l+">"+m+"</"+a+">\n":"<"+a+l+" />\n"),m},h=g(null,a);return c.xmlDecl+h},xmlToJSON:function(root,options){var __force_array,i,addNode,parseElement,json,tmp,o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(root){if(__force_array={},o.force_array)for(i=0;i<o.force_array.length;i++)__force_array[o.force_array[i]]=1;return"string"==typeof root&&(root=$.parseXML(root)),root.documentElement&&(root=root.documentElement),addNode=function(hash,key,cnts,val){if("string"==typeof val)if(-1!==val.indexOf("function"))val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(1===cnts&&(hash[key]=[]),hash[key][hash[key].length]=val):1===cnts?hash[key]=val:2===cnts?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},parseElement=function(a){var b,c,e,f,g,d,h,i;if(7!==a.nodeType){if(3===a.nodeType||4===a.nodeType){if(b=a.nodeValue.match(/[^\x00-\x20]/),null==b)return;return a.nodeValue}if(d={},a.attributes&&a.attributes.length)for(c={},e=0;e<a.attributes.length;e++)f=a.attributes[e].nodeName,"string"==typeof f&&(g=a.attributes[e].nodeValue,g&&(f=o.attr_prefix+f,"undefined"==typeof d[f]&&(d[f]=0),d[f]++,addNode(c,f,d[f],g)));if(a.childNodes&&a.childNodes.length){for(h=!0,c&&(h=!1),e=0;e<a.childNodes.length&&h;e++)i=a.childNodes[e].nodeType,3!==i&&4!==i&&(h=!1);if(h)for(c||(c=""),e=0;e<a.childNodes.length;e++)c+=a.childNodes[e].nodeValue;else for(c||(c={}),e=0;e<a.childNodes.length;e++)f=a.childNodes[e].nodeName,"string"==typeof f&&(g=parseElement(a.childNodes[e]),g&&("undefined"==typeof d[f]&&(d[f]=0),d[f]++,addNode(c,f,d[f],g)))}return c}},json=parseElement(root),__force_array[root.nodeName]&&(json=[json]),11!==root.nodeType&&(tmp={},tmp[root.nodeName]=json,json=tmp),json}}}}),oldPage=1,function(a){a.extend(a.jgrid.defaults,{ajaxGridOptions:{type:"POST"},viewrecords:!0,datatype:"json",autowidth:!0,rownumbers:!0,rowNum:100,height:300,scroll:!0,pager:"#pagerBar",sortorder:"desc",emptyrecords:"没有记录",altRows:!0,altclass:"ui-alt-row",hoverrows:!0,multiselect:!0,multiboxonly:!0,shrinkToFit:!0,multiselectWidth:25,hidegrid:!1,caption:"",cmTemplate:{title:!1,align:"left",sortable:!1},jsonReader:{id:"id",root:"resultList",page:"pageResult.currentPage",total:"pageResult.allPages",records:"pageResult.rows",repeatitems:!1,cell:null},prmNames:{rows:"pageResult.pageSize",page:"pageResult.currentPage",sort:"condition.orderBy",order:"condition.sort"},onRightClickRow:function(a,b,c,d){return d=d||window.event,d.stopPropagation&&d.stopPropagation(),d.cancelBubble=!0,!1},loadError:function(){},gridComplete:function(){var b=a(window).width()-10;a(this).setGridWidth(b),setHistoryTop(this.id),setHistorySelect(this.id)}})}(jQuery),keyDownTableArray=new Array;